<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Android | é˜¿è´µ]]></title>
  <link href="http://andyfightting.github.io/blog/categories/android/atom.xml" rel="self"/>
  <link href="http://andyfightting.github.io/"/>
  <updated>2016-09-01T16:58:55+08:00</updated>
  <id>http://andyfightting.github.io/</id>
  <author>
    <name><![CDATA[guimingsu]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Androidä¸­çš„Fragment]]></title>
    <link href="http://andyfightting.github.io/blog/2016/09/01/fragment/"/>
    <updated>2016-09-01T11:38:27+08:00</updated>
    <id>http://andyfightting.github.io/blog/2016/09/01/fragment</id>
    <content type="html"><![CDATA[<p>åœ¨ Android 3.0ï¼ˆAPI 11 çº§ï¼‰ä¸­å¼•å…¥äº†Fragmentï¼Œä¸»è¦æ˜¯ä¸ºäº†ç»™å¤§å±å¹•ä¸Šæ›´åŠ åŠ¨æ€å’Œçµæ´»çš„ UI è®¾è®¡æä¾›æ”¯æŒã€‚ç”±äºå¹³æ¿ç”µè„‘çš„å±å¹•æ¯”æ‰‹æœºå±å¹•å¤§å¾—å¤šï¼Œå› æ­¤å¯ç”¨äºç»„åˆå’Œäº¤æ¢ UI ç»„ä»¶çš„ç©ºé—´æ›´å¤§ã€‚åˆ©ç”¨Fragmentå®ç°æ­¤ç±»è®¾è®¡æ—¶ï¼Œæ— éœ€ç®¡ç†å¯¹è§†å›¾å±‚æ¬¡ç»“æ„çš„å¤æ‚æ›´æ”¹ã€‚å®ƒå…·æœ‰è‡ªå·±çš„ç”Ÿå‘½å‘¨æœŸï¼Œèƒ½æ¥æ”¶è‡ªå·±çš„è¾“å…¥äº‹ä»¶ï¼Œå¹¶ä¸”å¯ä»¥åœ¨ Activity è¿è¡Œæ—¶æ·»åŠ æˆ–åˆ é™¤Fragmentï¼Œæœ‰ç‚¹åƒå¯ä»¥åœ¨ä¸åŒ Activity ä¸­é‡å¤ä½¿ç”¨çš„"å­ Activity"ã€‚ é€šè¿‡å°† Activity å¸ƒå±€åˆ†æˆFragmentï¼Œå¯ä»¥åœ¨è¿è¡Œæ—¶ä¿®æ”¹ Activity çš„å¤–è§‚ï¼Œå¹¶åœ¨ç”± Activity ç®¡ç†çš„è¿”å›æ ˆä¸­ä¿ç•™è¿™äº›æ›´æ”¹ã€‚Fragmentå¿…é¡»å§‹ç»ˆåµŒå…¥åœ¨ Activity ä¸­ï¼Œå…¶ç”Ÿå‘½å‘¨æœŸç›´æ¥å—å®¿ä¸» Activity ç”Ÿå‘½å‘¨æœŸçš„å½±å“ã€‚å½“ Activity æš‚åœæ—¶ï¼Œå…¶ä¸­çš„æ‰€æœ‰Fragmentä¹Ÿä¼šæš‚åœï¼›å½“ Activity è¢«é”€æ¯æ—¶ï¼Œæ‰€æœ‰Fragmentä¹Ÿä¼šè¢«é”€æ¯ã€‚</p>

<p>ä¸‹é¢æ˜¯Androidå®˜ç½‘ä¸Šçš„<a href="https://developer.android.com/guide/components/activities.html">Activity</a>å’Œ<a href="https://developer.android.com/guide/components/fragments.html">Fragment</a>çš„ç”Ÿå‘½å‘¨æœŸå›¾ã€‚</p>

<p><img src="/myimg/android/activity_lifecycle.png" alt="imga" /> <img src="/myimg/android/fragment_lifecycle.png" alt="imga" /></p>

<p>ä¸‹é¢æ˜¯ç½‘å‹æ•´ç†çš„è¯¦ç»†çš„<a href="https://github.com/xxv/android-lifecycle">å‘¨æœŸå›¾æ¯”è¾ƒ</a>ã€‚</p>

<p><img src="/myimg/android/fragment.png" alt="image" /></p>

<h4>ç”¨Fragmentå¯èƒ½ä¼šé‡åˆ°çš„é—®é¢˜</h4>

<h5>getActivity()ç©ºæŒ‡é’ˆ</h5>

<p>å¯èƒ½é‡åˆ°è¿‡getActivity()è¿”å›nullï¼Œæˆ–è€…å¹³æ—¶è¿è¡Œå®Œå¥½çš„ä»£ç ï¼Œåœ¨â€œå†…å­˜é‡å¯â€ä¹‹åï¼Œè°ƒç”¨getActivity()çš„åœ°æ–¹å´è¿”å›nullï¼ŒæŠ¥äº†ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹çš„åŸå› ï¼šåœ¨è°ƒç”¨äº†getActivity()æ—¶ï¼Œå½“å‰çš„Fragmentå·²ç»onDetach()äº†å®¿ä¸»Activityã€‚æ¯”å¦‚åœ¨popäº†Fragmentä¹‹åï¼Œè¯¥Fragmentçš„å¼‚æ­¥ä»»åŠ¡ä»ç„¶åœ¨æ‰§è¡Œï¼Œå¹¶ä¸”åœ¨æ‰§è¡Œå®Œæˆåè°ƒç”¨äº†getActivity()æ–¹æ³•ï¼Œè¿™æ ·å°±ä¼šç©ºæŒ‡é’ˆã€‚</p>

<p>å¯ä»¥åœ¨FragmentåŸºç±»é‡Œè®¾ç½®ä¸€ä¸ªActivity mActivityçš„å…¨å±€å˜é‡ï¼Œåœ¨onAttach(Activity activity)é‡Œèµ‹å€¼ï¼Œä½¿ç”¨mActivityä»£æ›¿getActivity()ï¼Œä¿è¯Fragmentå³ä½¿åœ¨onDetachåï¼Œä»æŒæœ‰Activityçš„å¼•ç”¨ã€‚</p>

<h5>Fragmenté‡å é—®é¢˜</h5>

<p>å¦‚æœadd()äº†å‡ ä¸ªFragmentï¼Œç„¶åä½¿ç”¨show()ã€hide()æ–¹æ³•æ§åˆ¶ï¼Œæ¯”å¦‚å¾®ä¿¡ã€QQçš„åº•éƒ¨tabç­‰æƒ…æ™¯ã€‚å¦‚æœä½ ä»€ä¹ˆéƒ½ä¸åšçš„è¯ï¼Œåœ¨â€œå†…å­˜é‡å¯â€åå›ï¼ŒTabçš„è¿™å‡ ä¸ªFragmentç•Œé¢ä¼šé‡å ã€‚(æ‰‹æœºæ¨ªç«–å±åˆ‡æ¢å°±å¯ä»¥æ¨¡æ‹Ÿâ€œå†…å­˜é‡å¯â€)ã€‚åŸå› æ˜¯FragmentManagerå¸®æˆ‘ä»¬ç®¡ç†Fragmentï¼Œå½“å‘ç”Ÿâ€œå†…å­˜é‡å¯â€ï¼Œä»–ä¼šä»æ ˆåº•å‘æ ˆé¡¶çš„é¡ºåºæ¢å¤Fragmentï¼Œä½†æ˜¯å› ä¸ºæ²¡æœ‰ä¿å­˜Fragmentçš„hiddenå±æ€§ï¼Œé»˜è®¤ä¸ºfalseï¼Œæ‰€ä»¥æ‰€æœ‰Fragmentéƒ½æ˜¯ä»¥showçš„å½¢å¼æ¢å¤ï¼Œç•Œé¢å°±é‡å äº†ã€‚</p>

<h5>è§£å†³æ–¹æ³•ä¸€</h5>

<p>ä¸ç”¨add()çš„æ–¹å¼å¤„ç†tabçš„Fragmentï¼Œç›´æ¥åœ¨Activityçš„å¸ƒå±€æ–‡ä»¶ä¸­æ·»åŠ éœ€è¦çš„Fragment,ç„¶ååœ¨Activityä¸­é€šè¿‡getFragmentManager().findFragmentById(ï¼‰çš„æ–¹å¼å¾—åˆ°Fragmentï¼Œç„¶åå¤„ç†å¯¹åº”çš„hide,showã€‚</p>

<pre><code>    &lt;fragment
        android:id="@+id/fragment0"
        android:name="com.suguiming.myandroid.tab0.Fragment0"
        android:layout_above="@+id/tab_line"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        tools:layout="@layout/fragment_container"/&gt;
    &lt;fragment
        android:id="@+id/fragment1"
        android:name="com.suguiming.myandroid.tab1.Fragment1"
        android:layout_above="@+id/tab_line"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        tools:layout="@layout/fragment_container"/&gt;
</code></pre>

<h5>è§£å†³æ–¹æ³•äºŒ</h5>

<p>åœ¨ç”¨add()æˆ–è€…replace()æ—¶ä¸ºFragmentç»‘å®šä¸€ä¸ªtagï¼Œä¸€èˆ¬ç”¨fragmentçš„ç±»åä½œä¸ºtagï¼Œç„¶ååœ¨å‘ç”Ÿâ€œå†…å­˜é‡å¯â€æ—¶ï¼Œå³savedInstanceState!=null æ—¶ï¼Œé€šè¿‡getFragmentManager().findFragmentByTag()æ‰¾åˆ°å¯¹åº”çš„Fragmentï¼Œç„¶åhideã€show å¯¹åº”çš„Fragmentã€‚</p>

<pre><code>protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity);

TargetFragment targetFragment;
HideFragment hideFragment;

if (savedInstanceState != null) {  // â€œå†…å­˜é‡å¯â€æ—¶è°ƒç”¨
    targetFragment = getSupportFragmentManager().findFragmentByTag(TargetFragment.class.getName);
    hideFragment = getSupportFragmentManager().findFragmentByTag(HideFragment.class.getName);
    // è§£å†³é‡å é—®é¢˜
    getFragmentManager().beginTransaction()
            .show(targetFragment)
            .hide(hideFragment)
            .commit();
}else{  // æ­£å¸¸æ—¶
    targetFragment = TargetFragment.newInstance();
    hideFragment = HideFragment.newInstance();

    getFragmentManager().beginTransaction()
            .add(R.id.container, targetFragment, targetFragment.getClass().getName())
            .add(R.id,container,hideFragment,hideFragment.getClass().getName())
            .hide(hideFragment)
            .commit();
}
}
</code></pre>

<h5>è§£å†³æ–¹æ³•ä¸‰</h5>

<p>ç”±äºé€ æˆé‡å çš„åŸå› æ˜¯å› ä¸ºFragmentä¸ä¼šä¿å­˜hideçš„çŠ¶æ€ï¼Œé‚£æˆ‘ä»¬å¯ä»¥åœ¨BaseFragmentä¸­æ‰‹åŠ¨ä¿å­˜ç„¶åå¤„ç†å•Šï¼</p>

<pre><code>private static final String FRAGMENT_IS_HIDDEN = "FRAGMENT_IS_HIDDEN";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    //è§£å†³é‡å é—®é¢˜
    if (savedInstanceState != null) {
        boolean isHidden = savedInstanceState.getBoolean(FRAGMENT_IS_HIDDEN);
        FragmentTransaction ft = getFragmentManager().beginTransaction();
        if (isHidden) {
            ft.hide(this);
        } else {
            ft.show(this);
        }
        ft.commit();
    }
}

@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putBoolean(FRAGMENT_IS_HIDDEN, isHidden());//ä¿æŒfragmentæ˜¯å¦éšè—çš„çŠ¶æ€
}
</code></pre>

<p>åœ¨ä½¿ç”¨æ—¶è¿˜æ˜¯è¦æ³¨æ„åˆ¤æ–­savedInstanceStateæ˜¯å¦ä¸ºnullï¼Œåªæœ‰åœ¨ä¸ºç©ºæ—¶æ‰add()ã€‚åœ¨ä¸ä¸ºç©ºæ—¶å°±å¯ä»¥ä¸ç”¨å¤„ç†äº†ï¼Œäº¤ç”±BaseFragmentå¤„ç†äº†ã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Androidæ‰‹åŠ¿æ»‘åŠ¨è¿”å›]]></title>
    <link href="http://andyfightting.github.io/blog/2016/08/31/android-swipe/"/>
    <updated>2016-08-31T15:16:10+08:00</updated>
    <id>http://andyfightting.github.io/blog/2016/08/31/android-swipe</id>
    <content type="html"><![CDATA[<p>å¶ç„¶é—´å‘ç°äº†ä¸€ä¸ªAndroidè‡ªå¸¦çš„æŠ½å±‰æ§ä»¶<a href="https://developer.android.com/training/implementing-navigation/nav-drawer.html">DrawerLayout</a>,å°±è§‰å¾—åº”è¯¥å¯ä»¥ç”¨ä»–æ¥å°è£…æˆæ‰‹åŠ¿è¿”å›çš„åŸºç¡€æ§ä»¶ã€‚æ€è·¯å°±æ˜¯å…ˆè®¾ç½®Activityçš„è·³è½¬åŠ¨ç”»æ˜¯ä»å³åˆ°å·¦ï¼Œå¹¶ä¸”å‰ä¸€ä¸ªActivityä¸èƒ½åŠ¨ã€‚ç„¶åè®¾ç½®DrawerLayoutçš„menuä»å³è¾¹å‡ºæ¥ï¼Œç„¶è®¾ç½®menuå…¨å±ï¼Œè¿™ä¸ªmenuå°±ç›¸å½“äºå­Activity Viewçš„å®¹å™¨ï¼Œé»˜è®¤æ‰“å¼€menu,ç„¶åè®¾ç½®DrawerLayoutå®¹å™¨é€æ˜ï¼Œå½“DrawerLayout closeçš„æ—¶å€™finishå®ƒæ‰€åœ¨çš„Activityï¼è¿˜è¦æŠŠçŠ¶æ€æ è®¾ç½®æˆé€æ˜ï¼Œä¸ç„¶DrawerLayout closed å† finish Activityçš„æ—¶å€™ä¼šæœ‰è§†è§‰å·®ï¼å¤æ‚çš„æ‰‹åŠ¿æ§åˆ¶å°±äº¤ç”±è‡ªå¸¦çš„DrawerLayoutå¤„ç†å•¦ï¼Œç”Ÿå‘½å‘¨æœŸè¿˜æ˜¯Activityçš„ç”Ÿå‘½å‘¨æœŸã€‚æ€ä¹ˆæ ·ï¼Œæ˜¯ä¸æ˜¯æœºæ™ºå¦‚æˆ‘ï¼ï¼ğŸ˜†</p>

<p>é‡åˆ°çš„é—®é¢˜ï¼šDrawerLayoutçš„menuå³æ—¶è®¾ç½®æˆmatch_parentä¹Ÿä¸èƒ½å…¨å±ï¼å› ä¸ºæºç é‡Œè®¾ç½®äº†margin64dp! é‚£æˆ‘ä»¬åªå¥½å†è®¾ç½®å›æ¥ï¼šandroid:layout_marginLeft=&ldquo;-64dp"ã€‚</p>

<pre><code> private static final int MIN_DRAWER_MARGIN = 64; // dp
</code></pre>

<p>BaseSwipeActivity</p>

<pre><code>package com.suguiming.myandroid.base;
import android.os.Bundle;
import android.support.v4.view.GravityCompat;
import android.support.v4.widget.DrawerLayout;
import android.support.v7.app.ActionBarDrawerToggle;
import android.support.v7.app.AppCompatActivity;
import android.view.LayoutInflater;
import android.view.View;
import android.view.WindowManager;
import android.widget.LinearLayout;
import android.widget.RelativeLayout;

import com.suguiming.myandroid.R;

public class BaseSwipeActivity extends AppCompatActivity {

private DrawerLayout drawer;
private LinearLayout containerLayout;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_TRANSLUCENT_STATUS);
    setContentView(R.layout.activity_base_swipe);

    containerLayout = (LinearLayout) findViewById(R.id.container_layout);

    drawer = (DrawerLayout) findViewById(R.id.base_drawer_layout);
    drawer.openDrawer(GravityCompat.END);
    ActionBarDrawerToggle toggle = new ActionBarDrawerToggle(this, drawer, R.string.navigation_drawer_open, R.string.navigation_drawer_close) {
        @Override
        public void onDrawerClosed(View drawerView) {
            super.onDrawerClosed(drawerView);
            finish();
        }
    };
    drawer.setDrawerListener(toggle);
}

//å­ç±»ä¸è¦ç”¨setContentView,ç”¨setMainView!!!!
public void setMainView(int viewId) {
    LayoutInflater inflater = LayoutInflater.from(this);
    View tmpView = inflater.inflate(viewId, null);

    if (tmpView instanceof LinearLayout) {
        LinearLayout.LayoutParams linearLayoutParams = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.MATCH_PARENT);
        tmpView.setLayoutParams(linearLayoutParams);
    } else if (tmpView instanceof RelativeLayout) {
        RelativeLayout.LayoutParams relativeLayoutParams = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.MATCH_PARENT, RelativeLayout.LayoutParams.MATCH_PARENT);
        tmpView.setLayoutParams(relativeLayoutParams);
    }
    containerLayout.removeAllViews();
    containerLayout.addView(tmpView);
}

}
</code></pre>

<p>å¯¹åº”çš„å¸ƒå±€æ–‡ä»¶</p>

<pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:background="@android:color/transparent"
    tools:context="com.suguiming.myandroid.base.BaseSwipeActivity"&gt;

&lt;android.support.v4.widget.DrawerLayout
    android:id="@+id/base_drawer_layout"
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@android:color/transparent"
    tools:openDrawer="end"&gt;
    &lt;LinearLayout
        android:orientation="vertical"
        android:background="@color/clear"
        android:layout_width="match_parent"
        android:layout_height="match_parent"&gt;
    &lt;/LinearLayout&gt;

    &lt;!---64dpæ˜¯æºç menuçš„margin,è¿™é‡Œè®¾ç½®ä¸º65,ä¸ç„¶ä¼šæœ‰ä¸€æ¡é»‘çº¿--&gt;
    &lt;LinearLayout
        android:id="@+id/container_layout"
        android:orientation="vertical"
        android:layout_gravity="end"
        android:layout_marginLeft="-65dp"
        android:background="@color/light_gray"
        android:layout_width="match_parent"
        android:layout_height="match_parent"&gt;
    &lt;/LinearLayout&gt;
&lt;/android.support.v4.widget.DrawerLayout&gt;
&lt;/LinearLayout&gt;
</code></pre>

<p>push çš„åŠ¨ç”» style</p>

<pre><code>&lt;!--æ‰‹åŠ¿è¿”å›theme--&gt;
&lt;style name="BackSwipeTheme" parent="Theme.AppCompat.Light.NoActionBar"&gt;
    &lt;item name="android:windowIsTranslucent"&gt;true&lt;/item&gt;
    &lt;item name="android:windowBackground"&gt;@android:color/transparent&lt;/item&gt;
    &lt;item name="android:windowNoTitle"&gt;true&lt;/item&gt;
    &lt;item name="android:backgroundDimEnabled"&gt;false&lt;/item&gt;
    &lt;item name="android:windowAnimationStyle"&gt;@style/ActivitySwipeBackAnimation&lt;/item&gt;
&lt;/style&gt;
&lt;style name="ActivitySwipeBackAnimation" parent="@android:style/Animation.Activity"&gt;
    &lt;item name="android:activityOpenEnterAnimation"&gt;@anim/activity_swipe_in&lt;/item&gt;
    &lt;item name="android:activityOpenExitAnimation"&gt;@anim/activity_swipe_out&lt;/item&gt;
    &lt;item name="android:activityCloseEnterAnimation"&gt;@anim/activity_swipe_in&lt;/item&gt;
    &lt;item name="android:activityCloseExitAnimation"&gt;@anim/activity_swipe_out&lt;/item&gt;
&lt;/style&gt;
</code></pre>

<p>ä½¿ç”¨çš„è¯å°±æ˜¯è®©Activityç»§æ‰¿BaseSwipeActivityï¼Œç„¶åè®¾ç½®Activityçš„Themeä¸ºBackSwipeThemeã€‚</p>

<pre><code>public class ActivitySwipeBack extends BaseSwipeActivity {
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //è¦ç”¨setMainViewï¼Œä¸è¦ç”¨setContentView
    setMainView(R.layout.activity_activity_swipe_back);
  }
}

&lt;activity android:name=".tab0.ActivitySwipeBack"
            android:theme="@style/BackSwipeTheme"/&gt;
</code></pre>

<p>å®Œæ•´Demoè¯·æŸ¥çœ‹<a href="https://github.com/AndyFightting/MyAndroid">MyAndroid</a>ä¸­çš„"æ‰‹åŠ¿æ»‘åŠ¨è¿”å›"ã€‚</p>

<p><img src="/myimg/android/android_swipe.png" alt="imge" /></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[AndroidåŸºæœ¬å­˜å‚¨]]></title>
    <link href="http://andyfightting.github.io/blog/2015/11/23/androidsave/"/>
    <updated>2015-11-23T19:48:52+08:00</updated>
    <id>http://andyfightting.github.io/blog/2015/11/23/androidsave</id>
    <content type="html"><![CDATA[<p>Androidæ•°æ®ä¿å­˜æ–¹å¼æœ‰ï¼š æ–‡ä»¶å­˜å‚¨, SharedPreference, Sqlite, SDå¡å­˜å‚¨ã€‚</p>

<h3>* æ–‡ä»¶å­˜å‚¨</h3>

<p>ä¸å¯¹å­˜å‚¨æ•°æ®åšä»»ä½•æ ¼å¼åŒ–å¤„ç†ï¼ŒåŸå°ä¸åŠ¨çš„ä¿å­˜åˆ°æ–‡ä»¶ä¸­ã€‚ä½¿ç”¨äºä¿å­˜ç®€å•çš„æ–‡æœ¬æ•°æ®æˆ–è€…äºŒè¿›åˆ¶æ•°æ®ã€‚</p>

<p>Contextæœ‰ä¸ª<code>openFileOutput()</code>æ–¹æ³•æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªï¼šæ–‡ä»¶åï¼Œ<strong>ä¸è¦åŒ…å«è·¯å¾„</strong>ï¼Œç¬¬äºŒä¸ªï¼šæ“ä½œæ–¹å¼ï¼Œæœ‰ä¸¤ç§ï¼Œ<code>MODE_PRIVATE</code>(è¦†ç›–åŸæ–‡ä»¶å†…å®¹),<code>MODE_APPEND</code>(åœ¨åŸæ–‡ä»¶å°¾éƒ¨è¿½åŠ å†…å®¹)ï¼Œé»˜è®¤ç¬¬ä¸€ç§ã€‚æ–‡ä»¶é»˜è®¤ä¿å­˜åœ¨ï¼š<code>/data/data/packageName/files/</code>è¿™ä¸ªç›®å½•é‡Œã€‚</p>

<pre><code> public static void saveText(Context context,String fileName,String text){
    FileOutputStream outputStream ;
    BufferedWriter bufferedWriter = null;
    try {
       outputStream = context.openFileOutput(fileName,Context.MODE_PRIVATE);
        bufferedWriter = new BufferedWriter(new OutputStreamWriter(outputStream));
        bufferedWriter.write(text);
    }catch (IOException e){
        e.printStackTrace();
    }finally {
        try {
            if (bufferedWriter != null){
                bufferedWriter.close();
            }
        }catch (IOException e){
            e.printStackTrace();
        }
    }
}
</code></pre>

<!--more-->


<p>åœ¨æˆ‘è°ƒç”¨ <code>MyTool.saveText(this,"myFile","Hello World!");</code>åå‡ºç°äº†å¦‚ä¸‹æ–‡ä»¶ï¼Œç‚¹ç”»åœˆåœˆçš„åœ°æ–¹å¯ä»¥å¯¼å‡ºåˆ°ç”µè„‘ä¸Šæ‰“å¼€æŸ¥çœ‹ã€‚
<img src="/myimg/android/helloSave.png" alt="img" /></p>

<p>è¯»æ–‡ä»¶</p>

<pre><code>public static String getText(Context context,String fileName){
    FileInputStream inputStream;
    BufferedReader bufferReader = null;
    StringBuilder contentBuilder = new StringBuilder();
    try {
        inputStream = context.openFileInput(fileName);
        bufferReader = new BufferedReader(new InputStreamReader(inputStream));
        String lineText = "";
        while ((lineText = bufferReader.readLine()) != null){
            contentBuilder.append(lineText);
        }
    }catch (IOException e){
        e.printStackTrace();
    }finally {
       if (bufferReader != null){
           try {
               bufferReader.close();
           }catch (IOException e){
               e.printStackTrace();
           }
       }
    }
    return contentBuilder.toString();
}
</code></pre>

<p>åˆ é™¤æ–‡ä»¶</p>

<pre><code>public static void deleteFile(Context context, String fileName) {
    String filePath = context.getFilesDir()+"/"+fileName;
    File file = new File(filePath);
    if (file.exists()){
        file.delete();
    }
}
</code></pre>

<h3>* SharedPreference</h3>

<p>ç”¨key-valueé”®å€¼å¯¹çš„æ–¹å¼ä¿å­˜æ•°æ®ï¼Œé€‚ç”¨äºä¿å­˜åº”ç”¨é…ç½®ä¹‹ç±»çš„ç®€å•ä¿¡æ¯ã€‚æœ‰ä»¥ä¸‹ä¸‰ç§æ–¹å¼å¾—åˆ°<code>SharedPreferences</code>å¯¹è±¡ï¼Œå¾—åˆ°å®ä¾‹åè°ƒç”¨å®ä¾‹çš„<code>edit()</code>æ–¹æ³•å¾—åˆ°<code>SharedPreferences.Editor</code>å¯¹è±¡ï¼Œç”¨è¯¥<code>Editor</code>å¯¹è±¡<code>putBoolean("key",value)``putString("key",value)</code>ç­‰æ–¹æ³•æ·»åŠ æ•°æ®ï¼Œç„¶åè°ƒç”¨<code>apply()</code>å³å¯ã€‚è·å–æ•°æ®å°±è°ƒç”¨å¯¹åº”çš„<code>getBoolean("key")``getString("key")</code>ã€‚æ–‡ä»¶ä¿å­˜åœ¨<code>/data/data/packageName/shared_prefs/</code>ç›®å½•ä¸‹ã€‚</p>

<ol>
<li><p>Contextä¸­çš„<code>getSharedPreferences()</code>æ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ–‡ä»¶å(ä¸è¦åŒ…å«è·¯å¾„)ï¼Œä¸€ä¸ªæ“ä½œæ¨¡å¼ï¼Œæœ‰<code>MODE_PRIVATE</code>(è¦†ç›–åŸæ–‡ä»¶),<code>MODE_MULTI_PROCESS</code>(å¤šä¸ªè¿›ç¨‹å¯¹æ–‡ä»¶è¿›è¡Œè¯»å†™æƒ…å†µ)é»˜è®¤ç¬¬ä¸€ç§ã€‚</p></li>
<li><p>Activityä¸­ä¹Ÿæœ‰ä¸ªä¸€ä¸ªç±»ä¼¼çš„æ–¹æ³•<code>getSharedPreferences()</code>ï¼Œå®ƒåªæ¥æ”¶ä¸€ä¸ªæ“ä½œæ¨¡å¼ä½œä¸ºå‚æ•°ï¼Œ<strong>è‡ªåŠ¨å°†ç±»åä½œä¸ºæ–‡ä»¶å</strong>ã€‚</p></li>
<li><p>PreferenceManagerç±»ä¸­çš„<code>getDefaultSharedPreferences()</code>ï¼Œè¿™æ˜¯ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œæ¥æ”¶ä¸€ä¸ªå‚æ•°<code>Context</code>,è‡ªåŠ¨å°†åº”ç”¨ç¨‹åºçš„<code>packageName</code>ä¸ºå‰ç¼€çš„æ–‡ä»¶å,å¦‚æˆ‘çš„åŒ…åæ˜¯<code>com.suguiming.myandroid</code>,ç”Ÿæˆçš„æ–‡ä»¶åå°±æ˜¯<code>com.suguiming.myandroid_preferences.xml</code>ã€‚</p></li>
</ol>


<pre><code>    SharedPreferences sharedPreferences =   PreferenceManager.getDefaultSharedPreferences(context);
      SharedPreferences.Editor editor = sharedPreferences.edit();
        editor.putString("name","guimingsu");
        editor.putInt("age", 18);
        editor.apply();
</code></pre>

<p><img src="/myimg/android/shareP.png" alt="img" />
<img src="/myimg/android/shareV.png" alt="img" /></p>

<p>ä¸€èˆ¬éƒ½æŠŠå®ƒåšæˆä¸€ä¸ªå·¥å…·ç±»</p>

<pre><code>public class SharedPreUtil {

public static final String FILE_NAME = "shared_preference";

public static void put(Context context, String key, Object value) {
    SharedPreferences sharedPreferences = context.getSharedPreferences(FILE_NAME, Context.MODE_PRIVATE);
    SharedPreferences.Editor editor = sharedPreferences.edit();

    if (value instanceof String) {
        editor.putString(key, (String) value);
    } else if (value instanceof Integer) {
        editor.putInt(key, (Integer) value);
    } else if (value instanceof Boolean) {
        editor.putBoolean(key, (Boolean) value);
    } else if (value instanceof Float) {
        editor.putFloat(key, (Float) value);
    } else if (value instanceof Long) {
        editor.putLong(key, (Long) value);
    } else {
        editor.putString(key, value.toString());
    }
    editor.apply();
}

public static Object get(Context context, String key, Object defaultValue) {
    SharedPreferences sharedPreferences = context.getSharedPreferences(FILE_NAME, Context.MODE_PRIVATE);

    if (defaultValue instanceof String) {
        return sharedPreferences.getString(key, (String) defaultValue);
    } else if (defaultValue instanceof Integer) {
        return sharedPreferences.getInt(key, (Integer) defaultValue);
    } else if (defaultValue instanceof Boolean) {
        return sharedPreferences.getBoolean(key, (Boolean) defaultValue);
    } else if (defaultValue instanceof Float) {
        return sharedPreferences.getFloat(key, (Float) defaultValue);
    } else if (defaultValue instanceof Long) {
        return sharedPreferences.getLong(key, (Long) defaultValue);
    }
    return null;
}

public static void remove(Context context, String key) {
    SharedPreferences sharedPreferences = context.getSharedPreferences(FILE_NAME, Context.MODE_PRIVATE);
    SharedPreferences.Editor editor = sharedPreferences.edit();
    editor.remove(key);
    editor.apply();
}

public static void removeAll(Context context) {
    SharedPreferences sharedPreferences = context.getSharedPreferences(FILE_NAME, Context.MODE_PRIVATE);
    SharedPreferences.Editor editor = sharedPreferences.edit();
    editor.clear();
    editor.apply();
}

}
</code></pre>

<h3>* SQLite</h3>

<p>å…³ç³»å‹çš„è½»é‡çº§æ•°æ®åº“ï¼Œä¿å­˜å¤æ‚æˆ–è€…å¤§æ•°æ®ç”¨è¿™ä¸ªï¼Œæ”¯æŒæ ‡å‡†çš„SQLè¯­æ³•ã€‚</p>

<p>åˆ›å»ºæ•°æ®åº“ï¼šAndroidæä¾›äº†ä¸€ä¸ªæŠ½è±¡ç±»<code>SQLiteOpenHelper</code>ï¼Œæˆ‘ä»¬ç»§æ‰¿å®ƒé‡å†™é‡Œé¢çš„ä¸¤ä¸ªæ–¹æ³•<code>onCreate()</code>,<code>onUpdate()</code>æ¥åˆ›å»ºå’Œæ›´æ–°æ•°æ®åº“è¡¨ç»“æ„ã€‚åˆ›å»ºçš„æ•°æ®åº“ä¼šä¿å­˜åœ¨ <code>/data/data/packageName/databases/</code>ç›®å½•ä¸‹ã€‚é€šè¿‡<code>getReadableDatabase</code>æˆ–è€…<code>getWritableDatabase</code>éƒ½å¯å¾—åˆ°å¯è¯»å†™çš„æ•°æ®åº“ï¼Œä½†å¦‚æœæ•°æ®åº“ä¸å¯å†™æ—¶(å¦‚ç£ç›˜å·²æ»¡)ï¼Œ<code>getWritableDatabase</code>ä¼šæŠ¥é”™ï¼Œ<code>getReadableDatabase</code>ä¸ä¼šã€‚</p>

<p>è°ƒç”¨<code>MySqliteHelper.getHelper(mainActivity).getReadableDatabase();</code>ä¸€ä¸‹æ•°æ®åº“å°±å»ºå¥½äº†ï¼Œä¸‹æ¬¡å†è°ƒç”¨å°±ä¸ä¼šå†åˆ›å»ºäº†ã€‚</p>

<pre><code>public class MyDatabaseHelper extends SQLiteOpenHelper {

private static MyDatabaseHelper helper;
private static final String DB_NAME = "myAndroid.db";

public MyDatabaseHelper(Context context){
    super(context, DB_NAME, null, 2);//2 æ•°æ®åº“version,ä¿®æ”¹æ•°æ®åº“ç”¨
}

@Override
public void onCreate(SQLiteDatabase db) {
    db.execSQL(create_dog);
    db.execSQL(create_cat);
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    //æ›´æ–°è¡¨æ‰ç”¨,è¿™é‡Œå‡è®¾åœ¨ ç‰ˆæœ¬2 ä¸­è¦æ·»åŠ  cat è¡¨,æ³¨æ„ï¼šswitch ä¸è¦ break !!
    switch (newVersion){
        case 2:
            db.execSQL(create_cat);
        default:
    }
}
//è·å– helper å•ä¾‹
public static synchronized MyDatabaseHelper getHelper(Context context) {
    context = context.getApplicationContext();
    if (helper == null) {
        synchronized (MyDatabaseHelper.class) {
            if (helper == null)
                helper = new MyDatabaseHelper(context);
        }
    }
    return helper;
}

//-------------sql----------------------------
    public static final String create_dog = "create table dog ("
            +"id integer primary key autoincrement,"
            +"name text,"
            +"age integer,"
            +"weight real)";

    public static final String create_cat = "create table cat ("
            +"id integer primary key autoincrement,"
            +"name text,"
            +"age integer,"
            +"weight real)";
}
</code></pre>

<p><img src="/myimg/android/mydb.png" alt="img" />  <br/>
æŠŠæ•°æ®åº“å¯¼å‡ºåˆ°æ¡Œé¢ï¼Œç”¨<a href="http://www.sqlitemanager.org/">SQLiteManager</a>æ‰“å¼€æŸ¥çœ‹
<img src="/myimg/android/mytable.png" alt="img" /></p>

<p>æ•°æ®å¢ï¼Œåˆ ï¼Œæ”¹ï¼ŒæŸ¥çš„æœ€ç®€å•çš„ä¾‹å­</p>

<pre><code>public class DogDao {
private static final String TABLE_NAME = "dog";

public static void add(Context context,Dog dog){
    SQLiteDatabase db =  MyDatabaseHelper.getHelper(context).getWritableDatabase();
    ContentValues values = new ContentValues();
    values.put("name",dog.getName());
    values.put("age",dog.getAge());
    values.put("weight",dog.getWeight());
    db.insert(TABLE_NAME, null, values);
}

public static void update(Context context,Dog dog){
    SQLiteDatabase db =  MyDatabaseHelper.getHelper(context).getWritableDatabase();
    ContentValues values = new ContentValues();
    values.put("name",dog.getName());
    values.put("age",dog.getAge());
    values.put("weight",dog.getWeight());
    db.update(TABLE_NAME, values, null, null);
}

public static void deleteAll(Context context){
    SQLiteDatabase db =  MyDatabaseHelper.getHelper(context).getWritableDatabase();
    db.delete(TABLE_NAME, null, null);
}

public static List&lt;Dog&gt; getAll(Context context){
    SQLiteDatabase db =  MyDatabaseHelper.getHelper(context).getWritableDatabase();
    Cursor cursor = db.query(TABLE_NAME, null, null, null, null, null, null);
    List&lt;Dog&gt; dogList = new ArrayList&lt;&gt;();
    if (cursor.moveToFirst()){
        do {
            Dog dog = new Dog();
            dog.setName(cursor.getString(cursor.getColumnIndex("name")));
            dog.setAge(cursor.getInt(cursor.getColumnIndex("age")));
            dog.setWeight(cursor.getFloat(cursor.getColumnIndex("weight")));
            dogList.add(dog);
        }while (cursor.moveToNext());
    }
    cursor.close();
    return dogList;
}

//äº‹åŠ¡ï¼Œè¦ä¹ˆéƒ½æˆåŠŸï¼Œè¦ä¹ˆéƒ½å¤±è´¥ã€‚
public static void transactionTest(Context context){
    SQLiteDatabase db =  MyDatabaseHelper.getHelper(context).getWritableDatabase();
    db.beginTransaction();
    try {
        //æ•°æ®å¤„ç†....

        db.setTransactionSuccessful();
    }catch (Exception e){
        e.printStackTrace();
    }finally {
        db.endTransaction();
    }
}
}
</code></pre>

<p>ä¹Ÿå¯ä»¥ç”¨ Android SDK <code>/platform-tools</code>æ–‡ä»¶å¤¹ä¸­è‡ªå¸¦çš„<code>adb</code>å·¥å…·æ¥æ“ä½œé“¾æ¥åœ¨ç”µè„‘çš„æ‰‹æœºæˆ–è€…æ¨¡æ‹Ÿå™¨é‡Œçš„æ•°æ®åº“ã€‚</p>

<p>ä½†è¦å…ˆé…ç½®ä¸€ä¸‹ï¼ŒMacçš„é…ç½®å¦‚ä¸‹ï¼Œåœ¨ç»ˆç«¯ä¾æ¬¡è¾“å…¥ <code>cd ~</code> <code>touch .bash_profile</code> <code>open -e .bash_profile</code>è¿™æ—¶ä¼šæ‰“å¼€ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œåœ¨é‡Œé¢æ·»åŠ <code>export PATH=${PATH}:è¿™é‡Œæ˜¯platform-toolsæ–‡ä»¶çš„è·¯å¾„</code>ä¿å­˜å…³é—­ï¼Œ
ç„¶å<code>source .bash-profile</code>åˆ·æ–°ï¼Œç„¶åè¾“å…¥<code>adb shell</code>å°±å¯ä»¥å¼€å§‹ç”¨äº†ã€‚
<img src="/myimg/android/pzadb.png" alt="img" />
<img src="/myimg/android/pzadb2.png" alt="img" />
å¦‚æŸ¥çœ‹æ•°æ®åº“<code>cd /data/data/packageName/databases</code> <code>l</code>åˆ—å‡ºæ‰€æœ‰æ•°æ®åº“
<img src="/myimg/android/adbtable.png" alt="img" /></p>

<h3>* SDå¡å­˜å‚¨</h3>

<p>SDå¡å­˜å‚¨å’Œæ–‡ä»¶å­˜å‚¨å·®ä¸å¤šï¼Œåªä¸è¿‡æ˜¯æ‰‹æœºå¤–éƒ¨çš„å­˜å‚¨ç©ºé—´ï¼Œå®¹é‡æ›´å¤§ï¼Œä¸è¿‡åœ¨ä½¿ç”¨çš„æ—¶å€™è¦åˆ¤æ–­SDå¡å¯ä¸å¯ä»¥ç”¨ã€‚</p>

<pre><code>public class SDCardUtil {

// é»˜è®¤éƒ½ä¿å­˜åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹
private static final String DEFAULT_DIR = "ProData/";

public static boolean isEnable() {
    return Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED);
}

public static long getTotalMB() {
    if (!isEnable())
        return 0;
    File path = Environment.getExternalStorageDirectory();
    StatFs stat = new StatFs(path.getPath());
    long blockSize = stat.getBlockSizeLong();
    long availableBlocks = stat.getBlockCountLong();
    return (availableBlocks * blockSize) / 1024 / 1024;
}

public static long getAvailableMB() {
    if (!isEnable())
        return 0;
    File path = Environment.getExternalStorageDirectory();
    StatFs stat = new StatFs(path.getPath());
    long blockSize = stat.getBlockSizeLong();
    long availableBlocks = stat.getAvailableBlocksLong();
    return (availableBlocks * blockSize) / 1024 / 1024;
}

public static long getAvailableByte() {
    if (!isEnable())
        return 0;
    File path = Environment.getExternalStorageDirectory();
    StatFs stat = new StatFs(path.getPath());
    long blockSize = stat.getBlockSizeLong();
    long availableBlocks = stat.getAvailableBlocksLong();
    return availableBlocks * blockSize;
}

// è·¯å¾„ï¼š/storage/sdcard0/
public static String getSDCardPath() {
    if (!isEnable())
        return "";
    return Environment.getExternalStorageDirectory().getAbsolutePath() + File.separator;
}


public static File createDir(String directoryName) {
    //å»ºé»˜è®¤æ–‡ä»¶å¤¹
    String defaultDir = getSDCardPath() + DEFAULT_DIR;
    File defaultFile = new File(defaultDir);
    if (!defaultFile.exists()) {
        defaultFile.mkdir();
    }

    String dirPath = getFilePath(directoryName);
    File dirFile = new File(dirPath);
    if (!dirFile.exists()) {
        dirFile.mkdir();
    }
    return dirFile;
}

public static File createFile(String fileName) {
    try {
        //å»ºé»˜è®¤æ–‡ä»¶å¤¹
        String dirPath = getSDCardPath() + DEFAULT_DIR;
        File directory = new File(dirPath);
        if (!directory.exists()) {
            directory.mkdir();
        }

        //å†åœ¨é»˜è®¤æ–‡ä»¶å¤¹é‡Œå»ºæ–‡ä»¶
        File file = new File(getFilePath(fileName));
        if (!file.exists()) {
            file.createNewFile();
        }
        return file;
    } catch (Exception e) {
        e.printStackTrace();
    }
    return null;
}

public static String getFilePath(String fileName) {
    return getSDCardPath() + DEFAULT_DIR + fileName;
}

public static boolean isFileExist(String fileName) {
    File file = new File(getFilePath(fileName));
    return file.exists();
}

public static boolean saveByte(String fileName, byte[] bytes) {
    if (bytes == null) {
        return false;
    }

    OutputStream output = null;
    try {
        if (bytes.length &lt; getAvailableByte()) {
            File file = createFile(fileName);//è¿™é‡Œé¢å·²ç»å»ºäº†é»˜è®¤æ–‡ä»¶å¤¹
            output = new BufferedOutputStream(new FileOutputStream(file));
            output.write(bytes);
            output.flush();
            return true;
        }
    } catch (IOException e1) {
        e1.printStackTrace();
    } finally {
        try {
            if (output != null) {
                output.close();
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
    return false;
}

public static byte[] getByte(String fileName) {
    File file = new File(getFilePath(fileName));
    if (!file.exists()) {
        return null;
    }
    InputStream inputStream = null;
    try {
        inputStream = new BufferedInputStream(new FileInputStream(file));
        byte[] data = new byte[inputStream.available()];
        inputStream.read(data);
        return data;
    } catch (Exception e) {
        e.printStackTrace();
    } finally {
        try {
            if (inputStream != null) {
                inputStream.close();
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    return null;
}

public static boolean saveBitmap(Bitmap bitmap, String bitmapName) {
    if (bitmap == null) {
        return false;
    }
    //å»ºé»˜è®¤æ–‡ä»¶å¤¹
    String dirPath = getSDCardPath() + DEFAULT_DIR;
    File directory = new File(dirPath);
    if (!directory.exists()) {
        directory.mkdir();
    }

    File file = new File(getFilePath(bitmapName));
    BufferedOutputStream output = null;
    try {
        output = new BufferedOutputStream(new FileOutputStream(file));
        bitmap.compress(Bitmap.CompressFormat.JPEG, 80, output);
        output.flush();
        output.close();
        return true;
    } catch (IOException e1) {
        e1.printStackTrace();
    } finally {
        try {
            if (output != null) {
                output.close();
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
    return false;
}

public static Bitmap getBitmap(String bitmapName) {
    String myJpgPath = getFilePath(bitmapName);
    BitmapFactory.Options options = new BitmapFactory.Options();
    return BitmapFactory.decodeFile(myJpgPath, options);
}

public static void removeFile(String fileName) {
    String filePath = getFilePath(fileName);
    File file = new File(filePath);
    if (file.exists()) {
        file.delete();
    }
}

public static void removeFile(File file) {
    if (file.isFile()) {
        file.delete();
        return;
    }
    if (file.isDirectory()) {
        File[] childFiles = file.listFiles();
        if (childFiles == null || childFiles.length == 0) {
            file.delete();
            return;
        }

        for (int i = 0; i &lt; childFiles.length; i++) {
            removeFile(childFiles[i]);
        }
        file.delete();
    }
}

public static void removeAll() {
    String filePath = getSDCardPath() + DEFAULT_DIR;
    File file = new File(filePath);
    if (file.exists()) {
        removeFile(file);
    }

    //å†å»ºä¸€ä¸ªç©ºæ–‡ä»¶å¤¹
    File directory = new File(filePath);
    if (!directory.exists()) {
        directory.mkdir();
    }
  }
}
</code></pre>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Android Studioæ’ä»¶]]></title>
    <link href="http://andyfightting.github.io/blog/2015/11/22/studioplugin/"/>
    <updated>2015-11-22T14:10:45+08:00</updated>
    <id>http://andyfightting.github.io/blog/2015/11/22/studioplugin</id>
    <content type="html"><![CDATA[<h3>* Logger</h3>

<p>æ¨èä¸€æ¬¾æ‰“å°å·¥å…·<a href="https://github.com/orhanobut/logger">Logger</a>,æ¯”è‡ªå¸¦çš„æ‰“å°æ•ˆæœæ›´å¥½ï¼Œä¸»è¦æ˜¯jsonæ‰“å°æ˜¯æ ¼å¼åŒ–çš„ï¼Githubä¸Šå†™çš„åœ°å€<code>compile 'com.github.orhanobut:logger:1.12'</code>æˆ‘ä¸‹è½½å¤±è´¥ï¼Œæˆ‘ç”¨çš„æ˜¯<code>compile 'com.orhanobut:logger:1.11'</code>ã€‚
<img src="/myimg/android/logger.png" alt="img" />
æ‰“å°é¢œè‰²å¯ä»¥åœ¨preferenceé‡Œè®¾ç½®ï¼Œè¦å…ˆ<code>Save as</code>ä¿å­˜ä¸€ä¸‹ï¼Œç„¶åæŠŠå³è¾¹çš„<code>Use inherited attributes</code>å–æ¶ˆï¼Œç„¶åå°±å¯ä»¥é€‰æ‹©é¢œè‰²äº†<!--more-->
<img src="/myimg/android/logColor.png" alt="img" /></p>

<h3>* Sexy Editor</h3>

<p>è®¾ç½®ç¼–è¾‘åŒºåŸŸèƒŒæ™¯å›¾çš„, è¿™æ ·æ•²ä»£ç ä¹Ÿæ›´æœ‰åŠ›æ°”æ‹‰~~å“ˆå“ˆ</p>

<p><img src="/myimg/android/screen.png" alt="img" /></p>

<p>æ€ä¹ˆæ·»åŠ æ’ä»¶ï¼Ÿæœ‰å¦‚ä¸‹ä¸‰ç§æ–¹å¼<code>install JetBrains plugin</code>,<code>Browse repositories</code>,<code>install plugin from disk</code>ã€‚<code>Sexy Editor</code>æ˜¯ç”¨ç¬¬äºŒç§æ–¹å¼æ·»åŠ ã€‚</p>

<p><img src="/myimg/android/add_plugin.png" alt="img" /></p>

<p>æˆ‘çš„<code>sexy editor</code>è®¾ç½®</p>

<p><img src="/myimg/android/sexy_editor.png" alt="img" /></p>

<h3>* Macä¸‹çš„å¿«æ·é”®</h3>

<p>Macä¸­çš„æ ‡è¯†ï¼š<code>âŒ˜:command</code>, <code>âŒƒ:control</code>, <code>â‡§:shift</code>, <code>âŒ¥:alt/option</code></p>

<p><code>âŒ˜ + âŒ¥ + L</code>: ä»£ç å¯¹é½æ ¼å¼åŒ–</p>

<p><code>^ + âŒ¥ + O</code>: é™¤å»æ— æ•ˆçš„importå¼•ç”¨</p>

<p><code>F1</code>: æŸ¥çœ‹æ–‡æ¡£</p>

<p><code>F2</code>: å®šä½åˆ°æœªè¢«ä½¿ç”¨çš„æˆå‘˜</p>

<p><code>F3</code>: æ·»åŠ ä¹¦ç­¾</p>

<p><code>F4</code>: å®šä½åˆ°å£°æ˜å¤„</p>

<p><code>â‡§ + F6</code>: æ–‡ä»¶é‡å‘½å</p>

<p><code>âŒ˜ + F12</code>: æ˜¾ç¤ºå†…éƒ¨æˆå‘˜</p>

<p><code>âŒ˜ + â‡§ + F7</code>: ä»£ç é«˜äº®</p>

<p><code>âŒ¥ + â</code>: æ·»åŠ ç¼ºå°‘çš„import</p>

<p><code>âŒ˜ + delete</code>: åˆ é™¤æ•´è¡Œ</p>

<p><code>âŒ˜ + N</code>: ç”Ÿæˆä»£ç ï¼Œgetter setter ç­‰</p>

<p><code>âŒƒ + H</code>: æŸ¥çœ‹ç±»çš„å±‚çº§å…³ç³»</p>

<p><code>âŒ˜ + U</code>: æŸ¥çœ‹çˆ¶ç±»çš„åŒåæ–¹æ³•</p>

<p><code>âŒ˜ + J</code>: å¿«æ·æ’å…¥å¸¸ç”¨ä»£ç ç‰‡æ®µ</p>

<p><code>âŒ¥ + â‡§ + â†‘æˆ–â†“</code>: ä¸Šä¸‹ç§»åŠ¨å…‰æ ‡æ‰€åœ¨çš„è¡Œ</p>

<p><code>âŒ˜ + â‡§ + â†‘æˆ–â†“</code>: ä¸Šä¸‹ç§»åŠ¨æ•´ä¸ªæ–¹æ³•å—</p>

<p><code>âŒ˜ + âŒ¥ + â</code>: å½“å‰è¡Œä¸Šé¢æ’å…¥ä¸€è¡Œ</p>

<p><code>âŒ˜ + â‡§ + U</code>: å¤§å°å†™è½¬åŒ–</p>

<p><code>âŒ˜ + E</code>: æŸ¥çœ‹æ‰“å¼€è¿‡çš„æ–‡ä»¶</p>

<p><code>âŒƒ + T</code>: é‡æ„é¢æ¿</p>

<p><code>âŒƒ + O</code>: é€‰æ‹©è¦é‡å†™æˆ–è€…è¦å®ç°çš„æ–¹æ³•</p>

<p><code>âŒ˜ + O</code>: å¿«é€Ÿæœç´¢class</p>

<p><code>âŒ˜ + â‡§ + O</code>: å¿«é€Ÿæœç´¢file</p>

<p><code>âŒ˜ + â‡§ + F</code>: å…¨å±€æœç´¢</p>

<p><code>âŒ˜ + â‡§ + R</code>: å…¨å±€æ›¿æ¢</p>

<p><code>âŒ˜ + +æˆ–-</code>: å±•å¼€æˆ–è€…æ”¶èµ·ä»£ç å—</p>

<p><code>âŒ˜ + /</code>: æ³¨é‡Š //</p>

<p><code>âŒ˜ + âŒ¥ + /</code>: æ³¨é‡Š /**/</p>

<p><code>âŒ¥ + â</code>: æç¤ºé”™è¯¯è§£å†³æ–¹æ³•</p>

<p>å¯èƒ½ä¼šæœ‰äººè§‰å¾—ä¸ºå•¥é‡å‘½å<code>â‡§ + F6</code>æ²¡ååº”å‘¢ï¼Ÿè·Ÿ F1 ~ F12 æœ‰å…³çš„éƒ½æ²¡ååº”&hellip;</p>

<p>å› ä¸ºMacç³»ç»Ÿé»˜è®¤æ²¡æœ‰å¯ç”¨å®ƒä»¬&hellip;åœ¨ç³»ç»Ÿè®¾ç½®ï¼Œé”®ç›˜é€‰é¡¹é‡Œé€‰ä¸­å°±å¯ä»¥äº†ã€‚</p>

<p><img src="/myimg/android/keyf.png" alt="img" /></p>

<p>å½“ç„¶å¯ä»¥è®¾ç½®è‡ªå·±å–œæ¬¢çš„å¿«æ·é”®ï¼Œæˆ‘è‡ªå·±æŠŠè¿è¡Œå’Œè°ƒè¯•æ”¹æˆäº†<code>âŒ˜ + R</code>å’Œ<code>âŒ˜ + D</code></p>

<p><img src="/myimg/android/keymap.png" alt="img" /></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Android åŸºç¡€çŸ¥è¯†]]></title>
    <link href="http://andyfightting.github.io/blog/2015/11/21/androidBase0/"/>
    <updated>2015-11-21T09:26:15+08:00</updated>
    <id>http://andyfightting.github.io/blog/2015/11/21/androidBase0</id>
    <content type="html"><![CDATA[<h3>* Activityå¯åŠ¨æ¨¡å¼</h3>

<p>åœ¨AndroidMainfest.xmlé‡Œçš„activityé‡Œè®¾ç½®android:launchMode = â€œxxxâ€</p>

<p><strong>standard:</strong> é»˜è®¤æ¨¡å¼ï¼Œæ¯æ¬¡éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æ”¾åœ¨æ ˆé¡¶ï¼Œå³ä½¿æ ˆé‡Œå·²ç»æœ‰äº†</p>

<p><strong>singleTop:</strong> å·²ç»åœ¨<strong>æ ˆé¡¶</strong>äº†å°±ä¸åˆ›å»ºï¼Œå¦åˆ™è¿˜æ˜¯ä¼šåˆ›å»ºï¼Œå³ä½¿æ ˆé‡Œå·²ç»æœ‰äº†</p>

<p><strong>singleTask:</strong> åœ¨æ´»åŠ¨æ ˆä¸­æœ‰äº†å°±ä¸åˆ›å»ºï¼Œç›´æ¥æ¨åˆ°æ ˆé¡¶ï¼Œ<strong>åœ¨å®ƒä¹‹å‰çš„å…¨éƒ¨ä¼šè¢«æŒ¤å‡ºæ ˆ</strong>ï¼Œè‹¥æ´»åŠ¨æ ˆä¸­æ²¡æœ‰å°±åˆ›å»º</p>

<p><strong>singleInstance:</strong> ä¼šåˆ›å»ºä¸€ä¸ª<strong>æ–°çš„æ´»åŠ¨æ ˆ</strong>æŠŠè‡ªå·±æ”¾è¿›å»</p>

<h3>* éšæ—¶éšåœ°é€€å‡ºç¨‹åº</h3>

<p>åœ¨ä»»ä½•é¡µé¢éƒ½å¯ä»¥è¢«è¸¢ä¸‹çº¿çš„å®ç°æŠ€å·§</p>

<p>åˆ›å»ºä¸€ä¸ªæ”¶é›†Activityçš„ç®¡ç†ç±»ï¼Œåœ¨BaseActivityçš„<code>onCreate()</code>æ–¹æ³•ä¸­æ·»åŠ <code>ActivityManager.addActivity(this)</code>,åœ¨<code>onDestroy</code>æ–¹æ³•ä¸­æ·»åŠ <code>ActivityManager.removeActivity(this)</code>ã€‚ç„¶ååœ¨ä»»ä½•è¦å¼ºé€€çš„åœ°æ–¹è°ƒç”¨<code>ActivityManager.finishAllActivity()</code>ã€‚<!--more--></p>

<pre><code>public class ActivityManager {

public static List&lt;Activity&gt; activityList = new ArrayList&lt;&gt;();

public static void addActivity(Activity activity){
    activityList.add(activity);
  }

public static void removeActivity(Activity activity){
    activityList.remove(activity);
  }

public static void finishAllActivity(){
    for (Activity activity : activityList){
        if (!activity.isFinishing()){
            activity.finish();
        }
    }
    activityList.clear();
  }
}
</code></pre>

<h3>* Activityè·³è½¬</h3>

<p>ä¸€èˆ¬æˆ‘ä»¬æ˜¯ç”¨å¦‚ä¸‹çš„æ–¹å¼è·³è½¬ï¼Œéœ€è¦çŸ¥é“ä¸‹ä¸€ä¸ªActivityè¦ç”¨å“ªäº›å‚æ•°ï¼Œå¤šäººå¼€å‘å¯èƒ½æœ‰äº›ä¸ä¾¿ã€‚</p>

<pre><code>Intent intent = new Intent(OneActivity.thi,TwoActivity.class);
intent.putExtra("key","value");
startActivity(intent);
</code></pre>

<p>å¯ä»¥åœ¨ä¸‹ä¸€ä¸ªActivityä¸­æŠŠéœ€è¦çš„å‚æ•°æš´éœ²å‡ºæ¥ã€‚</p>

<pre><code>public static void actionStart(Activity activity,String param){
  Intent intent = new Intent(activity,TwoActivity.class);
  intent.putExtra("key","param");
  activity.startActivity(intent);
  activity.finish();
}
</code></pre>

<h3>* ListViewçš„æ­£ç¡®ä½¿ç”¨æ–¹å¼</h3>

<p>å®ç°äº†itemçš„å¤ç”¨ï¼Œè¿™æ ·æ•ˆç‡æœ€å¥½ï¼ŒArrayAdapteræºç ä¸­å°±æ˜¯è¿™æ ·å¼„çš„ã€‚ArrayAdapteræŠŠBaseAdapteråŒ…è£…äº†ä¸€éï¼Œå®ç°äº†<code>getCount</code>,<code>getItem</code>,<code>getItemId</code>ï¼Œæ‰€ä»¥è¿™äº›æˆ‘ä»¬å°±å¯ä»¥ä¸ç”¨å†å†™äº†ï¼Œåªé‡å†™ä¸ª<code>getView</code>å°±å¯ä»¥ã€‚</p>

<pre><code>public class UserAdapter extends ArrayAdapter&lt;User&gt; {

private int layoutId;
public UserAdapter(Context context, int resourceId, List&lt;User&gt; objects){
      super(context,resourceId,objects);
      layoutId = resourceId;
}

@Override
public View getView(int position, View convertView, ViewGroup parent){

    User user = getItem(position);
    ViewHolder viewHolder;
    View layoutView;

    if (convertView == null){
        layoutView = LayoutInflater.from(getContext()).inflate(layoutId,null);
        viewHolder = new ViewHolder();
        viewHolder.headImage = (ImageView)layoutView.findViewById(R.id.head_img);
        viewHolder.nameTv = (TextView)layoutView.findViewById(R.id.name_tv);
        layoutView.setTag(viewHolder);
    }else {
       layoutView = convertView;
       viewHolder = (ViewHolder)layoutView.getTag();
    }
    //--------åœ¨ä¸‹é¢èµ‹å€¼ ----------------
    viewHolder.headImage.setImageResource(user.getHeadImgId());
    viewHolder.nameTv.setText(user.getName());

    return layoutView;
}

class ViewHolder{
    ImageView headImage;
    TextView nameTv;
  }
}
</code></pre>

<h3>* px,dpi,dp,density</h3>

<p>Androidè§„å®šï¼šå¦‚æœæ‰‹æœºä¸€è‹±å¯¸é•¿åº¦ä¸Šæœ‰160ä¸ªpxï¼Œé‚£ä¹ˆæ‰‹æœºçš„dpiå°±æ˜¯160,æ­¤æ—¶1dp==1pxï¼Œå³density=1ã€‚æ‰€ä»¥å¦‚æœä¸€è‹±å¯¸é•¿åº¦ä¸Šæœ‰320ä¸ªpxçš„è¯ï¼Œé‚£ä¹ˆæ‰‹æœºçš„dpiå°±æ˜¯320ï¼Œæ­¤æ—¶1dp==2px,å³density=2ã€‚</p>

<p>ç»“è®ºï¼šå³ç›¸åŒå¤§å°çš„æ‰‹æœºä¸Šçš„dpä¸ªæ•°æ˜¯ä¸å˜çš„ï¼Œå¦‚æœç›¸åŒå¤§å°çš„æ‰‹æœºåƒç´ ä¸åŒçš„è¯ï¼Œåªä¼šå½±å“dipå’Œdensityçš„å€¼,æ‰€ä»¥æˆ‘ä»¬é€‚é…æ‰‹æœºçš„æ—¶å€™ç”¨çš„é•¿åº¦å•ä½è¦ç”¨ &mdash;- <code>dp</code></p>

<pre><code>public static int getScreenWidthPx(Context context){
    return  context.getResources().getDisplayMetrics().widthPixels;
}

public static int getScreenHeightPx(Context context){
    return  context.getResources().getDisplayMetrics().heightPixels;
}

public static float getXdpi(Context context){
    return  context.getResources().getDisplayMetrics().xdpi;
}

public static float getYdpi(Context context){
    return  context.getResources().getDisplayMetrics().ydpi;
}

public static float getDensity(Context context){
   return context.getResources().getDisplayMetrics().density;
}
</code></pre>

<h3>* 9-patchå›¾ç‰‡</h3>

<p>1ï¼Œåœ¨<code>ä¸Š</code>è¾¹ç»˜åˆ¶çš„<code>å‚ç›´åŒºåŸŸ</code>ä¼šè¢«<code>æ°´å¹³æ‹‰ä¼¸</code>ï¼Œåœ¨<code>å·¦</code>è¾¹ç»˜åˆ¶çš„<code>æ¨ªå‘åŒºåŸŸ</code>ä¼šè¢«<code>å‚ç›´æ‹‰ä¼¸</code>ã€‚</p>

<p>2ï¼Œåœ¨<code>ä¸‹</code>è¾¹å’Œ<code>å³</code>è¾¹ç»˜åˆ¶çš„<code>äº¤å‰åŒºåŸŸ</code>æ˜¯å†…å®¹æ”¾ç½®çš„åŒºåŸŸã€‚</p>

<p><img src="/myimg/android/9patch.jpg" alt="img" /></p>

<h3>* Fragment</h3>

<p>åœ¨fragmenté‡Œå¯ä»¥ç”¨<code>getActivity()</code>å¾—åˆ°ä¸ä¹‹å…³è”çš„Activityã€‚<code>FragmentTransaction</code>çš„å®ä¾‹å¯ä»¥è°ƒç”¨<code>addToBackStack(null)</code>æ–¹æ³•æŠŠè¿™ä¸ªäº‹åŠ¡æ·»åŠ åˆ°è¿”å›æ ˆä¸­ï¼Œè¿™æ ·ç‚¹å‡»è¿”å›å°±æ˜¯å›åˆ°äº‹åŠ¡å¤„ç†ä¹‹å‰çš„çŠ¶æ€,è€Œä¸æ˜¯é€€å‡ºActivityã€‚fragmentä¹‹é—´çš„é€šä¿¡å¯ä»¥é€šè¿‡ä¸ä¹‹å…±åŒå…³è”çš„Activityæ¥è½¬è¾¾ã€‚</p>

<p>fragmentçš„ç”Ÿå‘½å‘¨æœŸä¸Activityç±»ä¼¼ï¼Œåªä¸è¿‡æ¯”Activityå¤šäº†<code>onAttach()</code>,<code>onCreateView()</code>,<code>onActivityCreated()</code>,<code>onDestroyView()</code>,<code>onDetach()</code>ã€‚</p>

<p>ç”±ç”Ÿåˆ°æ­»ä¾æ¬¡æ˜¯ï¼š<code>onAttach()</code>, <code>onCreate()</code>,<code>onCreateView()</code>,<code>onActivityCreated()</code>,<code>onStart()</code>,<code>onResume()</code>,<code>onPause()</code>,<code>onStop()</code>,<code>onDestroyView()</code>,<code>onDestroy()</code>,<code>onDetach()</code>ã€‚</p>

<p>ä»è¿”å›æ ˆå›æ¥åæ‰§è¡Œçš„ç¬¬ä¸€ä¸ªæ–¹æ³•æ˜¯<code>onActivityCreated()</code>,è€ŒActivityçš„è½®å›åæ‰§è¡Œçš„ç¬¬ä¸€ä¸ªæ–¹æ³•æ˜¯<code>onRestart()</code>,ç„¶åå†<code>onStart()</code>,<code>onResume()</code>ã€‚</p>

<p>åŒä¸€ä¸ªActivityæ€æ ·è®©å®ƒåœ¨ä¸åŒå¤§å°çš„è®¾å¤‡è‡ªåŠ¨åŠ è½½ä¸åŒçš„å¸ƒå±€æ–‡ä»¶å‘¢ï¼Ÿç”¨<code>é™å®šç¬¦</code>,å³åœ¨<code>res</code>ä¸‹å»º<code>layout-large</code>æ–‡ä»¶å¤¹æˆ–è€…ä¸åŒé™å®šç¬¦çš„æ–‡ä»¶å¤¹ï¼Œåœ¨é‡Œé¢æ”¾<code>åŒå</code>çš„å¸ƒå±€æ–‡ä»¶ã€‚é™å®šç¬¦æœ‰ï¼š<code>small</code>,<code>normal</code>,<code>large</code>,<code>xlarge</code>ä»¥åŠåˆ†è¾¨ç‡é™å®šç¬¦ï¼š<code>ldpi</code>:120dpiä»¥ä¸‹ï¼Œ<code>mdpi</code>:120-160dpiï¼Œ<code>hdpi</code>:160-240dpi,<code>xhdpi</code>:240-320dpiï¼Œä»¥åŠæ–¹å‘é™å®šç¬¦ï¼š<code>land</code>:æ¨ªå±,<code>port</code>:ç«–å±ã€‚</p>

<p>è¿˜æœ‰ä¸ªé—®é¢˜ï¼Œ<code>large</code>ï¼Œå¤§ï¼Œåˆ°åº•å¤šå¤§ç®—å¤§å‘¢ï¼Ÿå¯ä»¥è‡ªå·±å®šä¹‰è¿™ä¸ªè¾¹ç•Œå€¼ã€‚å¦‚<code>layout-sm600</code>,å°±æ˜¯<code>å®½åº¦</code>å¤§äº600<code>dp</code>çš„è®¾å¤‡å«å¤§ï¼Œå¦åˆ™å«å°ã€‚<code>sm</code>çš„æ„æ€æ˜¯ï¼š<code>smallest width</code>ã€‚</p>

<h3>* Broadcast å¹¿æ’­</h3>

<p>è§åçŸ¥æ„ï¼Œå³å‘ä¸€ä¸‹æ¶ˆæ¯ï¼Œå¾ˆå¤šåœ°æ–¹éƒ½å¯ä»¥æ”¶åˆ°ã€‚å¹¿æ’­æœ‰ä¸¤ç§ï¼šå¼‚æ­¥æ‰§è¡Œçš„å¹¿æ’­ å’Œ æŒ‰é¡ºåºæ‰§è¡Œçš„åŒæ­¥å¹¿æ’­ã€‚å¼‚æ­¥å¹¿æ’­æ¥æ”¶æ²¡æœ‰å…ˆåä¹‹åˆ†ï¼Œå¯çœ‹åšåŒæ—¶æ”¶åˆ°ï¼Œè¿™ç§å¹¿æ’­å‘å‡ºä¹‹åä¸å¯è¢«æ‹¦æˆªã€‚åŒæ­¥å¹¿æ’­æ˜¯æŒ‰é¡ºåºä¸€ä¸ªä¸€ä¸ªæ‰§è¡Œï¼Œå¯ä»¥è®¾ç½®æ¥æ”¶çš„ä¼˜å…ˆçº§(è®¾ç½®<code>IntentFilter</code>çš„<code>priority</code>å€¼,è¶Šå¤§è¶Šä¼˜å…ˆ)ï¼Œè¿™ç§å¹¿æ’­å¯ä»¥è¢«æ‹¦æˆª(åœ¨<code>onReceive()</code>æ–¹æ³•é‡Œè°ƒç”¨<code>abortBroadcast()</code>åºŸæ‰è¿™æ¡å¹¿æ’­)ã€‚</p>

<p>æ³¨å†Œæ¥æ”¶å¹¿æ’­æœ‰ä¸¤ç§æ–¹å¼ï¼šä¸€ç§æ˜¯ç”¨ä»£ç æ³¨å†Œï¼Œä¹Ÿå«åŠ¨æ€æ³¨å†Œï¼ŒåŠ¨æ€æ³¨å†Œ(åœ¨<code>onCreate()</code>é‡Œè°ƒç”¨Activityçš„æ–¹æ³•<code>registerReceiver()</code>)çš„å¹¿æ’­æ¥æ”¶ä¸€å®šè¦åœ¨<code>onDestroy</code>ä¸­ç§»é™¤æ³¨å†Œ(è°ƒç”¨Activityçš„<code>unregisterReceiver()</code>)ã€‚å¦ä¸€ç§å«é™æ€æ³¨å†Œï¼Œæ˜¯åœ¨xmlä¸­é…ç½®çš„ï¼Œè¿™ç§æ³¨å†Œä¸ç”¨ç§»é™¤ã€‚</p>

<p>æ€ä¹ˆå†™å¹¿æ’­æ¥æ”¶å™¨ï¼Ÿå†™ä¸ªç±»ç»§æ‰¿<code>BroadcastReceiver</code>,å®ƒæ˜¯ä¸ªæŠ½è±¡ç±»ï¼Œç„¶åé‡å†™<code>onReceive()</code>å³å¯ï¼Œå¯ä»¥é€šè¿‡<code>intent.getAction()</code>æ¥åŒºåˆ†ä¸åŒå¹¿æ’­ï¼Œ<strong>åœ¨<code>onReceive()</code>æ–¹æ³•ä¸­ä¸èƒ½å¼€å¯çº¿ç¨‹</strong>ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç›‘å¬ç½‘ç»œå˜åŒ–çš„å¹¿æ’­æ¥æ”¶å™¨ã€‚</p>

<pre><code>class NetWorkChangeReceiver extends BroadcastReceiver{
    @Override
    public void onReceive(Context context,Intent intent){
        ConnectivityManager connectivityManager = (ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo networkInfo = connectivityManager.getActiveNetworkInfo();
        if (networkInfo != null &amp;&amp; networkInfo.isAvailable()){
            Toast.makeText(context,"ç½‘ç»œå¯ç”¨",Toast.LENGTH_SHORT).show();
        }else {
            Toast.makeText(context,"ç½‘ç»œä¸å¯ç”¨",Toast.LENGTH_SHORT).show();
        }
    }
}
</code></pre>

<p>ç”¨Activityé‡Œçš„æ–¹æ³•å‘é€å¼‚æ­¥å¹¿æ’­<code>sendBroadcaset(intent)</code>,å’Œå‘é€åŒæ­¥å¹¿æ’­<code>sendOrderedBroadCaset(intent,null)</code>ã€‚è¿™æ ·å‘é€çš„å¹¿æ’­éƒ½æ˜¯<code>è·¨åº”ç”¨</code>çš„ï¼Œå³Aåº”ç”¨å‘å‡ºçš„å¹¿æ’­ï¼ŒBåº”ç”¨ä¹Ÿå¯ä»¥æ”¶åˆ°çš„ï¼åº”ä¸ºè¿™äº›éƒ½æ˜¯å…¨å±€å¹¿æ’­ã€‚</p>

<p>æœ¬åœ°å¹¿æ’­ï¼Œå³å‘å‡ºçš„å¹¿æ’­åªä¼šè¢«<code>æœ¬èº«åº”ç”¨</code>æ¥æ”¶åˆ°,æ‰‹æœºé‡Œçš„å…¶ä»–åº”ç”¨å°±æ”¶ä¸åˆ°äº†ã€‚æœ¬åœ°å¹¿æ’­è¦ç”¨<code>LocalBroadcastManager</code>è¿™ä¸ªç±»æ¥ç®¡ç†ï¼Œå³æ³¨å†Œå’Œç§»é™¤çš„æ—¶å€™ä¸èƒ½ç”¨<code>Activity</code>çš„<code>registerReceiver()</code>å’Œ<code>unregisterReceiver()</code>æ–¹æ³•ï¼Œè€Œåº”è¯¥ç”¨<code>LocalBroadcastManager</code>å®ä¾‹çš„<code>registerReceiver()</code>å’Œ<code>unregisterReceiver()</code>æ–¹æ³•ï¼Œç®€å•å§ï¼<strong>æœ¬åœ°å¹¿æ’­ä¸ä¼šè¢«é™æ€æ³¨å†Œçš„æ¥æ”¶å™¨æ”¶åˆ°ï¼</strong>è¦æ¥æ”¶æœ¬åœ°å¹¿æ’­ï¼Œæ¥æ”¶å™¨éƒ½å¾—ç”¨åŠ¨æ€æ³¨å†Œçš„æ–¹å¼ã€‚</p>

<h3>* ContentProvider / ContentResolver</h3>

<p>è¿™ä¸ªæ˜¯ç”¨äºåœ¨æ‰‹æœºä¸­<code>ä¸åŒåº”ç”¨ç¨‹åº</code>é—´çš„æ•°æ®ä¼ é€’ï¼Œå¯ä»¥è‡ªå·±é€‰æ‹©é‚£äº›æ•°æ®å¯æš´éœ²å‡ºæ¥ç»™å…¶ä»–åº”ç”¨è·å–ã€‚æœ‰äº›ç³»ç»Ÿçš„åº”ç”¨ç¨‹åºå·²ç»æä¾›è¿™æ ·çš„æ¥å£äº†ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡è¿™ç§æ–¹å¼è·å–æ•°æ®ï¼Œå¦‚ çŸ­ä¿¡åº”ç”¨ï¼Œé€šè®¯å½•åº”ç”¨ç­‰ï¼Œè€Œæˆ‘ä»¬è‡ªå·±å†™çš„åº”ç”¨ç¨‹åºåˆ™è¦è‡ªå·±å†™è¿™ä¸ªæ•°æ®æä¾›æ¥å£ã€‚</p>

<p>è·å–æ•°æ®é€šè¿‡<code>ContentResolver</code>ç±»ï¼Œå¯ä»¥é€šè¿‡Context çš„ <code>getContentResolver()</code>å¾—åˆ°å®ä¾‹ï¼Œç„¶åæ•°æ®å¤„ç†å°±æ˜¯ <code>insert()</code>,<code>update()</code>,<code>delete()</code>,<code>quert()</code>,å’Œ<code>SQLiteDatabase</code>å¾ˆåƒï¼Œä½†ä¸æ˜¯ä¼ <code>è¡¨å</code>è€Œæ˜¯ä¼ <code>Uri</code>ã€‚</p>

<p>æä¾›æ•°æ®ï¼Œè¦ç»§æ‰¿æŠ½è±¡ç±»<code>ContentProvider</code>ç„¶åé‡å†™é‡Œé¢çš„å…­ä¸ªæ–¹æ³•ï¼š<code>onCreate()</code>,<code>quert()</code>,<code>insert()</code>,<code>update()</code>,<code>delete()</code>,<code>getType()</code>ã€‚</p>
]]></content>
  </entry>
  
</feed>
