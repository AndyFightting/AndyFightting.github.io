
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>é˜¿è´µ</title>
  <meta name="author" content="guimingsu">

  
  <meta name="description" content="ECMAScript 6 Jan 16th, 2017 1:14 pm Generator å‡½æ•° æ‰§è¡Œè¯¥å‡½æ•°æ—¶åªæ˜¯è¿”å›ä¸€ä¸ªå†…éƒ¨è°ƒç”¨æ ˆçš„æŒ‡é’ˆï¼Œç„¶åæ‰‹åŠ¨æ‰§è¡Œ next() æ–¹æ³•è¿›è¡Œä¸€æ¬¡æ ˆé‡Œçš„ yield è¡¨è¾¾å¼ã€‚next æ–¹æ³•æ¯æ¬¡è¿”å›ä¸€ä¸ªå¯¹è±¡{value: undefined, done: &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://andyfightting.github.io/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="é˜¿è´µ" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="http://libs.baidu.com/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<!--<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">  -->
<!--<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css"> -->

<script>
  function addBlankTargetForLinks () {
    $('a[href^="http"]').each(function(){
      $(this).attr('target', '_blank');
    });
  }
  $(document).bind('DOMNodeInserted', function(event) {
    addBlankTargetForLinks();
  });
</script>
  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">é˜¿è´µ</a></h1>
  
    <h2>All growth is a leap in the dark.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="andyfightting.github.io">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/about">About</a></li> 
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2017/01/16/es6/">ECMAScript 6</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2017-01-16T13:14:56+08:00'><span class='date'><span class='date-month'>Jan</span> <span class='date-day'>16</span><span class='date-suffix'>th</span>, <span class='date-year'>2017</span></span> <span class='time'>1:14 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Generator å‡½æ•°</h3>

<p>æ‰§è¡Œè¯¥å‡½æ•°æ—¶åªæ˜¯è¿”å›ä¸€ä¸ªå†…éƒ¨è°ƒç”¨æ ˆçš„æŒ‡é’ˆï¼Œç„¶åæ‰‹åŠ¨æ‰§è¡Œ <code>next()</code> æ–¹æ³•è¿›è¡Œä¸€æ¬¡æ ˆé‡Œçš„ <code>yield</code> è¡¨è¾¾å¼ã€‚next æ–¹æ³•æ¯æ¬¡è¿”å›ä¸€ä¸ªå¯¹è±¡<code>{value: undefined, done: false}</code>
value çš„å€¼å°±æ˜¯ yield è¡¨è¾¾å¼çš„å€¼ï¼Œdone æ˜¯æœ€æœ‰ä¸€ä¸ªyieldæ˜¯å¦éƒ½æ‰§è¡Œå®Œäº†ã€‚æ¯æ¬¡è°ƒç”¨ next æ–¹æ³•éƒ½æ˜¯åœ¨ä¸Šä¸€æ¬¡æ‰§è¡Œçš„ yield åå†æ‰§è¡Œä¸‹ä¸€æ¬¡çš„ yield,ä¹Ÿå°±æ˜¯ç›¸å½“äºGeneratorå‡½æ•°å¯ä»¥æš‚åœï¼Œç„¶åç»§ç»­ã€‚next æ–¹æ³•è¿˜å¯ä»¥ä¼ å…¥ä¸€ä¸ªå‚æ•°åˆ°å‡½æ•°å†…éƒ¨ï¼Œå®ƒä¼šæ›¿æ¢ä¸Šä¸€æ¬¡ yield çš„è¿”å›å€¼(æ³¨æ„åŒºåˆ†ä¸æ˜¯nextæ–¹æ³•çš„æ”¾å›å€¼ï¼Œnextæ–¹æ³•å§‹ç»ˆæ˜¯è¿”å›ä¸€ä¸ªå¯¹è±¡)ã€‚ä¹Ÿå°±æ˜¯è¯´å¯ä»¥ç”¨ nextæ–¹æ³•åŠ¨æ€çš„å‘å‡½æ•°é‡Œä¼ å‚æ•°ï¼Œå‡½æ•°çš„æ‰§è¡Œæ—¶åˆ†æ®µçš„ï¼Œå¯ä»¥æš‚åœï¼Œå¯ä»¥ç»§ç»­ã€‚Generator å‡½æ•°è¿˜å¯ä»¥ç”¨ for of è¿›è¡Œéå†æ‰§è¡Œã€‚</p>

<p><strong># åŠ¨æ€ä¼ å‚ï¼š</strong> Generator å‡½æ•°çš„æš‚åœæ‰§è¡Œçš„æ•ˆæœï¼Œæ„å‘³ç€å¯ä»¥æŠŠå¼‚æ­¥æ“ä½œå†™åœ¨ yield è¯­å¥é‡Œé¢ï¼Œç­‰åˆ°è°ƒç”¨ next æ–¹æ³•æ—¶å†å¾€åæ‰§è¡Œã€‚è¿™å®é™…ä¸Šç­‰åŒäºä¸éœ€è¦å†™å›è°ƒå‡½æ•°äº†ï¼Œå› ä¸ºå¼‚æ­¥æ“ä½œçš„åç»­æ“ä½œå¯ä»¥æ”¾åœ¨ yield è¯­å¥ä¸‹é¢ï¼Œåæ­£è¦ç­‰åˆ°è°ƒç”¨next æ–¹æ³•æ—¶å†æ‰§è¡Œã€‚æ‰€ä»¥ï¼ŒGenerator å‡½æ•°çš„ä¸€ä¸ªé‡è¦å®é™…æ„ä¹‰å°±æ˜¯ç”¨æ¥å¤„ç†å¼‚æ­¥æ“ä½œï¼Œæ”¹å†™å›è°ƒå‡½æ•°ã€‚</p>

<pre><code>      //next ä¼ å‚
      function* myGenerator() {
          let a = yield 'hello';        //æ‰§è¡Œtest.next('A')åï¼š a = undefined,æš‚åœåœ¨æ­¤å¤„ï¼Œç­‰å¾…ä¸‹ä¸€æ¬¡çš„nextå†ç»§ç»­
          let b = yield 'world' + a;    //æ‰§è¡Œtest.next('B')åï¼š a = 'B', b = undefined,æš‚åœåœ¨æ­¤å¤„ï¼Œç­‰å¾…ä¸‹ä¸€æ¬¡çš„nextå†ç»§ç»­
          let c = yield 'generator' + b;//æ‰§è¡Œtest.next('C')åï¼š a = 'B', b = 'C', c = undefined ,æš‚åœåœ¨æ­¤å¤„ï¼Œç­‰å¾…ä¸‹ä¸€æ¬¡çš„nextå†ç»§ç»­
          return 'ç»“æŸ' + c;             //æ‰§è¡Œtest.next('D')åï¼š a = 'B', b = 'C', c = 'D'
        }

        let test = myGenerator();

        test.next('A');  //åå›å¯¹è±¡ï¼š {value: "hello", done: false} ,ç¬¬ä¸€æ¬¡çš„nextä¼ å‚æ˜¯æ— æ•ˆçš„ï¼Œæ²¡æ„ä¹‰çš„ï¼
        test.next('B');  //åå›å¯¹è±¡ï¼š {value: "worldB", done: false}
        test.next('C');  //åå›å¯¹è±¡ï¼š {value: "generatorC", done: false}
        test.next('D');  //åå›å¯¹è±¡ï¼š {value: "ç»“æŸD", done: true}
</code></pre>

<p><strong># for of  éå†:</strong> æ³¨æ„ï¼Œä¸€æ—¦ next æ–¹æ³•çš„è¿”å›å¯¹è±¡çš„doneå±æ€§ä¸º trueï¼Œfor&hellip;of å¾ªç¯å°±ä¼šä¸­æ­¢ï¼Œä¸”ä¸åŒ…å«è¯¥è¿”å›å¯¹è±¡ï¼Œæ‰€ä»¥ä¸Šé¢ä»£ç çš„ return è¯­å¥è¿”å›çš„ 4ï¼Œä¸åŒ…æ‹¬åœ¨ for&hellip;of å¾ªç¯ä¹‹ä¸­ã€‚</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'> function *foo() {
</span><span class='line'>    yield 1;
</span><span class='line'>    yield 2;
</span><span class='line'>    yield 3;
</span><span class='line'>    return 4;
</span><span class='line'>  }
</span><span class='line'>  for (let v of foo()) {
</span><span class='line'>    console.log(v);
</span><span class='line'>  }
</span><span class='line'>  // 1 2 3 </span></code></pre></td></tr></table></div></figure>


<p><strong># æ•è·å¤–éƒ¨é”™è¯¯ï¼š</strong> Generator å‡½æ•°è¿˜æœ‰ä¸€ä¸ªç‰¹ç‚¹ï¼Œå®ƒå¯ä»¥åœ¨å‡½æ•°ä½“å¤–æŠ›å‡ºé”™è¯¯ï¼Œç„¶ååœ¨å‡½æ•°ä½“å†…æ•è·ã€‚ä¹Ÿå¯ä»¥å‡½æ•°ä½“å†…æŠ›é”™ï¼Œå¤–éƒ¨æ•è·ã€‚ æ³¨æ„ä¸‹é¢ throw çš„ä¸åŒï¼ï¼</p>

<pre><code>   var g = function* () {
      while (true) {
        try {
          console.log('aaa');
          yield console.log('bbb');
          console.log('ccc');
        } catch (error) {
          console.log('å†…éƒ¨æ•è·', error);
        }
      }
    };

    var i = g();
    i.next();
    try {
      i.throw('a'); //è¿™æ˜¯è¿­ä»£å™¨çš„ throw æ–¹æ³•
    } catch (error) {
      console.log('å¤–éƒ¨æ•è·', error);
    }
  //aaa
  //bbb
  //å†…éƒ¨æ•è· a
  //aaa   //ä¸ºä½•è¿™é‡Œè¿˜ä¼šæ‰§è¡Œ ï¼Ÿï¼Ÿ
  //bbb
</code></pre>

<p><strong># å¼‚æ­¥æ“ä½œï¼š</strong>  å¯ä»¥åƒä¸‹é¢é‚£æ ·å°±ä¸ç”¨å‡½æ•°å›è°ƒäº†ï¼åªæ˜¯åœ¨å¼‚æ­¥æ“ä½œæˆåŠŸåè°ƒç”¨nextå°±å¯ä»¥ã€‚æ³¨æ„ï¼ŒmakeAjaxCall å‡½æ•°ä¸­çš„ next æ–¹æ³•ï¼Œå¿…é¡»åŠ ä¸Š response å‚æ•°ï¼Œå› ä¸º yield è¯­å¥æ„æˆçš„è¡¨è¾¾å¼ï¼Œæœ¬èº«æ˜¯æ²¡æœ‰å€¼çš„ï¼Œæ€»æ˜¯ç­‰äº undefinedã€‚</p>

<pre><code>   function* main() {
      var result = yield request("http://some.url");
      var resp = JSON.parse(result);
        console.log(resp.value);
    }

    function request(url) {
      makeAjaxCall(url, function(response){
        it.next(response);
      });
    }

    var it = main();
    it.next();
</code></pre>

<h3>Promise å¯¹è±¡</h3>

<p>Promise å¯¹è±¡æ˜¯ç”¨æ¥å¤„ç†å¼‚æ­¥æ“ä½œæµç¨‹çš„ï¼Œé¿å…äº†å±‚å±‚åµŒå¥—çš„å›è°ƒå‡½æ•°ã€‚</p>

<pre><code>  const step0 = function () {
      return new Promise(function(resolve, reject) {
          setTimeout(()=&gt;{
            console.log('step 0 å¤„ç†');
              resolve(); //è¡¨ç¤ºå¼‚æ­¥å¤„ç†æˆåŠŸ
          },2000);
      });
    };

    const step1 = function () {
      return new Promise(function(resolve, reject) {
        setTimeout(()=&gt;{
          console.log('step 1 å¤„ç†');
          resolve(); //è¡¨ç¤ºå¼‚æ­¥å¤„ç†æˆåŠŸ
        },2000);
      });
    };

    function allSuccess() {
        console.log('å…¨éƒ¨æˆåŠŸäº†');
    }

    function failed() {
      console.log('å¤±è´¥äº†');
    }

    step0().then(step1).then(allSuccess,failed);
</code></pre>

<p>Promise.allæ–¹æ³•ç”¨äºå°†å¤šä¸ªPromiseå®ä¾‹ï¼ŒåŒ…è£…æˆä¸€ä¸ªæ–°çš„Promiseå®ä¾‹ã€‚</p>

<pre><code>var p = Promise.all([p1,p2,p3]);
</code></pre>

<p>pçš„çŠ¶æ€ç”±p1ã€p2ã€p3å†³å®šï¼Œåˆ†æˆä¸¤ç§æƒ…å†µã€‚</p>

<ol>
<li>åªæœ‰p1ã€p2ã€p3çš„çŠ¶æ€éƒ½å˜æˆresolveï¼Œpçš„çŠ¶æ€æ‰ä¼šå˜æˆresolveï¼Œæ­¤æ—¶p1ã€p2ã€p3çš„è¿”å›å€¼ç»„æˆä¸€ä¸ªæ•°ç»„ï¼Œä¼ é€’ç»™pçš„å›è°ƒå‡½æ•°ã€‚</li>
<li>åªè¦p1ã€p2ã€p3ä¹‹ä¸­æœ‰ä¸€ä¸ªè¢«rejectï¼Œpçš„çŠ¶æ€å°±å˜æˆrejectï¼Œæ­¤æ—¶ç¬¬ä¸€ä¸ªè¢«rejectçš„å®ä¾‹çš„è¿”å›å€¼ï¼Œä¼šä¼ é€’ç»™pçš„å›è°ƒå‡½æ•°ã€‚</li>
</ol>


<p><strong>æ³¨æ„ï¼š</strong>åŒºåˆ«ä¸€ä¸‹å‡ ç§æƒ…å†µï¼š</p>

<pre><code>// å†™æ³•ä¸€
doSomething().then(function () {
  return doSomethingElse();
}).then(finalHandler);

// å†™æ³•äºŒ
doSomething().then(function () {
  doSomethingElse();
}).then(finalHandler);

// å†™æ³•ä¸‰
doSomething().then(doSomethingElse()).then(finalHandler);

// å†™æ³•å››
doSomething().then(doSomethingElse).then(finalHandler);
</code></pre>

<p>å†™æ³•ä¸€finalHandlerçš„å‚æ•°ï¼Œæ˜¯doSomethingElseè¿”å›çš„ç»“æœï¼Œä¸‹é¢æœ€åä¼šæ‰“å°å‡ºhello.</p>

<pre><code>const doSomething = function () {
      return new Promise(function(resolve, reject) {
        console.log('step 0 å¤„ç†');
        resolve();
      });
    };

    const doSomethingElse = function () {
       new Promise(function(resolve, reject) {
        console.log('step 1 å¤„ç†');
        resolve();
      });

       return 'hello'
    };

    function finalHandler(msg) {
        console.log(msg);
    }

    doSomething().then(function () {
      return doSomethingElse();
    }).then(finalHandler);
</code></pre>

<p>å†™æ³•äºŒçš„finalHandlerå›è°ƒå‡½æ•°çš„å‚æ•°æ˜¯undefinedã€‚å†™æ³•ä¸‰çš„finalHandlerå›è°ƒå‡½æ•°çš„å‚æ•°ï¼Œæ˜¯doSomethingElseå‡½æ•°è¿”å›çš„å›è°ƒå‡½æ•°çš„è¿è¡Œç»“æœã€‚ä¸»è¦æ˜¯å†™æ³•ä¸‰å’Œå†™æ³•å››çš„åŒºåˆ«ï¼Œä¸‰çš„è¯doSomethingElseæ˜¯é©¬ä¸Šæ‰§è¡Œï¼ŒfinalHandleræ‹¿ä¸åˆ°å®ƒçš„è¿”å›ç»“æœï¼è€Œå››å¯ä»¥æ‹¿åˆ°å®ƒçš„è¿”å›ç»“æœã€‚</p>

<pre><code>//ä¸‰çš„æ‰“å°
step 0
setp 1
undefined

//å››çš„æ‰“å°ç»“æœ
step 0
setp 1
hello
</code></pre>

<h4>å—çº§åˆ«çš„ let,const, ä¸ä¼šå˜é‡æå‡ï¼Œä¼šæœ‰æš‚æ—¶æ€§æ­»åŒºã€‚letå¯å˜ï¼Œconstå¸¸é‡åªèƒ½åˆå§‹åŒ–èµ‹å€¼ä¸€æ¬¡ã€‚constçš„æŒ‡å‘ä¸èƒ½ä¿®æ”¹ï¼Œä½†å¯¹è±¡çš„å±æ€§å¯ä»¥ä¿®æ”¹ã€‚æ³¨æ„forå¾ªç¯ä¸­ç”¨varåšä¸´æ—¶å˜é‡æ—¶ï¼Œå¾ªç¯ç»“æŸåè¯¥ä¸´æ—¶å˜é‡è¿˜åœ¨ï¼ç”¨letå°±ä¸ä¼šã€‚</h4>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>var a = [];
</span><span class='line'>for (var i = 0; i &lt; 10; i++) {
</span><span class='line'>  a[i] = function () {
</span><span class='line'>    console.log(i);
</span><span class='line'>  };
</span><span class='line'>}
</span><span class='line'>a[0](); // 10 ï¼Œå…¨éƒ¨éƒ½æ˜¯ 10   </span></code></pre></td></tr></table></div></figure>


<h4>for oféå†ï¼Œå¯éå†å¯¹è±¡çš„[key,value],éå†set,map, for in ä¸è¡Œã€‚åŸºäºIteratoræ¥å£éå†ã€‚</h4>

<h4>é»˜è®¤å‚æ•°ï¼Œ&hellip;ä¸å®šä¸ªæ•°å‚æ•°ï¼Œ&hellip;å¯¹è±¡å±•å¼€, ä¸å®šå‚æ•°åªèƒ½æ”¾æœ€åï¼Œ</h4>

<h4>Set,Map,WeakSet,WeakMap</h4>

<h4>å¯¹è±¡å¢å¼º,ç›´æ¥å†™å˜é‡å’Œæ–¹æ³•ä½œä¸ºå¯¹åº”çš„å±æ€§</h4>

<h4>å­—ç¬¦çªœæ¨¡æ¿æ’å€¼ ${}</h4>

<h4>è§£æ„ï¼ŒåŒ¹é…èµ‹å€¼ï¼Œvar {name:n, age:a} = getUser(); //n=getUser().name, a=getUser().age</h4>

<h4>Symbolï¼Œè§£å†³å±æ€§åå†²çªé—®é¢˜ï¼Œå§‹ç»ˆå”¯ä¸€  Symbol(&lsquo;a&rsquo;) != Symbol(&lsquo;a&rsquo;)</h4>

<h4>Proxyï¼Œä»£ç†æ‹¦æˆª var p = new Proxy(target, handler); ç„¶åæ“ä½œ p å°±ä¼šè¢«handlerä»£ç†æ‹¦æˆªã€‚</h4>

<h4>Reflect åå°„</h4>

<h4>è¯­æ³•ç³–ï¼Œç”¨ => å®šä¹‰æ–¹æ³•ï¼Œ class ç±», åƒjavaä¼¼çš„å†™ä»£ç ï¼Œ</h4>

<h4>å­—ç¬¦ç¼–ç é—®é¢˜ï¼Œä¹‹å‰éƒ½æ˜¯åŸºäº UTF-16 ä¸¤ä¸ªå­—èŠ‚çš„ç¼–ç ï¼Œlength å’Œ charAt()éƒ½æ˜¯åŸºäºè¿™æ ·æ¥è¯»å–çš„ã€‚ç„¶è€Œ ES6 åŠ å¼ºäº†å¯¹ Unicode çš„æ”¯æŒï¼Œå¹¶ä¸”æ‰©å±•äº†å­—ç¬¦ä¸²å¯¹è±¡ã€‚å¯¹äºé‚£äº›éœ€è¦å››ä¸ªå­—èŠ‚å­˜å‚¨çš„å­—ç¬¦ï¼Œå†ç”¨ä¹‹å‰çš„length ï¼Œ charAt() æ¥æ“ä½œå°±æ— æ³•æ­£ç¡®è¯»å–ï¼Œæ‰€ä»¥å¾—ç”¨æ–°çš„æ–¹æ³•æ–°çš„æ–¹å¼æ¥ç»Ÿä¸€å¤„ç†ã€‚codePointAtå¯ä»¥æ­£ç¡®æå–ç»™å®šä½ç½®å­—ç¬¦ä¸²çš„å¯¹åº” Unicode ç .</h4>
</div>
  
  


      | <a href="/blog/2017/01/16/es6/#comments">Comments</a>


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/12/22/react-ios/">React Native å’Œ iOS äº’ç›¸è°ƒç”¨</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-12-22T09:19:38+08:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>22</span><span class='date-suffix'>nd</span>, <span class='date-year'>2016</span></span> <span class='time'>9:19 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>è¿™é‡Œè®°å½•å¦‚ä½•åœ¨iOSé¡¹ç›®ä¸­é›†æˆReact Native ï¼Œå’Œä»–ä»¬ä¹‹é—´äº’ç›¸ä¼ å‚ï¼Œäº’ç›¸è°ƒç”¨ã€‚</p>

<p>åˆå­¦è€…å¯èƒ½éƒ½æ˜¯æŒ‰ç…§RNå®˜ç½‘æ¥å­¦ä¹ çš„ï¼Œé€šè¿‡ <code>react-native init xxx</code> æ¥åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®ï¼ŒiOSå’ŒAndroidéƒ½æ”¾åœ¨ä¸€èµ·äº†ï¼Œå¯¹äºæ–°æ‰‹æ¥è¯´æœ‰ç‚¹ä¹±ï¼Œå…¶å®ä»–ä»¬å°±æ˜¯å…±ç”¨äº†é…ç½®æ–‡ä»¶å’Œä¾èµ–åº“ã€‚ä½†é€šè¿‡å•ç‹¬åœ¨iOSä¸­é›†æˆRNæ›´èƒ½æ¸…æ¥šçš„çŸ¥é“éœ€è¦çš„æ˜¯å“ªäº›ä¸œè¥¿ã€‚</p>

<p>CocoaPodsï¼Œå¦‚æœpodç‰ˆæœ¬æ˜¯ 0.39.0 è¯·æ›´æ–°ç‰ˆæœ¬ï¼Œä¾æ¬¡ç”¨å¦‚ä¸‹å‘½ä»¤ï¼Œæˆ‘æ›´æ–°åˆ°äº†1.2.0ï¼š</p>

<pre><code>gem install cocoapods --pre
pod repo update --verbose
</code></pre>

<p>1.ç”¨Xcodeæ–°å»ºä¸€ä¸ªOCé¡¹ç›®å«MyRN_iOSï¼Œåœ¨é¡¹ç›®æ–‡ä»¶å¤¹é‡Œæ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹å«ReactComponent(åå­—éšæ„)ï¼Œåœ¨è¿™æ–‡ä»¶å¤¹é‡Œæ–°å»º <code>package.json</code> æ–‡ä»¶é‡Œæ”¾ï¼š</p>

<pre><code>{
  "name": "MyRN_iOS",
  "version": "0.0.1",
  "private": true,
  "scripts": {
    "start": "node node_modules/react-native/local-cli/cli.js start"
  },
  "dependencies": {
    "react": "15.4.1",
    "react-native": "0.39.2"
  }
}
</code></pre>

<p>2.è¿›å…¥<code>package.json</code>æ‰€åœ¨æ–‡ä»¶å¤¹å³ReactComponentï¼Œæ‰§è¡Œå‘½ä»¤<code>npm install</code>å®‰è£…ä¾èµ–åŒ…ã€‚</p>

<p>3.è¿›å…¥ReactComponenté‡Œåˆ›å»ºindex.ios.jsæ–‡ä»¶(ä½ç½®å’Œå‘½åéšæ„éƒ½å¯ä»¥ xxx.jsï¼Œåªä¸è¿‡æˆ‘æ”¾è¿™é‡Œï¼Œåé¢é…ç½®çš„æ—¶å€™ä¼šç”¨å®ƒçš„å…·ä½“è·¯å¾„)ï¼Œé‡Œé¢æ”¾è¿‡hello worldï¼š</p>

<pre><code>import React, { Component } from 'react';
import {
  AppRegistry,
  StyleSheet,
  Text,
  View
} from 'react-native';

class NativeRNApp extends Component {
  render() {
    return (
        &lt;View style={styles.container}&gt;
            &lt;Text style={styles.welcome}&gt;
               hello world
            &lt;/Text&gt;
        &lt;/View&gt;
    );
  }
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    justifyContent: 'center',
    alignItems: 'center',
    backgroundColor: '#F5FCFF',
  },
  welcome: {
    fontSize: 20,
    textAlign: 'center',
    margin: 10,
  },
});

//  é¡¹ç›®åå¿…é¡»å¯¹åº”!! 
AppRegistry.registerComponent('MyRN_iOS', () =&gt; NativeRNApp);
</code></pre>

<p>4.è¿™é‡Œå°±æ˜¯pod æ“ä½œäº†ã€‚è¿›å…¥é¡¹ç›®æ–‡ä»¶å¤¹ï¼Œæ–°å»º <code>vim Podfile</code> æ–‡ä»¶ï¼šï¼ˆä¸çŸ¥é“ä¸ºå•¥è¦8.0æ‰å¯ä»¥ï¼Œä¸ç„¶æç¤ºç‰ˆæœ¬ä¸å¤Ÿï¼Œç¨åå†çœ‹è¿™é—®é¢˜ï¼‰ï¼Œç„¶å <code>pod install</code> å®‰è£…ã€‚</p>

<pre><code>target 'MyRN_iOS' do
platform :ios, â€˜8.0â€™

pod 'React', :path =&gt; â€˜./ReactComponent/node_modules/react-native', :subspecs =&gt; [
 'Core',
  'ART',
  'RCTActionSheet',
  'RCTAdSupport',
  'RCTGeolocation',
  'RCTImage',
  'RCTNetwork',
  'RCTPushNotification',
  'RCTSettings',
  'RCTText',
  'RCTVibration',
  'RCTWebSocket',
  'RCTLinkingIOS',
]

end
</code></pre>

<p>6.OCé‡ŒåŠ è½½RNæ–‡ä»¶</p>

<pre><code>- (void)viewDidLoad {
    [super viewDidLoad];

    NSString * strUrl = @"http://localhost:8081/index.ios.bundle?platform=ios&amp;dev=true";
    NSURL * jsCodeLocation = [NSURL URLWithString:strUrl];

    RCTRootView * rootView = [[RCTRootView alloc] initWithBundleURL:jsCodeLocation
                                                         moduleName:@"MyRN_iOS"
                                                  initialProperties:nil
                                                      launchOptions:nil];
    self.view = rootView;
}
</code></pre>

<p>7.è¿˜è¦å…è®¸OCè¿›è¡Œ http é€šä¿¡..
<img src="/myimg/js/fuck.png" width="700" alt="" /></p>

<p>8.Xcodeæ‰“å¼€é¡¹ç›®ç„¶åRun,å‘ç°çº¢å±æŠ¥ can not connect server ã€‚è¿›å…¥ <code>package.json</code>æ‰€åœ¨æ–‡ä»¶å¤¹å³ReactComponent, æ‰§è¡Œ <code>npm start</code>,å†è¿è¡ŒXcodeå°±å¯ä»¥äº†ã€‚</p>

<p>ç”¨ WebStorm æˆ–è€… Sublime Text æ‰“å¼€ä¸Šé¢æ–°å»ºé¡¹ç›®æ˜¯åˆ›å»ºçš„æ–‡ä»¶å¤¹ ReactComponent ,ç¼–è¾‘é‡Œé¢çš„ js æ–‡ä»¶ï¼Œç„¶åå†Xcodeè¿è¡Œã€‚(æ˜¯è¿™æ ·å¤„ç†å§ï¼Œè¿˜æ˜¯æˆ‘æ‰“å¼€çš„æ–¹å¼ä¸å¯¹â€¦ğŸ˜‚)</p>

<h4>OCå‘RNä¼ å‚</h4>

<p>RN å¯ä»¥çœ‹æˆå°±æ˜¯MVCä¸­çš„V, å®ƒæ˜¯é€šè¿‡ <code>RCTRootView</code> åŒ…è£…äº†ä¸€ä¸‹ï¼Œè€Œ RCTRootView å°±æ˜¯ç»§æ‰¿äº UIView çš„ï¼åœ¨åˆå§‹åŒ– RCTRootViewçš„æ—¶å€™ï¼Œ initialProperties è¿™é‡Œä¼ å…¥ä¸€ä¸ªå­—å…¸ï¼Œç„¶åå°±å¯ä»¥åœ¨jsçš„ props ä¸­æ ¹æ®å­—å…¸çš„keyè·å–å€¼äº†ã€‚</p>

<pre><code>//--OCä¸­ä¼ å­—å…¸
    NSDictionary* dic = @{
        @"name":@"andy",
        @"age":@"18",
    };
    RCTRootView * rootView = [[RCTRootView alloc] initWithBundleURL:jsLocation
                                                         moduleName:@"MyRN_iOS"
                                                  initialProperties:dic
                                                      launchOptions:nil];
 //JSä¸­é€šè¿‡propsè¯»å–ä¼ æ¥çš„å­—å…¸
  render() {
        return (
            &lt;View style={styles.container}&gt;
                &lt;Text style={styles.welcome}&gt;
                    {this.props.name} --- {this.props.age}
                &lt;/Text&gt;
            &lt;/View&gt;
        );
    }
</code></pre>

<h5>å‘ï¼æœ¬æ¥å•çº¯çš„åœ¨RNä¸­è°ƒç”¨ç‚¹å‡»äº‹ä»¶æ˜¯å¾ˆç®€å•çš„ï¼Œå‰ææ˜¯ViewController ä¸­ self.view =rCTRootView; ã€‚ä½†æ˜¯å½“ç”¨ [self.view addSubview:rCTRootView]; æ—¶ï¼Œå³æ—¶åœ¨ RN ä»£ç ä¸­è®¾ç½® width,height äº†ï¼Œç‚¹å‡»æ˜¯æ²¡æ•ˆæœçš„ï¼è¦åœ¨OCä»£ç ä¸­è®¾ç½® rCTRootView çš„ frame åæ‰æœ‰æ•ˆæœï¼</h5>
</div>
  
  


      | <a href="/blog/2016/12/22/react-ios/#comments">Comments</a>


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/12/20/weex/">Weex</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-12-20T22:14:37+08:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>20</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>10:14 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Weex ä»£ç ç”± templateã€styleã€script ä¸‰ä¸ªéƒ¨åˆ†æ„æˆã€‚template é‡Œåªèƒ½æœ‰ä¸€ä¸ªæ ¹èŠ‚ç‚¹ï¼Œåªèƒ½æ˜¯ div, scroller, list ä¸‰è€…ä¹‹ä¸­çš„ä¸€ä¸ªã€‚</p>

<p>style æ ·å¼ä¸è¦ç”¨é©¼å³°å†™æ³•ï¼Œç”¨å°å†™æ¨ªæ†åˆ†ç¦»ã€‚æ•°æ®ç»‘å®šå†™æ³•å’ŒVueä¸€æ ·ï¼Œç”¨ä¸¤ä¸ªå¤§æ‹¬å·åŒ…ç€ï¼Œä¸”templateå’Œscripté‡Œçš„æ•°æ®æ˜¯åŒå‘ç»‘å®šçš„ã€‚åŒæ‹¬å·é‡Œçš„æ•°æ®ç»‘å®šä¹Ÿå¯ä»¥æœ‰ç®€å•çš„è¡¨è¾¾å¼ï¼Œå¦‚æœè¦å¤æ‚è®¡ç®—ï¼Œç”¨Vueé‚£æ ·çš„è®¡ç®—å‹å±æ€§ã€‚</p>

<pre><code>&lt;script&gt;
  module.exports = {
    data: {
      firstName: 'John',
      lastName: 'Smith'
    },
    computed: {
      fullName: function() {
        return this.firstName + ' ' + this.lastName
      }
    },
    methods: {
      changeName: function() {
        this.firstName = 'Terry'
      }
    }
  }
&lt;/script&gt;
</code></pre>

<p>å±æ€§ä¹Ÿå¯ä»¥getter setter, å°±ä¸å†è¯´å’ŒVueä¸€æ ·äº†ï¼Œweexå°±æ˜¯åŸºäºVue çš„ã€‚</p>

<pre><code>computed: {
      fullName: {
        get: function() {
          return this.firstName + ' ' + this.lastName
        },

        set: function(v) {
          var s = v.split(' ')
          this.firstName = s[0]
          this.lastName = s[1]
        }
      }
    },
    methods: {
      changeName: function() {
        this.fullName = 'Terry King'
      }
    }
  }
</code></pre>

<p>å†…åµŒ style æ ·å¼çš„å€¼ æˆ–è€… class çš„å€¼ç­‰å…¶ä»–å±æ€§å€¼ä¹Ÿå¯ä»¥ ç”¨åŒå¤§æ‹¬å·åŠ¨æ€ç»‘å®šã€‚class å¯ä»¥æœ‰å¤šä¸ªåç§°ï¼Œç”¨ç©ºæ ¼åˆ†å¼€ã€‚<strong>style çš„é€‰å–å™¨åªæ”¯æŒç±»é€‰å–å™¨ï¼å…¶ä»–å¦‚idé€‰å–ï¼Œç»„åˆé€‰å–å™¨å•¥çš„éƒ½æ²¡æœ‰ï¼class name å¯ä»¥æœ‰å¤šä¸ªï¼</strong></p>

<p>onXXX å¼€å¤´çš„å°±æ˜¯ç”¨äºç»‘å®šäº‹ä»¶çš„ç‰¹æ€§ï¼Œç‰¹æ€§åä¸­ on ä¹‹åçš„éƒ¨åˆ†å°±æ˜¯äº‹ä»¶çš„ç±»å‹ï¼Œç‰¹æ€§çš„å€¼å°±æ˜¯å¤„ç†è¯¥äº‹ä»¶çš„å‡½æ•°åã€‚å‡½æ•°åå¤–ä¸éœ€è¦æ·»åŠ è¯­æ³•ä¸­çš„å¤§æ‹¬å·ã€‚onclick=&ldquo;toggle"ã€‚</p>

<p>å¯ä»¥ä½¿ç”¨ä¸€ä¸ªç‰¹æ®Šçš„å‚æ•° $eventï¼Œä»£è¡¨äº‹ä»¶æè¿°å¯¹è±¡ï¼Œå³é»˜è®¤äº‹ä»¶å¤„ç†å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚onclick=&ldquo;update($event, 1, 2)"ï¼Œonclick="foo&rdquo; å’Œ onclick=&ldquo;foo($event)&rdquo; æ˜¯ç­‰ä»·çš„ã€‚</p>

<p>æ¯å½“ä¸€æ¬¡äº‹ä»¶è¢«è§¦å‘çš„æ—¶å€™ï¼Œéƒ½ä¼šäº§ç”Ÿä¸€ä¸ªäº‹ä»¶æè¿°å¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä¼šé»˜è®¤ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’ç»™äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œæˆ–ä»¥ $event å½¢å‚çš„æ–¹å¼å‡ºç°åœ¨å†…è”äº‹ä»¶å¤„ç†å‡½æ•°ä¸­ã€‚</p>

<p>æ¯ä¸ªäº‹ä»¶æè¿°å¯¹è±¡è‡³å°‘åŒ…å«ä»¥ä¸‹å‡ ä¸ªç‰¹æ€§ï¼š</p>

<pre><code>type (string): äº‹ä»¶åç§°, å¦‚: click
target (Element): ç›®æ ‡å…ƒç´ 
timestamp (number): äº‹ä»¶è§¦å‘æ—¶çš„æ—¶é—´æˆ³æ•°å­—
</code></pre>

<p>if, repeatï¼šåŒæ‹¬å·å¯ä»¥çœç•¥ã€‚ if=&ldquo;/{/{shown/}/}&rdquo; ,repeat=&ldquo;(k,v) in list&rdquo;.if=&ldquo;condition&rdquo; å’Œ if=&ldquo;/{/{condition/}/}&rdquo; éƒ½æ˜¯å¯ä»¥çš„ï¼Œä¸¤è€…ç­‰ä»·ä½¿ç”¨ã€‚if ä¸èƒ½ç”¨åœ¨ template çš„æ ¹ç»„ä»¶ä¸Šï¼Œå¦åˆ™å°†æ— æ³•è¢« Weex æ­£å¸¸çš„è¯†åˆ«å’Œå¤„ç†ã€‚</p>

<p>repeat é»˜è®¤æœ‰ä¸ªindex ç´¢å¼•ã€‚</p>

<p>å½“ä¿®æ”¹ repeat ä¸­çš„æ•°ç»„æ—¶ï¼Œåœ¨å†™æ³•ä¸Šä¼šå—åˆ°ä¸€å®šçš„é™åˆ¶ï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p>

<pre><code>ç›´æ¥é€šè¿‡â€œè§’æ ‡â€ä¿®æ”¹æ•°ç»„çš„æŸä¸ªé¡¹ç›® (å¦‚ this.items[0] = ...) æ˜¯ä¸ä¼šè§¦å‘è§†å›¾è‡ªåŠ¨æ›´æ–°çš„ã€‚
æˆ‘ä»¬åœ¨æ•°ç»„çš„åŸå‹ä¸Šæä¾›äº†ä¸€ä¸ªé¢å¤–çš„æ–¹æ³•ï¼šthis.items.$set(index, item) æ¥å®Œæˆç›¸åŒçš„äº‹æƒ…ã€‚
// å’Œ `this.items[0] = ...` ä½œç”¨ç›¸åŒï¼Œä½†ä¼šè‡ªåŠ¨è§¦å‘è§†å›¾æ›´æ–°
this.items.$set(0, { childMsg: 'Changed!'})

ç›´æ¥é€šè¿‡ä¿®æ”¹ length æ¥æ”¹å˜æ•°ç»„é•¿åº¦ (å¦‚ this.items.length = 0) ä¹Ÿæ˜¯ä¸ä¼šè§¦å‘è§†å›¾è‡ªåŠ¨æ›´æ–°çš„ã€‚
æˆ‘ä»¬æ¨èæ‚¨ç›´æ¥èµ‹å€¼ä¸€ä¸ªæ–°çš„ç©ºæ•°ç»„æŠŠæ—§çš„æ›¿æ¢æ‰ã€‚

// å’Œ `this.items.length = 0` ä½œç”¨ç›¸åŒï¼Œä½†ä¼šè‡ªåŠ¨è§¦å‘è§†å›¾æ›´æ–°
this.items = []
</code></pre>

<p>é»˜è®¤çš„ track-by çš„å€¼å°±æ˜¯æ•°ç»„çš„ç´¢å¼•å€¼ã€‚track-by=&ldquo;xxx&rdquo;</p>

<p>static ç‰¹æ€§å¯ä»¥ä¸€æ¬¡æ€§æŠŠæ•°æ®è®¾ç½®åˆ°æ¨¡æ¿ç›¸åº”çš„ä½ç½®ä¸Šï¼Œä½†æ˜¯ä»Šåä¸ä¼šéšç€æ•°æ®çš„å˜åŒ–è€Œæ›´æ–°ã€‚è¿™æ ·å¯ä»¥å‡å°‘æ— è°“çš„æ•°æ®ç»‘å®šï¼Œæœ‰æ•ˆæ§åˆ¶å’Œä¼˜åŒ–é•¿åˆ—è¡¨ã€çº¯é™æ€é¡µé¢åœ¨è¿è¡Œæ—¶çš„å¼€é”€ã€‚ä¸è¿‡ä¹Ÿè¦å°å¿ƒä½¿ç”¨ä¸è¦å¯¼è‡´åŸæœ¬éœ€è¦æ›´æ–°çš„è§†å›¾æ²¡æœ‰è§¦å‘æ›´æ–°ã€‚ã€Šdiv staticã€‹</p>

<p>weex æŠŠå±å¹•éƒ½çœ‹ä½œæ˜¯750pxï¼Œä¼šæ›´å…·å…·ä½“è®¾å¤‡é€‚é…ã€‚</p>

<p>å­å…ƒç´ æ ·å¼ä¸ä¼šç»§æ‰¿çˆ¶äº²çš„ï¼Œè¿™å’Œcssä¼šç»§æ‰¿ä¸ä¸€æ ·ï¼ï¼</p>

<pre><code>ä»¥ä¸€æ•´æ£µæ ‘çš„æ–¹å¼ä¸€æ¬¡æ€§æ·»åŠ åˆ°è§†å›¾ä¸­ (append="tree")ï¼Œè¿˜æ˜¯
æ¯ä¸ªå­ç»„ä»¶éƒ½äº§ç”Ÿä¸€æ¬¡å•ç‹¬çš„æ·»åŠ åˆ°è§†å›¾çš„æŒ‡ä»¤ (append="node")
é»˜è®¤æƒ…å†µä¸‹ï¼Œé™¤äº† cell ç»„ä»¶çš„é»˜è®¤æ¸²æŸ“è¿‡ç¨‹æ˜¯ tree æ¨¡å¼ï¼Œå…¶å®ƒç»„ä»¶éƒ½é»˜è®¤æŒ‰ç…§ node æ¨¡å¼è¿›è¡Œæ¸²æŸ“ã€‚
</code></pre>

<p>åœ¨åŒç›®å½•ä¸‹åˆ›å»ºå’Œè¢«å°è£…ç»„ä»¶åŒåçš„ we æ–‡ä»¶ä¹‹å¤–ï¼Œåœ¨ script ä¸­é€šè¿‡ require å…¶å®ƒç›®å½•çš„ we æ–‡ä»¶å®šä¹‰åŒåç»„ä»¶ï¼Œåœ¨ä¸»æ–‡ä»¶ä¸‹æ–°å¢ element name=&ldquo;xxx&rdquo; æ ‡ç­¾ï¼Œname ç‰¹æ€§çš„å€¼ä¸ºæ–°åˆ›å»ºçš„ç»„ä»¶åï¼Œå…¶ element å†…éƒ¨çš„å†…å®¹æ˜¯å®šä¹‰è¯¥ç»„ä»¶çš„ä»£ç ã€‚ç»„ä»¶å„è‡ªçš„ style æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œä¸ä¼šæ‹…å¿ƒä¸åŒç»„ä»¶ä¸­ç›¸åŒçš„ class name ç›¸äº’å¹²æ‰°ã€‚ä¸è®ºé€šè¿‡çˆ¶ç»„ä»¶æŠŠæ•°æ®ä¼ é€’è¿›æ¥è¿˜æ˜¯åœ¨å½“å‰ç»„ä»¶å†…éƒ¨å¯¹æ•°æ®å‘èµ·ä¿®æ”¹ï¼Œåªæœ‰åœ¨ç»„ä»¶çš„ data é€‰é¡¹ä¸­æ˜ç¡®å†™æ˜çš„å­—æ®µæ‰ä¼šè¢«æ­£å¸¸çš„ç›‘å¬ã€‚å¦‚æœè‡ªå®šä¹‰ç»„ä»¶åœ¨çˆ¶ç»„ä»¶ä¸­æœ‰ id ç‰¹æ€§ï¼Œåˆ™å¯ä»¥åœ¨çˆ¶ç»„ä»¶ä¸Šä¸‹æ–‡ä¸­é€šè¿‡ this.$vm(id) æ¥å£æ¥è®¿é—®è¯¥è‡ªå®šä¹‰ç»„ä»¶çš„ä¸Šä¸‹æ–‡ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ this.$el(id) æ¥æ‰¾åˆ°å…¶èƒŒåçœŸå®çš„åŸç”Ÿç»„ä»¶ã€‚</p>

<pre><code> methods: {
      back2Top: function () {
        var el = this.$el('goto-top')
        dom.scrollToElement(el, { offset: 10 })
      }
    }
</code></pre>

<p>dataã€methodsã€computed ä¸­çš„å­—æ®µæ˜¯ä¸èƒ½ç›¸äº’é‡å¤çš„ï¼Œå› ä¸ºå®ƒä»¬éƒ½ä¼šé€šè¿‡ç»„ä»¶å®ä¾‹çš„ this è®¿é—®åˆ°ã€‚</p>

<p>this.$vm(id) æ–¹æ³•å¯ä»¥è®¿é—®è‡ªå®šä¹‰å­ç»„ä»¶çš„ä¸Šä¸‹æ–‡,å½“å‰ä¸Šä¸‹æ–‡ä¸­çš„ this._parent (å°†æ”¹ä¸º this.$parent)å¯ä»¥è·å–å…¶çˆ¶çº§ä¸Šä¸‹æ–‡ã€‚</p>

<pre><code> methods: {
      update: function (e) {
        this.$vm('sub').setTitle('Updated')
      }
    }
</code></pre>

<p>ä»å­ç»„ä»¶å‘çˆ¶ç»„ä»¶é€šä¿¡ï¼Œé¦–å…ˆçˆ¶ç»„ä»¶è¦ç›‘å¬ç‰¹å®šç±»å‹çš„è‡ªå®šä¹‰äº‹ä»¶ï¼Œè€Œå­ç»„ä»¶å¯ä»¥ä½¿ç”¨ this.<em>parent æ‰¾åˆ°çˆ¶ç»„ä»¶ï¼Œç„¶åå†è°ƒç”¨ this.</em>parent.$emit(type, detail) æ–¹æ³•ï¼Œå³å¯å®ç°è‡ªä¸‹è€Œä¸Šçš„é€šä¿¡ã€‚
this.$on(name, handler) ç”¨äºç›‘å¬name å‡½æ•°ï¼Œthis.$emit(name, detail) ç”¨äºè§¦å‘nameå‡½æ•°ï¼Œé€šè¿‡event.detailä¼ å‚æ•°ï¼Œæ˜¯ä¸ªjsonå¯¹è±¡ã€‚</p>

<pre><code>//å­ç»„ä»¶ä¸­æƒ³è§¦å‘çˆ¶ç»„ä»¶çš„ notify æ–¹æ³•ã€‚
methods: {
        test: function () {
          this._parent.$emit('notify', {a: 1})
        }
      }
 //çˆ¶ç»„ä»¶ä¸­ç›‘å¬ notify æ˜¯å¦è¢«è§¦å‘ï¼Œ      
 created: function () {
      this.$on('notify', function(event) {
        this.eventType = event.type
        this.eventDetail = JSON.stringify(event.detail)
      })
    }
</code></pre>

<p>ä»çˆ¶ç»„ä»¶å‘å­ç»„ä»¶é€šä¿¡ï¼Œé¦–å…ˆå­ç»„ä»¶è¦ç›‘å¬ç‰¹å®šç±»å‹çš„è‡ªå®šä¹‰äº‹ä»¶ï¼Œè€Œçˆ¶ç»„ä»¶å¯ä»¥ä½¿ç”¨ this.$vm(id) æ‰¾åˆ°å­ç»„ä»¶ï¼Œç„¶åå†è°ƒç”¨ this.$vm(id).$emit(type, detail) æ–¹æ³•ï¼Œå³å¯å®ç°è‡ªä¸Šè€Œä¸‹çš„é€šä¿¡ã€‚</p>

<h4>å¼€å‘æŠ€å·§</h4>

<p>å®˜æ–¹<code>weex inint xxx</code> å»ºçš„é¡¹ç›®æœ‰ç‚¹ä¹±ï¼Œæ‰«ä¸€æ‰«ç­‰ä¸€å †æ²¡å¿…è¦çš„ä»£ç ç»™æ–°æ‰‹å¢åŠ å¤æ‚åº¦ã€‚è¿˜æ˜¯æ–°å»ºä¸€ä¸ªOCé¡¹ç›®ï¼Œpod å¯¼å…¥Weex:</p>

<pre><code>source 'https://github.com/CocoaPods/Specs.git'

target 'MyWeex_iOS' do
platform :ios, '7.0'
pod 'WeexSDK', '~&gt; 0.8.0'
end
</code></pre>

<p>ç„¶åçœŸæ­£éœ€è¦çš„ä»£ç å¾ˆå°‘çš„ï¼Œä¸éœ€è¦æ‰«ä¸€æ‰«æ‰èƒ½çœ‹äº†!</p>

<pre><code>@interface AppDelegate ()
@end

@implementation AppDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions{
    self.window = [[UIWindow alloc] initWithFrame:[UIScreen mainScreen].bounds];
    self.window.backgroundColor = [UIColor whiteColor];

    [WXSDKEngine initSDKEnviroment];

    self.window.rootViewController = [[ViewController alloc] init];
    [self.window makeKeyAndVisible];

    return YES;
}

@end
</code></pre>

<p>ç„¶åå¼€å¯å®ƒçš„ç›‘å¬ï¼Œ<code>weex index.we  -o . --watch</code>ï¼Œè¿™æ ·æ¯æ¬¡ä¿®æ”¹å°±ä¼šè‡ªåŠ¨ç¼–è¯‘weexæ–‡ä»¶äº†ï¼Œç„¶åXcodeå†è¿è¡Œå°±å¯ä»¥äº†ï¼æŠŠLOCAL_HOSTæ”¹æˆæœ¬åœ°IPåœ°å€å°±å¯åœ¨çœŸæœºä¸Šè¿è¡Œäº†ã€‚</p>

<pre><code>#import "ViewController.h"
#define LOCAL_HOST @"127.0.0.1"
#define INDEX_URL [NSString stringWithFormat:@"http://%@:8081/weex_tmp/h5_render/index.js",LOCAL_HOST]


@interface ViewController ()

@end

@implementation ViewController
@synthesize instance,weexView;


- (void)viewDidLoad{
    [super viewDidLoad];
    self.view.backgroundColor = [UIColor redColor];

    [self renderView];
}


- (void)dealloc{
    [instance destroyInstance];
}

- (void)renderView{
    CGFloat width = self.view.frame.size.width;
    CGFloat height = self.view.frame.size.height;

    [instance destroyInstance];
    instance = [[WXSDKInstance alloc] init];
    instance.viewController = self;
    instance.frame = CGRectMake(0, 0, width,height);

    __weak typeof(self) weakSelf = self;
    instance.onCreate = ^(UIView *view) {
        [weakSelf.weexView removeFromSuperview];
        weakSelf.weexView = view;
        [weakSelf.view addSubview:weakSelf.weexView];
    };

    instance.onFailed = ^(NSError *error) {
       NSLog(@"%@", @"Render Failed...");
    };

    instance.renderFinish = ^(UIView *view) {
         NSLog(@"%@", @"Render Finish...");

    };

    instance.updateFinish = ^(UIView *view) {
        NSLog(@"%@", @"Update Finish...");
    };

    [instance renderWithURL:[NSURL URLWithString:INDEX_URL] options:nil data:nil];
}
@end
</code></pre>

<p><strong>$dispatch åªèƒ½æ˜¯å­ç»„ä»¶å‘çˆ¶ç»„ä»¶é€šä¿¡ï¼Œ $broadcast åªèƒ½æ˜¯çˆ¶ç»„ä»¶å‘å­ç»„ä»¶é€šä¿¡ï¼Œåè¿‡æ¥éƒ½ä¸è¡Œï¼</strong></p>
</div>
  
  


      | <a href="/blog/2016/12/20/weex/#comments">Comments</a>


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/12/19/vue/">Vue</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-12-19T11:58:13+08:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>19</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>11:58 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h4>Vue</h4>

<p><a href="https://cn.vuejs.org/">Vue</a>æ˜¯ä¸€ä¸ªJavaScript MVVMåº“ï¼Œå®ƒæ˜¯ä»¥<strong>æ•°æ®é©±åŠ¨å’Œç»„ä»¶åŒ–</strong>çš„æ€æƒ³æ„å»ºçš„ã€‚ç›¸æ¯”äºAngularï¼ŒVueæä¾›äº†æ›´åŠ ç®€æ´ã€æ›´æ˜“äºç†è§£çš„APIï¼Œä½¿å¾—æˆ‘ä»¬èƒ½å¤Ÿå¿«é€Ÿåœ°ä¸Šæ‰‹å¹¶ä½¿ç”¨Vueã€‚å› ä¸ºVueæ˜¯æ•°æ®é©±åŠ¨çš„ï¼Œæ‰€ä»¥æ— éœ€æ‰‹åŠ¨æ“ä½œDOMã€‚å®ƒé€šè¿‡ä¸€äº›ç‰¹æ®Šçš„HTMLè¯­æ³•ï¼Œå°†DOMå’Œæ•°æ®ç»‘å®šèµ·æ¥ã€‚ä¸€æ—¦åˆ›å»ºäº†ç»‘å®šï¼ŒDOMå°†å’Œæ•°æ®ä¿æŒåŒæ­¥ï¼Œæ¯å½“å˜æ›´äº†æ•°æ®ï¼ŒDOMä¹Ÿä¼šç›¸åº”åœ°æ›´æ–°ã€‚å½“ç„¶äº†ï¼Œåœ¨ä½¿ç”¨Vueçš„åŒæ—¶æ—¶ï¼Œä¹Ÿå¯ä»¥ç»“åˆå…¶ä»–åº“ä¸€èµ·ä½¿ç”¨ï¼Œæ¯”å¦‚jQueryã€‚
<img src="/myimg/js/vue.png" alt="" /></p>

<p>ViewModelæ˜¯Vueçš„æ ¸å¿ƒï¼Œå®ƒæ˜¯ä¸€ä¸ªVueå®ä¾‹ã€‚Vueå®ä¾‹æ˜¯ä½œç”¨äºæŸä¸€ä¸ªHTMLå…ƒç´ ä¸Šçš„ï¼Œè¿™ä¸ªå…ƒç´ å¯ä»¥æ˜¯HTMLçš„bodyå…ƒç´ ï¼Œä¹Ÿå¯ä»¥æ˜¯æŒ‡å®šäº†idçš„æŸä¸ªå…ƒç´ ã€‚å½“åˆ›å»ºäº†ViewModelåï¼Œæ•°æ®å°±å·²ç»åŒå‘ç»‘å®šå¥½äº†ã€‚å¦‚ä¸Šå›¾æ‰€ç¤ºï¼šå¯ä»¥å°†ä¸Šå›¾ä¸­çš„DOM Listenerså’ŒData Bindingsçœ‹ä½œä¸¤ä¸ªå·¥å…·ï¼Œå®ƒä»¬æ˜¯å®ç°åŒå‘ç»‘å®šçš„å…³é”®ã€‚</p>

<ol>
<li>ä»Viewä¾§çœ‹ï¼ŒViewModelä¸­çš„DOM Listenerså·¥å…·ä¼šå¸®æˆ‘ä»¬ç›‘æµ‹é¡µé¢ä¸ŠDOMå…ƒç´ çš„å˜åŒ–ï¼Œå¦‚æœæœ‰å˜åŒ–ï¼Œåˆ™æ›´æ”¹Modelä¸­çš„æ•°æ®ã€‚</li>
<li>ä»Modelä¾§çœ‹ï¼Œå½“æˆ‘ä»¬æ›´æ–°Modelä¸­çš„æ•°æ®æ—¶ï¼ŒData Bindingså·¥å…·ä¼šå¸®æˆ‘ä»¬æ›´æ–°é¡µé¢ä¸­çš„DOMå…ƒç´ ã€‚</li>
</ol>


<p>Vueä¹ŸåƒAngularä¼¼çš„ï¼Œæ˜¯é€šè¿‡æ‰©å±•å…ƒç´ çš„å±æ€§æ¥å¤„ç†çš„ï¼Œæ‰©å±•çš„å±æ€§è¢«ç§°ä¸º<code>æŒ‡ä»¤</code>ï¼Œå¦‚ v-model, v-if, v-else, v-bind ,v-show ç­‰ã€‚</p>

<p><img src="/myimg/js/vue1.png" alt="" />
ç»„ä»¶ç³»ç»Ÿæ˜¯ Vue.js å¦ä¸€ä¸ªé‡è¦æ¦‚å¿µï¼Œå°±åƒä¸Šå›¾æ‰€ç¤ºï¼ŒæŠŠä¸€ä¸ªä¸ª <code>Vue</code> ç»„ä»¶ç»„åˆèµ·æ¥å°±å¯ä»¥äº†ï¼Œå„ä¸ªç»„ä»¶éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ä¸ªä½“ï¼Œå°±åƒæ­ç§¯æœ¨ä¸€æ ·ã€‚</p>

<p><strong>v-model ï¼š</strong> å¯ä»¥ç»‘å®šè¡¨å•å…ƒç´ å¦‚imput,select,textareaçš„å€¼.ä¸‹é¢å°†inputå…ƒç´ çš„å€¼å’Œmessageç»‘å®šã€‚1ï¼šå½“æ–‡æœ¬æ¡†çš„å€¼æ”¹å˜æ—¶ï¼Œ<code>/{/{ message /}/}</code>ä¼šè‡ªåŠ¨æ›´æ–°ï¼Œ2ï¼šå½“messageçš„å€¼æ”¹å˜æ—¶ï¼Œæ–‡æœ¬æ¡†çš„å€¼ä¹Ÿä¼šè¢«æ›´æ–°, è¿™å°±å«æ•°æ®åŒå‘ç»‘å®šã€‚(å¿½ç•¥/,å› ä¸ºMarkDownè½¬åŒ–ä¸äº†æ‰€ä»¥åŠ çš„)</p>

<pre><code>&lt;div id="app"&gt;
    &lt;p&gt;/{/{ message /}/}&lt;/p&gt;
    &lt;input type="text" v-model="message"/&gt;
&lt;/div&gt;
</code></pre>

<p><strong>v-if ï¼š</strong> æ˜¯æ¡ä»¶æ¸²æŸ“æŒ‡ä»¤ï¼Œå®ƒæ ¹æ®è¡¨è¾¾å¼çš„çœŸå‡æ¥åˆ é™¤å’Œæ’å…¥å…ƒç´ ã€‚å¦‚<code>&lt;h1 v-if="age &gt;= 25"&gt;Age = &lt;/h1&gt;</code>,å½“age&lt;25æ—¶ï¼Œæ•´ä¸ªh1å…ƒç´ éƒ½ä¸æ˜¾ç¤ºï¼Œè€Œä¸”å°±htmlå°±æ²¡æœ‰è¯¥èŠ‚ç‚¹ï¼Œä¸åƒ<code>v-show</code>æ˜¯æœ‰è¯¥èŠ‚ç‚¹ï¼Œç„¶åè®¾ç½®èŠ‚ç‚¹ display = noneã€‚</p>

<p><strong>v-show :</strong> ä¹Ÿæ˜¯æ¡ä»¶æ¸²æŸ“æŒ‡ä»¤ï¼Œå’Œv-ifæŒ‡ä»¤ä¸åŒçš„æ˜¯ï¼Œä½¿ç”¨v-showæŒ‡ä»¤çš„å…ƒç´ å§‹ç»ˆä¼šè¢«æ¸²æŸ“åˆ°HTMLï¼Œå®ƒåªæ˜¯ç®€å•åœ°ä¸ºå…ƒç´ è®¾ç½®CSSçš„styleå±æ€§æ˜¯ä¸æ˜¯style=&ldquo;display:none"ã€‚</p>

<p><strong>v-else :</strong>v-elseå…ƒç´ å¿…é¡»ç«‹å³è·Ÿåœ¨v-ifæˆ–v-showå…ƒç´ çš„åé¢ï¼Œå¦åˆ™å®ƒä¸èƒ½è¢«è¯†åˆ«ã€‚</p>

<pre><code>&lt;div id="app"&gt;
    &lt;h1 v-if="age &gt;= 25"&gt;Age: &lt;/h1&gt;
    &lt;h1 v-else&gt;ageä¸å¤§äº25&lt;/h1&gt;

    &lt;h1 v-show="age &gt;= 25"&gt;Age: &lt;/h1&gt;
    &lt;h1 v-else&gt;ageä¸å¤§äº25&lt;/h1&gt;
&lt;/div&gt;
</code></pre>

<p>ä¸Šé¢ä»£ç ä¸­å¦‚æœageå¤§äº25ï¼Œåé¢çš„v-elseéƒ½ä¸ä¼šæ¸²æŸ“åˆ°HTMLã€‚</p>

<p><strong>v-for :</strong> åŸºäºä¸€ä¸ªæ•°ç»„æ¸²æŸ“ä¸€ä¸ªåˆ—è¡¨ï¼Œå®ƒå’ŒJavaScriptçš„éå†è¯­æ³•ç›¸ä¼¼.å¯ä»¥ç”¨ <code>in</code>ä»£æ›¿ã€‚</p>

<pre><code>&lt;tr v-for="person in personArray"&gt;
  &lt;td&gt;/{/{ person.name}}&lt;/td&gt; &lt;td&gt;/{/{ person.age}}&lt;/td&gt;
&lt;/tr&gt;
</code></pre>

<p><strong>v-bind :</strong>å¯ä»¥åœ¨å…¶åç§°åé¢å¸¦ä¸€ä¸ªå‚æ•°ï¼Œä¸­é—´æ”¾ä¸€ä¸ªå†’å·éš”å¼€ï¼Œè¿™ä¸ªå‚æ•°é€šå¸¸æ˜¯å…ƒç´ çš„å±æ€§å€¼è®¾ç½®ï¼Œå¦‚ <code>&lt;h1 v-bind="class:age&gt;=25?'old':'young'"&gt;class å±æ€§å€¼è®¾ç½®&lt;/h1&gt;</code>,å½“ageå¤§äº25ï¼Œclass=old,å¦åˆ™class=youngã€‚</p>

<p><strong>v-on :</strong>ç”¨äºç»‘å®šDOMäº‹ä»¶ï¼Œå¦‚<code>&lt;h1 v-on:click="showAlert"&gt;ç‚¹å‡»&lt;/h1&gt;</code>ï¼Œå†åœ¨methodsé‡Œå®ç°å¯¹åº”æ–¹æ³•åçš„æ–¹æ³•ã€‚</p>

<pre><code>methods: {
 showAlert: function() {
     alert("ç‚¹å‡»å•¦ï¼ï¼")
  }
}
</code></pre>

<p>v-bindæŒ‡ä»¤å¯ä»¥ç¼©å†™ä¸ºä¸€ä¸ªå†’å· <code>:</code>ï¼Œv-onæŒ‡ä»¤å¯ä»¥ç¼©å†™ä¸º<code>@</code>ç¬¦å·ã€‚</p>

<p><code>v-bind:class="xxx"</code> &ndash;> <code>:class="xxx"</code>,  <code>v-on:click="showAlert"</code> &ndash;> <code>@click="greet"&gt;</code></p>

<p>ä¸‹é¢æ˜¯è‡ªå®šä¹‰ä¸€ä¸ªç»„ä»¶å«my-component.åƒReactä¼¼çš„ï¼Œä¹Ÿæ˜¯é€šè¿‡<code>props</code>æ¥ä¼ å‚æ•°å€¼ã€‚v-bind æ„æ€æ˜¯ç»™å±æ€§ç»‘å®šå€¼ï¼Œä¸‹é¢æ˜¯ç»™item å±æ€§ç»‘å®š data, è€Œ item è¿™ä¸ªå±æ€§åå­—æ˜¯åœ¨ <code>props: ['item'],</code> è¿™é‡Œå®šä¹‰çš„ï¼Œdata æ˜¯å‰é¢ v-for ä»dataArray é‡Œå–å‡ºæ¥çš„ã€‚</p>

<pre><code>&lt;div id="app"&gt;
    &lt;ol&gt;
        &lt;my-component v-for="data in dataArray" v-bind:item="data" /&gt;
    &lt;/ol&gt;
&lt;/div&gt;

&lt;script&gt;
    Vue.component('my-component', {
        props: ['item'],
        template: '&lt;li&gt;&lt;/li&gt;'
    })
    var app = new Vue({
        el: '#app',
        data: {
            dataArray: [
                {text: 'hello'},
                {text: 'world'},
            ]
        }
    })
&lt;/script&gt;
</code></pre>

<p>Vue çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°æœ‰ init,created,ready,mounted,updated,destroyedç­‰ã€‚
<img src="/myimg/js/lifecycle.png" width="400" alt="" /></p>

<p><strong>v-once :</strong> ä½¿ç”¨è¿™ä¸ªæŒ‡ä»¤çš„è¯å€¼åªä¼šæ’å…¥ä¸€æ¬¡ï¼Œä¹‹åæ•°æ®å†æ”¹å˜å°±ä¸ä¼šæ›´æ–°äº†ï¼Œè¿™ä¼šå½±å“åˆ°è¯¥èŠ‚ç‚¹ä¸Šæ‰€æœ‰çš„æ•°æ®ç»‘å®šã€‚</p>

<p>åŒå¤§æ‹¬å·ä¼šå°†æ•°æ®è§£é‡Šä¸ºçº¯æ–‡æœ¬ï¼Œè€Œé HTML ã€‚ä¸ºäº†è¾“å‡ºçœŸæ­£çš„ HTML ï¼Œä½ éœ€è¦ä½¿ç”¨ v-html æŒ‡ä»¤ã€‚</p>

<p>åƒAngularä¸€æ ·ï¼Œä¹Ÿæœ‰è¿‡æ»¤å™¨ï¼Œæˆ–è‡ªå®šä¹‰è¿‡æ»¤å™¨ï¼š message | capitalize ã€‚è¿‡æ»¤å™¨å‡½æ•°æ€»æ¥å—è¡¨è¾¾å¼çš„å€¼ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ã€‚</p>

<pre><code>filters: {
    capitalize: function (value) {
      if (!value) return ''
      value = value.toString()
      return value.charAt(0).toUpperCase() + value.slice(1)
    }
  }
</code></pre>

<p>åœ¨ <code>computed</code> æ·»åŠ è®¡ç®—å‹å±æ€§ï¼šä¸‹é¢æ˜¯ä¸€ä¸ªè®¡ç®—å‹å±æ€§myMsg, é€šè¿‡è·å–dataä¸­çš„msgå±æ€§æ¥å¤„ç†ï¼Œç„¶åè¿”å›å¤„ç†ç»“æœã€‚é€šè¿‡<code>methods</code>é‡Œå®šä¹‰æ–¹æ³•ä¹Ÿèƒ½è¾¾åˆ°ç›¸åŒçš„æ•ˆæœï¼Œä½†<strong>è®¡ç®—å±æ€§æ˜¯åŸºäºå®ƒçš„ä¾èµ–ç¼“å­˜ã€‚è®¡ç®—å±æ€§åªæœ‰åœ¨å®ƒçš„ç›¸å…³ä¾èµ–å‘ç”Ÿæ”¹å˜æ—¶æ‰ä¼šé‡æ–°å–å€¼ã€‚è¿™å°±æ„å‘³ç€åªè¦ msg æ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼Œå¤šæ¬¡è®¿é—® myMsg è®¡ç®—å±æ€§ä¼šç«‹å³è¿”å›ä¹‹å‰çš„è®¡ç®—ç»“æœï¼Œè€Œä¸å¿…å†æ¬¡æ‰§è¡Œå‡½æ•°ã€‚è€Œ method è°ƒç”¨æ€»ä¼šæ‰§è¡Œå‡½æ•°ã€‚</strong></p>

<pre><code> computed: {
    myMsg: function () {
      return this.msg.split('').reverse().join('')
    }
  }
</code></pre>

<p>è¿˜æœ‰ <code>watch</code> å®ƒç”¨äºè§‚å¯Ÿ Vue å®ä¾‹ä¸Šçš„æ•°æ®å˜åŠ¨ã€‚ä¸‹é¢æ˜¯è§‚å¯Ÿmsg,å¦‚æœmsgå˜åŠ¨å°±ä¼šæ‰§è¡Œæ–¹æ³•ç»™myMsgèµ‹å€¼ã€‚æ–¹æ³•æ˜¯å¼‚æ­¥æ“ä½œã€‚</p>

<pre><code>watch: {
    msg: function (val) {
      this.myMsg = val + 'hello'
    },
  }
</code></pre>

<p>è®¡ç®—å±æ€§é»˜è®¤åªæœ‰ getter ï¼Œä¸è¿‡åœ¨éœ€è¦æ—¶ä½ ä¹Ÿå¯ä»¥æä¾›ä¸€ä¸ª setter ï¼š</p>

<pre><code>computed: {
  myMsg: {
    get: function () {
      return "xxx"
    },
    set: function (newValue) {
      //do something
    }
  }
}
</code></pre>

<p><strong>v-bind</strong>å¢å¼ºç‰ˆ 1.<code>&lt;div v-bind:class="{ active: isActive }"&gt;&lt;/div&gt;</code>,å¦‚æœisActiveä¸ºtrue,calss = active.</p>

<p>2.<code>&lt;div v-bind:class="classObject"&gt;&lt;/div&gt;</code> ç›´æ¥ç»‘å®šä¸€ä¸ªå¯¹è±¡ã€‚å½“åœ¨ä¸€ä¸ª<strong>å®šåˆ¶</strong>çš„ç»„ä»¶ä¸Šç”¨åˆ° class å±æ€§çš„æ—¶å€™ï¼Œè¿™äº›ç±»å°†è¢«æ·»åŠ åˆ°<strong>æ ¹å…ƒç´ </strong>ä¸Šé¢ï¼Œè¿™ä¸ªå…ƒç´ ä¸Šå·²ç»å­˜åœ¨çš„ç±»ä¸ä¼šè¢«è¦†ç›–ã€‚</p>

<pre><code>data: {
  classObject: {
    active: true,
    'text-danger': false
  }
}
</code></pre>

<p>å¯¹è±¡è¯­æ³•ï¼Œv-bind:style çš„å¯¹è±¡è¯­æ³•ååˆ†ç›´è§‚â€”â€”çœ‹ç€éå¸¸åƒ CSS ï¼Œå…¶å®å®ƒæ˜¯ä¸€ä¸ª JavaScript å¯¹è±¡ã€‚ CSS å±æ€§åå¯ä»¥ç”¨é©¼å³°å¼ï¼ˆcamelCaseï¼‰æˆ–çŸ­æ¨ªåˆ†éš”å‘½åï¼ˆkebab-caseï¼‰ï¼š</p>

<pre><code>//1.
&lt;div v-bind:style="{ color: activeColor, fontSize: fontSize + 'px' }"&gt;&lt;/div&gt;
data: {
  activeColor: 'red',
  fontSize: 30
}

//2.
&lt;div v-bind:style="styleObject"&gt;&lt;/div&gt;
data: {
  styleObject: {
    color: 'red',
    fontSize: '13px'
  }
}
</code></pre>

<p>Vue ä¼šå¤ç”¨å·²æœ‰å…ƒç´ è€Œä¸æ˜¯ä»å¤´å¼€å§‹æ¸²æŸ“ã€‚å¯é€šè¿‡è®¾ç½®key å€¼æ¥å”¯ä¸€åŒºåˆ†ï¼Œå°±ä¸ä¼šå¤ç”¨äº†ã€‚è¿™ä¸ªç±»ä¼¼ Vue 1.x çš„ track-by=&ldquo;$index&rdquo; ã€‚</p>

<p>ä¸‹é¢çš„æ•°ç»„æ–¹æ³•ä¹Ÿä¼šè§¦å‘åˆ·æ–°,è€Œfilter(), concat(), slice() ã€‚è¿™äº›ä¸ä¼šæ”¹å˜åŸå§‹æ•°ç»„ï¼Œä½†æ€»æ˜¯è¿”å›ä¸€ä¸ªæ–°æ•°ç»„ã€‚</p>

<pre><code>push()
pop()
shift()
unshift()
splice()
sort()
reverse()
</code></pre>

<p>äº‹ä»¶ä¿®é¥°ç¬¦ï¼š</p>

<pre><code>.once
.stop //é˜»æ­¢äº‹ä»¶å†’æ³¡
.prevent //å–æ¶ˆäº‹ä»¶é»˜è®¤å¤„ç†
.capture //å¼€å¯äº‹ä»¶æ•è·
.self
.once
.ctrl
.alt
.shift
.meta
</code></pre>

<p>æŒ‰é”®åˆ«åï¼šå¯ä»¥é€šè¿‡å…¨å±€ config.keyCodes å¯¹è±¡è‡ªå®šä¹‰æŒ‰é”®ä¿®é¥°ç¬¦åˆ«åã€‚(Vue.config.keyCodes.f1 = 112)</p>

<pre><code>.enter
.tab
.delete (æ•è· â€œåˆ é™¤â€ å’Œ â€œé€€æ ¼â€ é”®)
.esc
.space
.up
.down
.left
.right
</code></pre>

<p>ç”±äº JavaScript çš„é™åˆ¶ï¼Œ Vue ä¸èƒ½æ£€æµ‹ä»¥ä¸‹å˜åŠ¨çš„æ•°ç»„ï¼šå½“ä½ åˆ©ç”¨ç´¢å¼•ç›´æ¥è®¾ç½®ä¸€ä¸ªé¡¹æ—¶ï¼Œä¾‹å¦‚ï¼švm.items[indexOfItem] = newValueå½“ä½ ä¿®æ”¹æ•°ç»„çš„é•¿åº¦æ—¶ï¼Œä¾‹å¦‚ï¼š vm.items.length = newLengthä¸ºäº†é¿å…ç¬¬ä¸€ç§æƒ…å†µï¼Œä»¥ä¸‹ä¸¤ç§æ–¹å¼å°†è¾¾åˆ°åƒ vm.items[indexOfItem] = newValue çš„æ•ˆæœï¼Œ åŒæ—¶ä¹Ÿå°†è§¦å‘çŠ¶æ€æ›´æ–°ï¼š</p>

<pre><code>1.Vue.set(example1.items, indexOfItem, newValue)
2.example1.items.splice(indexOfItem, 1, newValue)
</code></pre>

<p>é¿å…ç¬¬äºŒç§æƒ…å†µï¼Œä½¿ç”¨ spliceï¼š<code>example1.items.splice(newLength)</code></p>

<pre><code>//è‡ªå®šä¹‰å…¨å±€ç»„ä»¶
Vue.component('my-component', {

})
//è‡ªå®šä¹‰å±€éƒ¨ç»„ä»¶
var Child = {
  template: '&lt;div&gt;A custom component!&lt;/div&gt;'
}
new Vue({
  components: {
    // &lt;my-component&gt; å°†åªåœ¨çˆ¶æ¨¡æ¿å¯ç”¨
    'my-component': Child
  }
})
</code></pre>

<p>çˆ¶ç»„ä»¶é€šè¿‡ props å‘ä¸‹ä¼ é€’æ•°æ®ç»™å­ç»„ä»¶ï¼Œå­ç»„ä»¶é€šè¿‡ events ç»™çˆ¶ç»„ä»¶å‘é€æ¶ˆæ¯ã€‚prop æ˜¯çˆ¶ç»„ä»¶ç”¨æ¥ä¼ é€’æ•°æ®çš„ä¸€ä¸ªè‡ªå®šä¹‰å±æ€§ã€‚å­ç»„ä»¶éœ€è¦æ˜¾å¼åœ°ç”¨ props é€‰é¡¹å£°æ˜ â€œpropâ€ã€‚propçš„åå­—å½¢å¼ä¼šä» camelCase è½¬ä¸º kebab-caseã€‚ï¼ˆmyMessage &ndash;> my-messageï¼‰</p>

<p>prop æ˜¯å•å‘ç»‘å®šçš„ï¼šå½“çˆ¶ç»„ä»¶çš„å±æ€§å˜åŒ–æ—¶ï¼Œå°†ä¼ å¯¼ç»™å­ç»„ä»¶ï¼Œä½†æ˜¯ä¸ä¼šåè¿‡æ¥ã€‚æ¯æ¬¡çˆ¶ç»„ä»¶æ›´æ–°æ—¶ï¼Œå­ç»„ä»¶çš„æ‰€æœ‰ prop éƒ½ä¼šæ›´æ–°ä¸ºæœ€æ–°å€¼ã€‚è¿™æ„å‘³ç€ä½ ä¸åº”è¯¥åœ¨å­ç»„ä»¶å†…éƒ¨æ”¹å˜ prop ã€‚å¦‚æœä½ è¿™ä¹ˆåšäº†ï¼ŒVue ä¼šåœ¨æ§åˆ¶å°ç»™å‡ºè­¦å‘Šã€‚</p>

<p>æ”¹å˜ prop å¯é€šè¿‡ä¸¤ç§æ–¹æ³•æ›²çº¿æ•‘å›½ï¼šå°±åƒReact propsä¹Ÿä¸åº”è¯¥ä¿®æ”¹ï¼Œè€Œæ˜¯ä¿®æ”¹stateé‡Œçš„å±æ€§ä¸€æ ·ã€‚</p>

<pre><code>1.prop ä½œä¸ºåˆå§‹å€¼ä¼ å…¥ï¼Œå­ç»„ä»¶ä¹‹ååªæ˜¯å°†å®ƒçš„åˆå§‹å€¼ä½œä¸ºæœ¬åœ°æ•°æ®çš„åˆå§‹å€¼ä½¿ç”¨ï¼›
2.prop ä½œä¸ºéœ€è¦è¢«è½¬å˜çš„åŸå§‹å€¼ä¼ å…¥ã€‚
</code></pre>

<p>åƒReactä¸€æ ·ï¼Œpropsä¹Ÿå¯ä»¥æŒ‡å®šç±»å‹ï¼šStringï¼ŒNumberï¼ŒBooleanï¼ŒFunctionï¼ŒObjectï¼ŒArrayã€‚type ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰æ„é€ å™¨ï¼Œä½¿ç”¨ instanceof æ£€æµ‹ã€‚</p>

<pre><code> props: {
    // åŸºç¡€ç±»å‹æ£€æµ‹ ï¼ˆ`null` æ„æ€æ˜¯ä»»ä½•ç±»å‹éƒ½å¯ä»¥ï¼‰
    propA: Number,
    // å¤šç§ç±»å‹
    propB: [String, Number],
    // å¿…ä¼ ä¸”æ˜¯å­—ç¬¦ä¸²
    propC: {
      type: String,
      required: true
    },
    // æ•°å­—ï¼Œæœ‰é»˜è®¤å€¼
    propD: {
      type: Number,
      default: 100
    },
    // æ•°ç»„ï¼å¯¹è±¡çš„é»˜è®¤å€¼åº”å½“ç”±ä¸€ä¸ªå·¥å‚å‡½æ•°è¿”å›
    propE: {
      type: Object,
      default: function () {
        return { message: 'hello' }
      }
    },
    // è‡ªå®šä¹‰éªŒè¯å‡½æ•°
    propF: {
      validator: function (value) {
        return value &gt; 10
      }
    }
  }
</code></pre>

<p>çˆ¶ç»„ä»¶æ˜¯ä½¿ç”¨ props ä¼ é€’æ•°æ®ç»™å­ç»„ä»¶ï¼Œä½†å¦‚æœå­ç»„ä»¶è¦æŠŠæ•°æ®ä¼ é€’å›å»ï¼Œåº”è¯¥æ€æ ·åšï¼Ÿé‚£å°±æ˜¯è‡ªå®šä¹‰äº‹ä»¶ï¼</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ä½¿ç”¨ $on(eventName) ç›‘å¬äº‹ä»¶
</span><span class='line'>ä½¿ç”¨ $emit(eventName) è§¦å‘äº‹ä»¶</span></code></pre></td></tr></table></div></figure>


<p>è‡ªå®šä¹‰ç»„ä»¶æ¨¡æ¿ï¼š</p>

<pre><code>&lt;body&gt;
    &lt;div id="app"&gt;
        &lt;my-component v-bind:my-name="name" v-bind:my-age="age"&gt;&lt;/my-component&gt;
    &lt;/div&gt;

    &lt;template id="myComponent"&gt;
        &lt;table&gt;
            &lt;tr&gt;
                &lt;th colspan="2"&gt;
                    å­ç»„ä»¶æ•°æ®
                &lt;/th&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;my name&lt;/td&gt;
                &lt;td&gt;&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;my age&lt;/td&gt;
                &lt;td&gt;&lt;/td&gt;
            &lt;/tr&gt;
        &lt;/table&gt;
    &lt;/template&gt;
&lt;/body&gt;

&lt;script&gt;
    var vm = new Vue({
        el: '#app',
        data: {
            name: 'andy',
            age: 18
        },
        components: {
            'my-component': {
                template: '#myComponent',
                props: ['myName', 'myAge']
            }
        }
    })
&lt;/script&gt;

-------------------------------
&lt;script type="text/x-template" id="myCom"&gt;
  &lt;div&gt;
    &lt;p&gt;hello&lt;/p&gt;
  &lt;/div&gt;
&lt;/script&gt;

Vue.component('my-com', {
  template: '#myCom',
})                          
</code></pre>

<p>v-bind:my-name.sync=&ldquo;name&rdquo; è¿™æ˜¯ç”¨åœ¨å­ç»„ä»¶å±æ€§ä¸­ .sync æ„æ€æ˜¯å­ç»„ä»¶çš„æ•°æ®ä¼šå½±å“çˆ¶ç»„ä»¶ï¼Œé»˜è®¤æ˜¯ä¸ä¼šçš„çš„ã€‚</p>

<p>.once ç”¨å­å­ç»„ä»¶å±æ€§ä¸­ï¼Œè¡¨ç¤ºåªç»‘å®šä¸€æ¬¡çˆ¶ç»„ä»¶çš„æ•°æ®ã€‚</p>

<p>ç†Ÿæ‚‰å€¼ä¸èƒ½ç”¨åŒæ‹¬å·ç»‘å®šå€¼ï¼Œåªèƒ½ç”¨ v-bind ç»‘å®šã€‚åœ¨ v-bind ç”¨äº class å’Œ style å±æ€§æ—¶ï¼Œ è¡¨è¾¾å¼çš„ç»“æœç±»å‹é™¤äº†å­—ç¬¦ä¸²ä¹‹å¤–ï¼Œè¿˜å¯ä»¥æ˜¯å¯¹è±¡æˆ–æ•°ç»„ã€‚</p>

<p>è®¡ç®—å‹å±æ€§ä¸æ–¹æ³•çš„åŒºåˆ«æ˜¯ï¼š è®¡ç®—å‹å±æ€§ä¼šæœ‰ç¼“å­˜ä¾èµ–ï¼Œä¸æ˜¯æ¯æ¬¡éƒ½ä¼šæ‰§è¡Œï¼Œåªæœ‰å€¼å˜äº†æ‰æ‰§è¡Œã€‚è€Œæ–¹æ³•æ˜¯æ¯æ¬¡éƒ½æ‰§è¡Œã€‚</p>

<p>Vue ä¼šå¤ç”¨æ§ä»¶ï¼Œç”¨keyå±æ€§æ¥åŒºåˆ†ä¸åŒæ§ä»¶ã€‚v-bind:key = &ldquo;$index&rdquo; ç›¸å½“äºVue 1.x çš„ track-by=&ldquo;$index&rdquo; ã€‚</p>

<p>æ³¨æ„ v-show ä¸æ”¯æŒ template è¯­æ³•ã€‚ template ç”¨ v-if . ä¸»è¦ show ä¸ if çš„åŒºåˆ«ï¼Œshow éƒ½æœ‰nodeï¼Œåªæ˜¯è®¾ç½® display å±æ€§ã€‚</p>

<p>v-for è¿­ä»£å¯¹è±¡çš„è¯æ˜¯è¿­ä»£å¯¹è±¡çš„å€¼ã€‚ è‡ªå®šä¹‰ç»„ä»¶ä½¿ç”¨v-for å€¼ä¹Ÿä¸ä¼šè‡ªåŠ¨ä¼ åˆ°ç»„ä»¶é‡Œå»ï¼Œè€Œè¦v-bind:item=&ldquo;item"ï¼Œç„¶åç»„ä»¶é‡Œç”¨props: [&lsquo;item&rsquo;] æ¥æ”¶ã€‚
ä¸è‡ªåŠ¨æ³¨å…¥ item åˆ°ç»„ä»¶é‡Œçš„åŸå› æ˜¯ï¼Œå› ä¸ºè¿™ä½¿å¾—ç»„ä»¶ä¼šç´§å¯†è€¦åˆåˆ° v-for å¦‚ä½•è¿ä½œã€‚åœ¨ä¸€äº›æƒ…å†µä¸‹ï¼Œæ˜ç¡®æ•°æ®çš„æ¥æºå¯ä»¥ä½¿ç»„ä»¶å¯é‡ç”¨ã€‚</p>

<p>æ–¹æ³•è°ƒç”¨çš„æ—¶å€™å¯ä»¥ç”¨ç‰¹æ®Šå˜é‡ $event æŠŠäº‹ä»¶ä¼ å…¥æ–¹æ³•é‡Œã€‚</p>

<p>v-model æŒ‡ä»¤åœ¨è¡¨å•æ§ä»¶å…ƒç´ ä¸Šåˆ›å»ºåŒå‘æ•°æ®ç»‘å®šã€‚å®ƒä¼šæ ¹æ®<code>æ§ä»¶ç±»å‹</code>è‡ªåŠ¨é€‰å–æ­£ç¡®çš„æ–¹æ³•æ¥æ›´æ–°å…ƒç´ ã€‚input,textarea,selectï¼Œå•é€‰æ¡†ï¼Œå¤é€‰æ¡†ã€‚</p>

<p>å¯¹äºé™åˆ¶æ€§å…ƒç´ ï¼Œå¯ä»¥ç”¨ is  æ¥ä»£æ›¿ã€‚å¦‚ï¼š</p>

<pre><code>&lt;table&gt;
  &lt;tr is="my-row"&gt;&lt;/tr&gt;
&lt;/table&gt;
</code></pre>

<p>is è¿˜å¯ä»¥ç”¨æ¥åŠ¨æ€ç»‘å®šç»„ä»¶ï¼š</p>

<pre><code>&lt;component v-bind:is="currentView"&gt;&lt;/component&gt;

var vm = new Vue({
  el: '#example',
  data: {
    currentView: 'archive'
  },
  components: {
    home: { 
        template: '&lt;p&gt; home ------ &lt;/&gt;'
    },
    posts: { 
         template: '&lt;p&gt; posts ------&lt;/&gt;'
     },
    archive: { 
         template: '&lt;p&gt; archive ------&lt;/&gt;'
    }
  }
})
</code></pre>

<p>è‡ªå®šä¹‰ç»„ä»¶é‡Œ data å¿…é¡»æ˜¯å‡½æ•°ï¼š</p>

<pre><code> data: function () {
    return {
       key: value,
       key: value,
       key: value,
    }
  }
</code></pre>

<p>çˆ¶å­ç»„ä»¶çš„å…³ç³»å¯ä»¥æ€»ç»“ä¸º props down, events up ã€‚çˆ¶ç»„ä»¶é€šè¿‡ props å‘ä¸‹ä¼ é€’æ•°æ®ç»™å­ç»„ä»¶ï¼Œå­ç»„ä»¶é€šè¿‡ events ç»™çˆ¶ç»„ä»¶å‘é€æ¶ˆæ¯ã€‚
ä¸èƒ½å¹¶ä¸”ä¸åº”è¯¥åœ¨å­ç»„ä»¶çš„æ¨¡æ¿å†…ç›´æ¥å¼•ç”¨çˆ¶ç»„ä»¶çš„æ•°æ®ã€‚å¯ä»¥ä½¿ç”¨ props æŠŠæ•°æ®ä¼ ç»™å­ç»„ä»¶ã€‚</p>

<p>æ³¨æ„åœ¨ JavaScript ä¸­å¯¹è±¡å’Œæ•°ç»„æ˜¯å¼•ç”¨ç±»å‹ï¼ŒæŒ‡å‘åŒä¸€ä¸ªå†…å­˜ç©ºé—´ï¼Œå¦‚æœ prop æ˜¯ä¸€ä¸ªå¯¹è±¡æˆ–æ•°ç»„ï¼Œåœ¨å­ç»„ä»¶å†…éƒ¨æ”¹å˜å®ƒä¼šå½±å“çˆ¶ç»„ä»¶çš„çŠ¶æ€ã€‚</p>

<h3>åŸºæœ¬ä½¿ç”¨</h3>

<pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta charset="utf-8"&gt;
&lt;script src="./vue.js"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;div id="app"&gt;
  &lt;ol v-once&gt;
    &lt;todo-item v-for="item in groceryList" v-bind:todo="item"&gt;&lt;/todo-item&gt;
  &lt;/ol&gt;

&lt;template v-if="seen"&gt;
    &lt;p  v-on:click = "helloTap"&gt;  &lt;/p&gt;
&lt;/template&gt;
&lt;p v-else&gt; show else&lt;/p&gt;

&lt;my-com msg = "my component" v-on:increment = "increments"&gt;&lt;/my-com&gt;
&lt;my-com2 msg = "my component2"&gt;&lt;/my-com2&gt;

&lt;/div&gt;
&lt;/body&gt;

&lt;script&gt;
var bus = new Vue();

Vue.component('todoItem', {
  props: ['todo'],
  template: '&lt;li&gt;&lt;/li&gt;',

   filters: {
    capitalize: function (value) {
      if (!value) return ''
      value = value.toString()
      return value.charAt(0).toUpperCase() + value.slice(1)
    }
  }

})

var vm = new Vue({
  el: '#app',

  data: {
    groceryList: [
      { text: 'aegetables' },
      { text: 'cheese' },
      { text: 'Whatever else humans are supposed to eat' }
    ],
     msg: "hello",
     seen: true
  },

  computed:{
    rMsg: function () {
      return this.msg.split('').reverse().join('')
    }
  },

  methods:{
    helloTap: function(){
        alert("hello");
    },
     increments: function(){
        alert("helloss");
    }
  },

  components:{
    'my-com':{
      props: ['msg'],

data: function () {
  return {
    innerData: 'innerData  hello',
  }
},

  methods: {
    increment: function () {
      this.$emit('increment')
    }
  },

       template: '&lt;div&gt;&lt;p&gt;&lt;/p&gt;  &lt;p&gt;&lt;/p&gt;&lt;/div&gt;',
    },

    'my-com2':{
      props: ['msg'],
       template: '&lt;p&gt;&lt;/p&gt;',
    },

  },

 filters: {
    capitalize: function (value) {
      if (!value) return ''
      value = value.toString()
      return value.charAt(0).toUpperCase() + value.slice(1)
    }
  },

   beforeCreate:function(){
    console.log("----------beforeCreate");
  },
  created:function(){
    console.log("----------created");
  },
   beforeMount:function(){
    console.log("----------beforeMount");
  },
   mounted:function(){
    console.log("----------mounted");
  },
   beforeUpdate:function(){
    console.log("----------beforeUpdate");
   },
  updated:function(){
    console.log("----------updated");
  },
  beforeDestroy:function(){
    console.log("----------destroyed");
  },
  destroyed:function(){
    console.log("----------destroyed");
  },

  watch:{
    groceryList: function(newValue){
     console.log("--------------groceryListå˜äº†1");
    }
  }

})

vm.$watch('groceryList', function (newVal, oldVal) {
   console.log("--------------groceryListå˜äº†2");
})

&lt;/script&gt;

&lt;/html&gt;
</code></pre>
</div>
  
  


      | <a href="/blog/2016/12/19/vue/#comments">Comments</a>


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/12/10/suan-fa/">æ’åºç®—æ³•</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-12-10T14:25:43+08:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>10</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>2:25 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h5>1.å†’æ³¡æ’åº</h5>

<p>æ¯”å¦‚è¦å‡åºæ’åºï¼ŒåŸç†æ˜¯ä»ç¬¬ä¸€ä½å¼€å§‹ï¼ŒæŠŠå®ƒä¾æ¬¡å’Œåé¢çš„æ¯ä¸€ä½æ•°å­—è¿›è¡Œä¸¤ä¸¤æ¯”è¾ƒ,å¦‚æœä½ä½çš„æ¯”é«˜ä½çš„å¤§å°±äº¤æ¢ï¼Œç„¶åç”¨è¾ƒå¤§çš„æ•°å­—ç»§ç»­å’Œåé¢æ¯”è¾ƒäº¤æ¢ã€‚è¿™æ ·ä¸€è¶Ÿæ¯”è¾ƒè¿‡å»å,æœ€å¤§çš„æ•°å­—è¢«äº¤æ¢åˆ°äº†æœ€åä¸€ä½ã€‚ç„¶åå†ä»å¤´å¼€å§‹ä»¥æ­¤ç±»æ¨,ç›´åˆ°å€’æ•°ç¬¬äºŒä½å’Œæœ€åä¸€ä½æ¯”è¾ƒäº¤æ¢å®Œæ—¶ç»“æŸã€‚</p>

<pre><code>void ascSort(int array[], int size){
    int i, j, temp;
    for (j = 0; j &lt; size - 1; j++) //æ¯”è¾ƒçš„è¶Ÿæ•°
        for (i = 0; i &lt; size - 1 - j; i++){ //æ¯è¶Ÿè¦æ¯”è¾ƒçš„æ¬¡æ•°
            if(array[i] &gt; array[i + 1]){
                temp = array[i];
                array[i] = array[i + 1];
                array[i + 1] = temp;
            }
        }
}
</code></pre>

<p>æ—¶é—´å¤æ‚åº¦ï¼Œä¸€ä¸ªç®—æ³•èŠ±è´¹çš„æ—¶é—´ä¸ç®—æ³•ä¸­è¯­å¥çš„æ‰§è¡Œæ¬¡æ•°æˆæ­£æ¯”ï¼Œç®—æ³•ä¸­è¯­å¥æ‰§è¡Œæ¬¡æ•°å¤šï¼Œå®ƒèŠ±è´¹æ—¶é—´å°±å¤šã€‚ç®—æ³•ä¸­åŸºæœ¬æ“ä½œé‡å¤æ‰§è¡Œçš„æ¬¡æ•°æ˜¯é—®é¢˜è§„æ¨¡nçš„æŸä¸ªå‡½æ•°ï¼Œç”¨T(n)è¡¨ç¤ºï¼Œè‹¥æœ‰æŸä¸ªè¾…åŠ©å‡½æ•°f(n),ä½¿å¾—å½“nè¶‹è¿‘äºæ— ç©·å¤§æ—¶ï¼ŒT(n)/f(n)çš„æé™å€¼ä¸ºä¸ç­‰äºé›¶çš„å¸¸æ•°ï¼Œåˆ™ç§°f(n)æ˜¯T(n)çš„åŒæ•°é‡çº§å‡½æ•°ã€‚è®°ä½œT(n)=O(f(n)),ç§°O(f(n)) ä¸ºç®—æ³•çš„æ¸è¿›æ—¶é—´å¤æ‚åº¦ï¼Œç®€ç§°æ—¶é—´å¤æ‚åº¦ã€‚</p>

<p>åœ¨å†’æ³¡æ’åºä¸­ï¼Œæœ€åæƒ…å†µä¸‹ T(n) = n * (n - 1) / 2 = (n<sup>2</sup> - n) / 2ã€‚å¦‚æœ n = 10000ï¼Œé‚£ä¹ˆ (n<sup>2</sup> - n) / 2 = (100000000 - 10000) / 2, ç›¸å¯¹10<sup>8</sup>æ¥è¯´ï¼Œ10000å¯ä»¥å¿½ç•¥ä¸è®¡äº†ã€‚æ‰€ä»¥æ€»è®¡ç®—æ¬¡æ•°çº¦ä¸º 0.5 * n<sup>2</sup>ã€‚ å¿½ç•¥å‰é¢çš„å€æ•°ï¼Œ æ‰€ä»¥å†’æ³¡æ’åºçš„æ—¶é—´å¤æ‚åº¦æ˜¯  O(n<sup>2</sup>) ã€‚</p>

<p>ç®—æ³•çš„ç¨³å®šæ€§æ˜¯æŒ‡ï¼Œå¦‚æœæœ‰ä¸¤ä¸ªç›¸ç­‰çš„æ•° Ai = Ajï¼Œ åœ¨æ’åºå‰ Ai åœ¨ Aj å‰é¢ï¼Œæ’åºå Ai è¿˜æ˜¯åœ¨ Aj å‰é¢ï¼Œå³ä¸¤ä¸ªç›¸ç­‰çš„æ•°ä¸ä¼šäº¤æ¢ä½ç½®ã€‚æ’åºç®—æ³•æ˜¯å¦ä¸ºç¨³å®šçš„æ˜¯ç”±å…·ä½“ç®—æ³•å†³å®šçš„ï¼Œä¸ç¨³å®šçš„ç®—æ³•åœ¨æŸç§æ¡ä»¶ä¸‹å¯ä»¥å˜ä¸ºç¨³å®šçš„ç®—æ³•ï¼Œè€Œç¨³å®šçš„ç®—æ³•åœ¨æŸç§æ¡ä»¶ä¸‹ä¹Ÿå¯ä»¥å˜ä¸ºä¸ç¨³å®šçš„ç®—æ³•ã€‚</p>

<p>ä¾‹å¦‚ï¼Œå¯¹äºå†’æ³¡æ’åºï¼ŒåŸæœ¬æ˜¯ç¨³å®šçš„æ’åºç®—æ³•ï¼Œå¦‚æœå°†è®°å½•äº¤æ¢çš„æ¡ä»¶æ”¹æˆA[i] >= A[i + 1]ï¼Œåˆ™ä¸¤ä¸ªç›¸ç­‰çš„è®°å½•å°±ä¼šäº¤æ¢ä½ç½®ï¼Œä»è€Œå˜æˆä¸ç¨³å®šçš„æ’åºç®—æ³•ã€‚</p>

<h5>2.é¸¡å°¾é…’æ’åº</h5>

<p>é¸¡å°¾é…’æ’åºä¹Ÿå«æ¥å›æ’åºï¼Œæ˜¯å†’æ³¡æ’åºçš„ä¸€ç§æ”¹è¿›ã€‚æ­¤ç®—æ³•ä¸å†’æ³¡æ’åºçš„ä¸åŒå¤„åœ¨äºä»ä½åˆ°é«˜ç„¶åä»é«˜åˆ°ä½ï¼Œè€Œå†’æ³¡æ’åºåˆ™ä»…ä»ä½åˆ°é«˜å»æ¯”è¾ƒåºåˆ—é‡Œçš„æ¯ä¸ªå…ƒç´ ï¼Œä»–å¯ä»¥å¾—åˆ°æ¯”å†’æ³¡æ’åºç¨å¾®å¥½ä¸€ç‚¹çš„æ•ˆç‡ã€‚</p>

<p>åŸç†æ˜¯å…ˆæ‰¾åˆ°æœ€å°çš„æ•°å­—ï¼ŒæŠŠä»–æ”¾åˆ°ç¬¬ä¸€ä½ï¼Œç„¶åæ‰¾åˆ°æœ€å¤§çš„æ•°å­—æ”¾åˆ°æœ€åä¸€ä½ã€‚ç„¶åå†æ‰¾åˆ°ç¬¬äºŒå°çš„æ•°å­—æ”¾åˆ°ç¬¬äºŒä½ï¼Œå†æ‰¾åˆ°ç¬¬äºŒå¤§çš„æ•°å­—æ”¾åˆ°å€’æ•°ç¬¬äºŒä½ã€‚ä»¥æ­¤ç±»æ¨ï¼Œç›´åˆ°å®Œæˆæ’åºã€‚</p>

<pre><code>void ascSort(int array[], int size){
    //åˆå§‹åŒ–æŸ¥è¯¢è¾¹ç•Œ
    int left = 0;
    int right = size - 1;
    int tmp;

    while (left &lt; right) {
        for (int i=left; i&lt;right; i++) { //æœ€å¤§å€¼æ”¾å³è¾¹
            if (array[i] &gt; array[i+1]) {
                tmp = array[i];
                array[i] = array[i + 1];
                array[i + 1] = tmp;
            }
        }
        right--;

        for (int i=right; i&gt;left; i--) {//æœ€å°å€¼æ”¾å·¦è¾¹
            if (array[i-1] &gt; array[i]) {
                tmp = array[i-1];
                array[i-1] = array[i];
                array[i] = tmp;
            }
        }
        left++;
    }
}
</code></pre>

<h5>3.é€‰æ‹©æ’åº</h5>

<p>æ¯æ¬¡ä»å‰©ä½™åºåˆ—ä¸­é€‰å‡ºæœ€å°çš„æ•°æ”¾åœ¨å‰©ä½™åºåˆ—çš„ç¬¬ä¸€ä¸ªä½ç½®ã€‚å¦‚ä»10ä¸ªæ•°ä¸­é€‰å‡ºæœ€å°çš„å’Œ array[0] äº¤æ¢ï¼Œé‚£ array[0] å°±æ˜¯æœ€å°çš„äº†ã€‚å†ä»å‰©ä¸‹çš„ array[1] åˆ° array[9] ä¸­é€‰å‡ºæœ€å°çš„å’Œ array[1] äº¤æ¢ï¼Œä¾æ¬¡ç±»æ¨ã€‚</p>

<pre><code>void ascSort(int array[], int size){
    int i,j,k,t;
    for (i=0; i&lt;size-1; i++) {
        k=i;
        for (j=i+1; j&lt;size; j++){//ä»å‰©ä½™æ•°ç»„ä¸­æ‰¾å‡ºæœ€å°æ•°çš„ä½ç½®æ”¾ké‡Œ
            if (array[j] &lt; array[k]){
                 k = j;
            }
        }

        t = array[k];
        array[k] = array[i];
        array[i] = t;
    }
}
</code></pre>

<p>æ—¶é—´å¤æ‚åº¦ä¹Ÿæ˜¯  O(n<sup>2</sup>) ã€‚</p>

<h5>4.æ’å…¥æ’åº</h5>

<p>æ’å…¥æ’åºæ˜¯ä¸€ç§ç®€å•ç›´è§‚çš„æ’åºç®—æ³•ã€‚å®ƒçš„å·¥ä½œåŸç†éå¸¸ç±»ä¼¼äºæˆ‘ä»¬æŠ“æ‰‘å…‹ç‰Œã€‚å¯¹äºæœªæ’åºæ•°æ®(å³æ‰‹æŠ“åˆ°çš„ç‰Œ)ï¼Œåœ¨å·²æ’åºåºåˆ—(å·¦æ‰‹å·²ç»æ’å¥½åºçš„æ‰‹ç‰Œ)ä¸­ä»åå‘å‰æ‰«æï¼Œæ‰¾åˆ°ç›¸åº”ä½ç½®å¹¶æ’å…¥ã€‚
<img src="/myimg/java/charu.png" width="300" alt="" /></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œè¯¥å…ƒç´ å¯ä»¥è®¤ä¸ºå·²ç»è¢«æ’åº
</span><span class='line'>å–å‡ºä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œåœ¨å·²ç»æ’åºçš„å…ƒç´ åºåˆ—ä¸­ä»åå‘å‰æ‰«æ
</span><span class='line'>å¦‚æœè¯¥å…ƒç´ ï¼ˆå·²æ’åºï¼‰å¤§äºæ–°å…ƒç´ ï¼Œå°†è¯¥å…ƒç´ ç§»åˆ°ä¸‹ä¸€ä½ç½®
</span><span class='line'>é‡å¤æ­¥éª¤3ï¼Œç›´åˆ°æ‰¾åˆ°å·²æ’åºçš„å…ƒç´ å°äºæˆ–è€…ç­‰äºæ–°å…ƒç´ çš„ä½ç½®
</span><span class='line'>å°†æ–°å…ƒç´ æ’å…¥åˆ°è¯¥ä½ç½®å
</span><span class='line'>é‡å¤æ­¥éª¤2~5</span></code></pre></td></tr></table></div></figure>


<pre><code>void ascSort(int array[], int size){
    int j,tmp;
    for (int i = 1; i &lt; size; i++) { //æŠŠarray[0]å½“åšå·²æ’åºå¥½çš„ï¼Œä»array[1]åˆ°array[size-1]æ˜¯å°†è¦ä¸€ä¸ªä¸€ä¸ªæ‹¿æ¥æ’å…¥çš„
        tmp = array[i]; //è¦è¢«æ’å…¥çš„æ•°
        j = i - 1; //jæ˜¯å·²ç»æ’å¥½çš„æ•°ç»„çš„æœ€åä¸€ä½æ•°çš„ä½ç½®ï¼Œç¬¬ä¸€æ¬¡å³ä¸º index 0

        while (j &gt;=0 &amp;&amp; array[j] &gt; tmp) {
            array[j+1] = array[j]; //åç§»
            j--;
        }

        array[j+1] = tmp;//ç›´åˆ°é‡åˆ°æ¯”è¦æ’å…¥çš„æ•°å°ï¼Œç„¶åæŠŠè¦æ’å…¥çš„æ•°æ’åˆ°å®ƒå³è¾¹
    }
}
</code></pre>

<h5>5.å¸Œå°”æ’åº</h5>

<p>å¸Œå°”æ’åºï¼Œä¹Ÿå«é€’å‡å¢é‡æ’åºï¼Œæ˜¯æ’å…¥æ’åºçš„ä¸€ç§æ›´é«˜æ•ˆçš„æ”¹è¿›ç‰ˆæœ¬ï¼Œå› ä¸ºæ’å…¥æ’åºæ¯æ¬¡åªèƒ½å°†æ•°æ®ç§»åŠ¨ä¸€ä½ã€‚è€Œè¯¥æ–¹æ³•å®è´¨ä¸Šæ˜¯ä¸€ç§åˆ†ç»„æ’å…¥æ–¹æ³•ï¼Œç®—æ³•å…ˆå°†è¦æ’åºçš„ä¸€ç»„æ•°æŒ‰æŸä¸ªå¢é‡dåˆ†æˆè‹¥å¹²ç»„ï¼Œæ¯ç»„ä¸­è®°å½•çš„ä¸‹æ ‡ç›¸å·®d.å¯¹æ¯ç»„ä¸­å…¨éƒ¨å…ƒç´ è¿›è¡Œæ’åºï¼Œç„¶åå†ç”¨ä¸€ä¸ªè¾ƒå°çš„å¢é‡å¯¹å®ƒè¿›è¡Œï¼Œåœ¨æ¯ç»„ä¸­å†è¿›è¡Œæ’åºã€‚å½“å¢é‡å‡åˆ°1æ—¶ï¼Œæ•´ä¸ªè¦æ’åºçš„æ•°è¢«åˆ†æˆä¸€ç»„ï¼Œæ’åºå®Œæˆã€‚ä¸€èˆ¬çš„åˆæ¬¡å–åºåˆ—çš„ä¸€åŠä¸ºå¢é‡ï¼Œä»¥åæ¯æ¬¡å‡åŠï¼Œç›´åˆ°å¢é‡ä¸º1ã€‚
<img src="/myimg/java/xier.jpg" width="400" alt="" /></p>

<pre><code>void ascSort(int array[], int size){
    int h = size/2; //åˆå§‹å¢é‡ä¸ºä¸€åŠ
    int i,j,tmp;

    while (h &gt;= 1) {
        for (i = h; i &lt; size; i++) {
            //ä¸‹é¢æ˜¯è·¨åº¦ä¸ºhçš„æ’å…¥æ’åºï¼Œ
            tmp = array[i];
            j = i - h;
            while (j &gt;= 0 &amp;&amp; array[j] &gt; tmp){
                array[j + h] = array[j];
                j = j - h;
            }
            array[j + h] = tmp;
        }
        h = h/2; //å¢é‡æ¯æ¬¡å‡åŠ
    }
}
</code></pre>

<h5>6.å †æ’åº</h5>

<p>å †æ’åºæ˜¯æŒ‡åˆ©ç”¨å †è¿™ç§æ•°æ®ç»“æ„æ‰€è®¾è®¡çš„ä¸€ç§æ’åºç®—æ³•ã€‚å †æ˜¯ä¸€ä¸ªè¿‘ä¼¼å®Œå…¨äºŒå‰æ ‘çš„ç»“æ„,å¹¶åŒæ—¶æ»¡è¶³å †çš„æ€§è´¨ï¼šçˆ¶èŠ‚ç‚¹æ€»æ˜¯å°äºç­‰äºå®ƒçš„å­èŠ‚ç‚¹ã€‚(çˆ¶èŠ‚ç‚¹æˆ–å¤§äºç­‰äºå­èŠ‚ç‚¹ï¼Œè¿™é‡Œå°±ä¸¾ä¾‹å°äºç­‰äºçš„)ã€‚å½“çˆ¶ç»“ç‚¹æ€»æ˜¯å°äºæˆ–ç­‰äºä»»ä½•ä¸€ä¸ªå­èŠ‚ç‚¹æ—¶ç§°ä¸ºå°æ ¹å †ï¼Œåä¹‹ä¸ºå¤§æ ¹å †ã€‚</p>

<p>å¯ä»¥ç”¨ä¸€ç»´æ•°ç»„æ¥è¡¨ç¤ºå †ï¼ŒèŠ‚ç‚¹ i çš„çˆ¶èŠ‚ç‚¹æ˜¯ (i â€“ 1) / 2ã€‚ i çš„å·¦å³å­ç»“ç‚¹ä¸‹æ ‡åˆ†åˆ«ä¸º2 * i + 1å’Œ2 * i + 2, å¦‚ç¬¬0ä¸ªç»“ç‚¹å·¦å³å­ç»“ç‚¹ä¸‹æ ‡åˆ†åˆ«ä¸º1å’Œ2ã€‚
<img src="/myimg/java/dui.png" width="500" alt="" /></p>

<pre><code>1.æ ¹æ®æ•°ç»„åˆå§‹åŒ–ä¸€ä¸ªå¤§æ ¹å †
2.æŠŠå †é¡¶å…ƒç´ å’Œå †å°¾å…ƒç´ äº¤æ¢
3.æŠŠå †çš„å°ºå¯¸å‡ä¸€ï¼Œç„¶åè°ƒæ•´å †ä½¿å‰©ä¸‹çš„å †ç»§ç»­æ»¡è¶³å¤§æ ¹å †
4.é‡å¤2ã€3ï¼Œç›´åˆ°å †çš„å°ºå¯¸ä¸º1
</code></pre>

<p>å¦‚ int array[] = {16,7,3,20,17,8}; å¯ä»¥çœ‹æˆä»¥ä¸‹çš„å®Œå…¨äºŒå‰æ ‘ï¼š
<img src="/myimg/java/shu0.png" width="300" alt="" /></p>

<p>ç„¶åä»æœ€åä¸€ä¸ªéå¶å­èŠ‚ç‚¹å¼€å§‹è°ƒæ•´ï¼Œæ¯”è¾ƒè‡ªå·±å’Œå·¦èŠ‚ç‚¹ï¼Œå³èŠ‚ç‚¹è°æœ€å¤§ï¼Œæœ€å¤§çš„è°ƒä¸ºçˆ¶èŠ‚ç‚¹ã€‚ç»è¿‡ 3-8ï¼Œ7-20-17ï¼Œ16-20-8ï¼Œ16-7-17 å››æ¬¡è°ƒæ•´åæœ€åå°±æ˜¯ä¸€ä¸ªå¤§æ ¹å †äº†ï¼Œæ¯ä¸ªçˆ¶èŠ‚ç‚¹éƒ½æ¯”å­èŠ‚ç‚¹å¤§ï¼</p>

<p><img src="/myimg/java/shu1.png" width="500" alt="" /></p>

<p>å³æ¯æ¬¡è°ƒæ•´éƒ½æ˜¯ä»çˆ¶èŠ‚ç‚¹ã€å·¦å­©å­èŠ‚ç‚¹ã€å³å­©å­èŠ‚ç‚¹ä¸‰è€…ä¸­é€‰æ‹©æœ€å¤§è€…è·Ÿçˆ¶èŠ‚ç‚¹è¿›è¡Œäº¤æ¢ï¼Œäº¤æ¢ä¹‹åå¯èƒ½é€ æˆè¢«äº¤æ¢çš„å­©å­èŠ‚ç‚¹ä¸æ»¡è¶³å †çš„æ€§è´¨ï¼Œå› æ­¤æ¯æ¬¡äº¤æ¢ä¹‹åè¦é‡æ–°å¯¹è¢«äº¤æ¢çš„å­©å­èŠ‚ç‚¹è¿›è¡Œè°ƒæ•´ã€‚åˆå§‹åŒ–å¥½å¤§æ ¹å †åå°±å¯ä»¥è¿›è¡Œæ’åºäº†ã€‚</p>

<p>ç¬¬ä¸€è½®ï¼ŒæŠŠ20å’Œæœ€åçš„3äº¤æ¢ï¼Œå†è°ƒæ•´åå¦‚ä¸‹ï¼š</p>

<p><img src="/myimg/java/shu2.png" width="400" alt="" /></p>

<p>å†æŠŠ17å’Œ3äº¤æ¢ï¼Œè°ƒæ•´åå¦‚ä¸‹ï¼š</p>

<p><img src="/myimg/java/shu3.png" width="400" alt="" /></p>

<p>å†æŠŠ16å’Œ3äº¤æ¢è°ƒæ•´åå¦‚ä¸‹ï¼š</p>

<p><img src="/myimg/java/shu4.png" width="300" alt="" /></p>

<p>ç„¶å8å’Œ3äº¤æ¢è°ƒæ•´ï¼š</p>

<p><img src="/myimg/java/shu5.png" width="300" alt="" /></p>

<p>æœ€å7å’Œ3äº¤æ¢ï¼Œå®Œæˆã€‚</p>

<p><img src="/myimg/java/shu6.png" width="250" alt="" /></p>

<pre><code>int heapsize;
void ascSort(int array[], int size){
    buildHeap(array, size);
    for (int i = size - 1; i &gt;= 1; i--){
        exchange(array, 0, i);       // å°†å †é¡¶å…ƒç´ æœ€å¤§å€¼ä¸å †çš„æœ€åä¸€ä¸ªå…ƒç´ äº’æ¢
        heapsize--;                  // ä»å †ä¸­å»æ‰æœ€åä¸€ä¸ªå…ƒç´ 
        heapModify(array, 0);        // ä»æ–°çš„å †é¡¶å…ƒç´ å¼€å§‹è¿›è¡Œå †è°ƒæ•´
    }
}

void buildHeap(int array[], int size){
    heapsize = size;
    for (int i = heapsize/2 - 1; i &gt;= 0; i--){ // å¯¹æ¯ä¸€ä¸ªéå¶ç»“ç‚¹ ä¸æ–­çš„å †è°ƒæ•´
        heapModify(array, i);
    }
}

void heapModify(int array[], int i){    // å †è°ƒæ•´å‡½æ•°,è¿™é‡Œä½¿ç”¨çš„æ˜¯å¤§æ ¹å †
    int leftchild = 2 * i + 1;          // å·¦å­©å­ç´¢å¼•
    int rightchild = 2 * i + 2;         // å³å­©å­ç´¢å¼•
    int largest;                        // é€‰å‡ºå½“å‰ç»“ç‚¹ä¸å·¦å³å­©å­ä¹‹ä¸­çš„æœ€å¤§å€¼

    if (leftchild &lt; heapsize &amp;&amp; array[leftchild] &gt; array[i]){
        largest = leftchild;
    }else{
        largest = i;
    }

    if (rightchild &lt; heapsize &amp;&amp; array[rightchild] &gt; array[largest]){
        largest = rightchild;
    }

    if (largest != i){
        exchange(array, i, largest);     // æŠŠå½“å‰ç»“ç‚¹å’Œå®ƒçš„æœ€å¤§ç›´æ¥å­èŠ‚ç‚¹è¿›è¡Œäº¤æ¢
        heapModify(array, largest);      // é€’å½’è°ƒç”¨ï¼Œç»§ç»­ä»å½“å‰ç»“ç‚¹å‘ä¸‹è¿›è¡Œå †è°ƒæ•´
    }
}

void exchange(int array[], int i, int j){   // äº¤æ¢array[i]å’Œarray[j]
    int temp = array[i];
    array[i] = array[j];
    array[j] = temp;
}
</code></pre>

<h5>7.å½’å¹¶æ’åº</h5>

<p>å½’å¹¶æ“ä½œæŒ‡çš„æ˜¯å°†ä¸¤ä¸ªå·²ç»æ’åºçš„åºåˆ—åˆå¹¶æˆä¸€ä¸ªæœ‰åºåºåˆ—çš„æ“ä½œï¼Œå³åªè¦ä»æ¯”è¾ƒäºŒä¸ªæ•°åˆ—çš„ç¬¬ä¸€ä¸ªæ•°ï¼Œè°å°å°±å…ˆå–è°ï¼Œå–äº†åå°±åœ¨å¯¹åº”æ•°åˆ—ä¸­åˆ é™¤è¿™ä¸ªæ•°ã€‚ç„¶åå†è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœæœ‰æ•°åˆ—ä¸ºç©ºï¼Œé‚£ç›´æ¥å°†å¦ä¸€ä¸ªæ•°åˆ—çš„æ•°æ®ä¾æ¬¡å–å‡ºå³å¯ã€‚</p>

<pre><code>void mergeArray(int arrayA[], int sizeA, int arrayB[], int sizeB, int resultArray[]){
    int indexA =0;
    int indexB =0;
    int indexResult =0;

    while (indexA &lt; sizeA &amp;&amp; indexB &lt; sizeB){
        if (arrayA[indexA] &lt; arrayB[indexB]){
            resultArray[indexResult] = arrayA[indexA];
            indexResult++;
            indexA++;
        }else{
            resultArray[indexResult] = arrayB[indexB];
            indexResult++;
            indexB++;
        }
    }

    while (indexA &lt; sizeA){
       resultArray[indexResult] = arrayA[indexA];
        indexResult++;
        indexA++;
    }

    while (indexB &lt; sizeB){
       resultArray[indexResult] = arrayB[indexB];
        indexResult++;
        indexB++;
    }
}
</code></pre>

<p>å½’å¹¶çš„åŸºæœ¬æ€è·¯æ˜¯å°†æ•°ç»„åˆ†æˆäºŒç»„Aï¼ŒBï¼Œå¦‚æœè¿™äºŒç»„ç»„å†…çš„æ•°æ®éƒ½æ˜¯æœ‰åºçš„ï¼Œé‚£ä¹ˆå°±å¯ä»¥å¾ˆæ–¹ä¾¿çš„å°†è¿™äºŒç»„æ•°æ®è¿›è¡Œæ’åºã€‚å¦‚ä½•è®©è¿™äºŒç»„ç»„å†…æ•°æ®æœ‰åºäº†ï¼Ÿå¯ä»¥å°†Aï¼ŒBç»„å„è‡ªå†åˆ†æˆäºŒç»„ï¼Œä¾æ¬¡ç±»æ¨ã€‚å½“åˆ†å‡ºæ¥çš„å°ç»„åªæœ‰ä¸€ä¸ªæ•°æ®æ—¶ï¼Œå¯ä»¥è®¤ä¸ºè¿™ä¸ªå°ç»„ç»„å†…å·²ç»è¾¾åˆ°äº†æœ‰åºï¼Œç„¶åå†åˆå¹¶ç›¸é‚»çš„äºŒä¸ªå°ç»„å°±å¯ä»¥äº†ã€‚
<img src="/myimg/java/dg0.png" width="600" alt="" /></p>

<pre><code>void ascSort(int array[], int size){
    int *temp = malloc(size * sizeof(int));
    recursionArray(array, temp, 0, size - 1);
    free(temp);
}

void recursionArray(int array[], int temp[], int low, int high){
    if (low &lt; high){
        int middle = (low + high) / 2;
        recursionArray(array, temp, low, middle);   //å·¦è¾¹æœ‰åº
        recursionArray(array, temp, middle + 1, high); //å³è¾¹æœ‰åº
        mergeArray(array, temp, low,middle,high);  //å†æŠŠä¸¤ä¸ªæœ‰åºçš„åˆå¹¶
    }
}

//å°†æœ‰äºŒä¸ªæœ‰åºæ•°åˆ— array[low...middle]å’Œ array[middle...high]åˆå¹¶
void mergeArray(int array[], int temp[], int low, int middle, int high){
    int i = low;
    int j = middle + 1;
    int k = low;

    while (i &lt;= middle &amp;&amp; j &lt;= high){
        if (array[i] &lt;= array[j]){
            temp[k++] = array[i++];
        }
        else{
            temp[k++] = array[j++];
        }
    }

    while (i &lt;= middle){
        temp[k++] = array[i++];
    }

    while (j &lt;= high){
        temp[k++] = array[j++];
    }

    for (int k = low; k &lt;= high; k++){
        array[k] = temp[k];
    }
}
</code></pre>

<h5>8.å¿«é€Ÿæ’åº</h5>

<p>å¿«é€Ÿæ’åºä¹Ÿæ˜¯ç”¨åˆ†æ²»æ³•æ¥å®ç°çš„ï¼Œå³å…ˆåˆ†è§£åˆ†è§£å†åˆ†è§£ï¼Œç„¶åé€ä¸ªå‡»ç ´ï¼Œæœ€åæŒ¨ä¸ªåˆå¹¶ã€‚å…¶åŸºæœ¬æ€æƒ³æ˜¯ï¼šé€šè¿‡ä¸€è¶Ÿæ’åºå°†è¦æ’åºçš„æ•°æ®åˆ†å‰²æˆç‹¬ç«‹çš„ä¸¤éƒ¨åˆ†ï¼Œå…¶ä¸­ä¸€éƒ¨åˆ†çš„æ‰€æœ‰æ•°æ®éƒ½æ¯”å¦å¤–ä¸€éƒ¨åˆ†çš„æ‰€æœ‰æ•°æ®éƒ½è¦å°ï¼Œç„¶åå†æŒ‰æ­¤æ–¹æ³•å¯¹è¿™ä¸¤éƒ¨åˆ†æ•°æ®åˆ†åˆ«è¿›è¡Œå¿«é€Ÿæ’åºï¼Œæ•´ä¸ªæ’åºè¿‡ç¨‹å¯ä»¥é€’å½’è¿›è¡Œï¼Œä»¥æ­¤è¾¾åˆ°æ•´ä¸ªæ•°æ®å˜æˆæœ‰åºåºåˆ—ã€‚</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>å…ˆä»æ•°åˆ—ä¸­å–å‡ºä¸€ä¸ªæ•°ä½œä¸ºåŸºå‡†æ•°ã€‚
</span><span class='line'>åˆ†åŒºè¿‡ç¨‹ï¼Œå°†æ¯”è¿™ä¸ªæ•°å¤§çš„æ•°å…¨æ”¾åˆ°å®ƒçš„å³è¾¹ï¼Œå°äºæˆ–ç­‰äºå®ƒçš„æ•°å…¨æ”¾åˆ°å®ƒçš„å·¦è¾¹ã€‚
</span><span class='line'>å†å¯¹å·¦å³åŒºé—´é‡å¤ç¬¬äºŒæ­¥ï¼Œç›´åˆ°å„åŒºé—´åªæœ‰ä¸€ä¸ªæ•°ã€‚</span></code></pre></td></tr></table></div></figure>


<pre><code>void ascSort(int array[], int left, int right){
    if (left &lt; right){
        int i = left, j = right, x = array[left];
        while (i &lt; j){
            while(i &lt; j &amp;&amp; array[j] &gt;= x) // ä»å³å‘å·¦æ‰¾ç¬¬ä¸€ä¸ªå°äºxçš„æ•°
                j--;
            if(i &lt; j)
                array[i++] = array[j];

            while(i &lt; j &amp;&amp; array[i] &lt; x) // ä»å·¦å‘å³æ‰¾ç¬¬ä¸€ä¸ªå¤§äºç­‰äºxçš„æ•°
                i++;
            if(i &lt; j)
                array[j--] = array[i];
        }
        array[i] = x;
        ascSort(array, left, i - 1); // é€’å½’è°ƒç”¨
        ascSort(array, i + 1, right);
    }
}
</code></pre>
</div>
  
  


      | <a href="/blog/2016/12/10/suan-fa/#comments">Comments</a>


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/12/09/google-protocol-buffer/">Google Protocol Buffer</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-12-09T09:54:35+08:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>9</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>9:54 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="https://developers.google.com/protocol-buffers/">Google Protocol Buffer</a>æ˜¯ä¸€ç§è½»ä¾¿é«˜æ•ˆçš„ç»“æ„åŒ–æ•°æ®å­˜å‚¨æ ¼å¼ï¼Œå®ƒå¾ˆé€‚åˆç”¨äºç½‘ç»œä¼ è¾“ã€æ•°æ®å­˜å‚¨ç­‰é¢†åŸŸçš„ä¸è¯­è¨€æ— å…³ã€å¹³å°æ— å…³ã€å¯æ‰©å±•çš„åºåˆ—åŒ–ç»“æ„æ•°æ®æ ¼å¼ã€‚google æä¾›äº†å¤šç§è¯­è¨€çš„å®ç°ï¼šjavaã€c#ã€c++ã€go å’Œ pythonï¼Œæ¯ä¸€ç§å®ç°éƒ½åŒ…å«äº†ç›¸åº”è¯­è¨€çš„ç¼–è¯‘å™¨ä»¥åŠåº“æ–‡ä»¶ã€‚ç”±äºå®ƒæ˜¯ä¸€ç§äºŒè¿›åˆ¶çš„æ ¼å¼ï¼Œæ¯”ä½¿ç”¨ XMLã€JSON è¿›è¡Œæ•°æ®äº¤æ¢å¿«è®¸å¤šä¹Ÿå°è®¸å¤šã€‚</p>

<p>é¦–å…ˆéœ€è¦å®‰è£…ç¼–è¯‘å™¨ï¼Œåœ¨<a href="https://github.com/google/protobuf/releases">è¿™é‡Œ</a>é€‰æ‹©ä¸€ç§è¯­è¨€ä¸‹è½½ï¼Œæˆ‘ä¸‹è½½çš„æ˜¯<code>protobuf-java-3.0.0.zip</code>ã€‚</p>

<pre><code>//å®‰è£…æ­¥éª¤
1.è§£å‹å cd è¿›å…¥æ–‡ä»¶å¤¹
2.ç»ˆç«¯è¾“å…¥ ./configure (å¦‚æœä¸æ˜¯ç®¡ç†å‘˜èº«ä»½ï¼Œéœ€è¦è¾“å…¥ï¼š./configure --prefix=$INSTALL_DIR åé¢è¡¨ç¤ºä½ è¦æŠŠprotobufå®‰è£…çš„è·¯å¾„ï¼Œéœ€è¦æ˜¯ç»å¯¹è·¯å¾„)
3.è¾“å…¥ make 
4.è¾“å…¥ make check 
5.è¾“å…¥ make install 
</code></pre>

<p>æ¯ä¸ªè¿‡ç¨‹æ—¶é—´éƒ½æŒºé•¿çš„ï¼Œç„¶åè¾“å…¥<code>protoc -- version</code>éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸï¼
<img src="/myimg/java/proto0.png" width="600" alt="" /></p>

<p>ä¸‹é¢å°±å¯ä»¥å¼€å§‹å†™ä¾‹å­äº†.æ–°å»ºä¸€ä¸ª<code>addressbook.proto</code>æ–‡ä»¶ï¼Œè¾“å…¥ï¼š</p>

<pre><code>syntax = "proto2";
package tutorial;

option java_package = "com.example.tutorial";
option java_outer_classname = "AddressBookProtos";

message Person {
  required string name = 1;
  required int32 id = 2;
  optional string email = 3;

  enum PhoneType {
    MOBILE = 0;
    HOME = 1;
    WORK = 2;
  }

  message PhoneNumber {
    required string number = 1;
    optional PhoneType type = 2 [default = HOME];
  }

  repeated PhoneNumber phone = 4;
}

message AddressBook {
  repeated Person person = 1;
}
</code></pre>

<p>ç»ˆç«¯ cd è¿›å…¥æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ï¼Œè¿è¡Œ<code>protoc -I=./ --java_out=./ ./addressbook.proto</code>ï¼Œå°±ä¼šåœ¨æ–‡ä»¶å¤¹é‡Œç”Ÿæˆä¸€ä¸ª<code>AddressBookProtos.java</code>çš„æ–‡ä»¶ã€‚æŠŠæ–‡ä»¶æ”¾åˆ°Eclipseé‡Œï¼Œç„¶åæ·»åŠ <a href="http://mavensearch.io/repo/com.google.protobuf/protobuf-java/3.0.0">jaråŒ…</a>ã€‚</p>

<p>ç„¶ååˆ›å»ºä¸€ä¸ªç”¨äºå†™å…¥çš„ç±»ï¼š<code>AddPerson</code></p>

<pre><code>package com.example.tutorial;

import com.example.tutorial.AddressBookProtos.AddressBook;
import com.example.tutorial.AddressBookProtos.Person;
import java.io.BufferedReader;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.InputStreamReader;
import java.io.IOException;
import java.io.PrintStream;

class AddPerson {
  // This function fills in a Person message based on user input.
  static Person PromptForAddress(BufferedReader stdin,
                                 PrintStream stdout) throws IOException {
    Person.Builder person = Person.newBuilder();

    stdout.print("Enter person ID: ");
    person.setId(Integer.valueOf(stdin.readLine()));

    stdout.print("Enter name: ");
    person.setName(stdin.readLine());

    stdout.print("Enter email address (blank for none): ");
    String email = stdin.readLine();
    if (email.length() &gt; 0) {
      person.setEmail(email);
    }

    while (true) {
      stdout.print("Enter a phone number (or leave blank to finish): ");
      String number = stdin.readLine();
      if (number.length() == 0) {
        break;
      }

      Person.PhoneNumber.Builder phoneNumber =
        Person.PhoneNumber.newBuilder().setNumber(number);

      stdout.print("Is this a mobile, home, or work phone? ");
      String type = stdin.readLine();
      if (type.equals("mobile")) {
        phoneNumber.setType(Person.PhoneType.MOBILE);
      } else if (type.equals("home")) {
        phoneNumber.setType(Person.PhoneType.HOME);
      } else if (type.equals("work")) {
        phoneNumber.setType(Person.PhoneType.WORK);
      } else {
        stdout.println("Unknown phone type.  Using default.");
      }

      person.addPhone(phoneNumber);
    }

    return person.build();
  }

  //   Main function:  Reads the entire address book from a file,
  //   adds one person based on user input, then writes it back out to the same file.
  public static void main(String[] args) throws Exception {
    if (args.length != 1) {
      System.err.println("Usage:  AddPerson ADDRESS_BOOK_FILE");
      System.exit(-1);
    }

    AddressBook.Builder addressBook = AddressBook.newBuilder();

    // Read the existing address book.
    try {
      addressBook.mergeFrom(new FileInputStream(args[0]));
    } catch (FileNotFoundException e) {
      System.out.println(args[0] + ": File not found.  Creating a new file.");
    }

    // Add an address.
    addressBook.addPerson(
      PromptForAddress(new BufferedReader(new InputStreamReader(System.in)),
                       System.out));

    // Write the new address book back to disk.
    FileOutputStream output = new FileOutputStream(args[0]);
    addressBook.build().writeTo(output);
    output.close();
  }
}
</code></pre>

<p>å†åˆ›å»ºä¸€ä¸ªç”¨äºè¯»å–çš„ç±»ï¼š<code>ListPeople</code></p>

<pre><code>package com.example.tutorial;

import com.example.tutorial.AddressBookProtos.AddressBook;
import com.example.tutorial.AddressBookProtos.Person;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.PrintStream;

class ListPeople {
  // Iterates though all people in the AddressBook and prints info about them.
  static void Print(AddressBook addressBook) {
    for (Person person: addressBook.getPersonList()) {
      System.out.println("Person ID: " + person.getId());
      System.out.println("  Name: " + person.getName());
      if (person.hasEmail()) {
        System.out.println("  E-mail address: " + person.getEmail());
      }

      for (Person.PhoneNumber phoneNumber : person.getPhoneList()) {
        switch (phoneNumber.getType()) {
          case MOBILE:
            System.out.print("  Mobile phone #: ");
            break;
          case HOME:
            System.out.print("  Home phone #: ");
            break;
          case WORK:
            System.out.print("  Work phone #: ");
            break;
        }
        System.out.println(phoneNumber.getNumber());
      }
    }
  }

  // Main function:  Reads the entire address book from a file and prints all
  //   the information inside.
  public static void main(String[] args) throws Exception {
    if (args.length != 1) {
      System.err.println("Usage:  ListPeople ADDRESS_BOOK_FILE");
      System.exit(-1);
    }

    // Read the existing address book.
    AddressBook addressBook =
      AddressBook.parseFrom(new FileInputStream(args[0]));

    Print(addressBook);
  }
} 
</code></pre>

<p>ç„¶ååœ¨é¡¹ç›®æ–‡ä»¶å¤¹é‡Œæ”¾ä¸€ä¸ªç”¨äºä¿å­˜æ•°æ®çš„ç©ºæ–‡ä»¶ï¼š<code>addressbook.txt</code>,å†è®¾ç½®<code>Run Configurations</code></p>

<p><img src="/myimg/java/pro0.png" alt="" /></p>

<p>è¿è¡Œ<code>AddPerson</code>æ–‡ä»¶ï¼Œä»æ§åˆ¶å°è¾“å…¥ï¼š</p>

<p><img src="/myimg/java/pro1.png" alt="" /></p>

<p>å†è¿è¡Œ<code>ListPeople</code>å°±å¯è¯»å–è¾“å‡ºäº†ï¼š</p>

<p><img src="/myimg/java/pro2.png" alt="" /></p>

<p>å†æƒ³æ‰“å¼€æŸ¥çœ‹<code>`addressbook.txt</code>æ–‡ä»¶å·²ç»æŸ¥çœ‹ä¸äº†äº†ï¼Œåº”ä¸ºå®ƒçš„ç¼–ç ä¸æ˜¯Unicodeä¹Ÿä¸utf-8ç­‰ï¼Œè€Œæ˜¯å‰é¢å®‰è£…çš„ç¼–è¯‘å™¨çš„ç¼–ç ã€‚å®ƒçš„ä¼˜åŠ¿å°±æ˜¯å°ï¼Œä¸æµªè´¹å­—èŠ‚ï¼Œæ‰€ä»¥å¿«ï¼Œè¿˜å®‰å…¨ã€‚ä¾‹å­è¿è¡Œèµ·æ¥äº†ï¼Œè¯­æ³•è§„åˆ™å†æ…¢æ…¢çœ‹å§~</p>

<p><a href="/mysrc/java/ProtoBufferTest.zip">ä¸‹è½½</a></p>

<p><a href="https://developers.google.com/protocol-buffers/docs/javatutorial">Tutorial</a></p>

<p><a href="http://www.surajnayak.com/2015/05/05/protocol-buffers-hour-1-generating-code-and-using-generated-class/">Blog</a></p>
</div>
  
  


      | <a href="/blog/2016/12/09/google-protocol-buffer/#comments">Comments</a>


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/12/08/utf8/">Unicodeã€UTF-8ç¼–ç èµ·æº</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-12-08T15:39:55+08:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>8</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>3:39 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>å¾ˆä¹…å¾ˆä¹…ä»¥å‰ï¼Œæœ‰ä¸€ç¾¤äººï¼Œä»–ä»¬å†³å®šç”¨8ä¸ªå¯ä»¥å¼€åˆçš„æ™¶ä½“ç®¡æ¥ç»„åˆæˆä¸åŒçš„çŠ¶æ€ï¼Œä»¥è¡¨ç¤ºä¸–ç•Œä¸Šçš„ä¸‡ç‰©ã€‚ä»–ä»¬çœ‹åˆ°8ä¸ªå¼€å…³çŠ¶æ€æ˜¯å¥½çš„ï¼Œäºæ˜¯ä»–ä»¬æŠŠè¿™ç§°ä¸ºå­—èŠ‚ã€‚å†åæ¥ï¼Œä»–ä»¬åˆåšäº†ä¸€äº›å¯ä»¥å¤„ç†è¿™äº›å­—èŠ‚çš„æœºå™¨ï¼Œæœºå™¨å¼€åŠ¨äº†ï¼Œå¯ä»¥ç”¨å­—èŠ‚æ¥ç»„åˆå‡ºå¾ˆå¤šçŠ¶æ€ï¼ŒçŠ¶æ€å¼€å§‹å˜æ¥å˜å»ã€‚ä»–ä»¬çœ‹åˆ°è¿™æ ·æ˜¯å¥½çš„ï¼Œäºæ˜¯å®ƒä»¬å°±è¿™æœºå™¨ç§°ä¸ºè®¡ç®—æœºã€‚</p>

<p>å¼€å§‹è®¡ç®—æœºåªåœ¨ç¾å›½ç”¨ã€‚å…«ä½çš„å­—èŠ‚ä¸€å…±å¯ä»¥ç»„åˆå‡º256(2çš„8æ¬¡æ–¹)ç§ä¸åŒçš„çŠ¶æ€ã€‚ ä»–ä»¬æŠŠå…¶ä¸­çš„ç¼–å·ä»0å¼€å§‹çš„32ç§çŠ¶æ€åˆ†åˆ«è§„å®šäº†ç‰¹æ®Šçš„ç”¨é€”ï¼Œä¸€ä½†ç»ˆç«¯ã€æ‰“å°æœºé‡ä¸Šçº¦å®šå¥½çš„è¿™äº›å­—èŠ‚è¢«ä¼ è¿‡æ¥æ—¶ï¼Œå°±è¦åšä¸€äº›çº¦å®šçš„åŠ¨ä½œã€‚é‡ä¸Š0Ã—10(0xè¡¨ç¤º16è¿›åˆ¶), ç»ˆç«¯å°±æ¢è¡Œï¼Œé‡ä¸Š0Ã—07, ç»ˆç«¯å°±å‘äººä»¬å˜Ÿå˜Ÿå«ï¼Œä¾‹å¥½é‡ä¸Š0x1b, æ‰“å°æœºå°±æ‰“å°åç™½çš„å­—ï¼Œæˆ–è€…ç»ˆç«¯å°±ç”¨å½©è‰²æ˜¾ç¤ºå­—æ¯ã€‚ä»–ä»¬çœ‹åˆ°è¿™æ ·å¾ˆå¥½ï¼Œäºæ˜¯å°±æŠŠè¿™äº›0Ã—20ä»¥ä¸‹çš„å­—èŠ‚çŠ¶æ€ç§°ä¸ºæ§åˆ¶ç ã€‚ä»–ä»¬åˆæŠŠæ‰€æœ‰çš„ç©º æ ¼ã€æ ‡ç‚¹ç¬¦å·ã€æ•°å­—ã€å¤§å°å†™å­—æ¯åˆ†åˆ«ç”¨è¿ç»­çš„å­—èŠ‚çŠ¶æ€è¡¨ç¤ºï¼Œä¸€ç›´ç¼–åˆ°äº†ç¬¬127å·ï¼Œè¿™æ ·è®¡ç®—æœºå°±å¯ä»¥ç”¨ä¸åŒå­—èŠ‚æ¥å­˜å‚¨è‹±è¯­çš„æ–‡å­—äº†ã€‚å¤§å®¶çœ‹åˆ°è¿™æ ·ï¼Œéƒ½æ„Ÿè§‰ å¾ˆå¥½ï¼Œäºæ˜¯å¤§å®¶éƒ½æŠŠè¿™ä¸ªæ–¹æ¡ˆå«åš ANSI çš„Asciiç¼–ç ï¼ˆAmerican Standard Code for Information Interchangeï¼Œç¾å›½ä¿¡æ¯äº’æ¢æ ‡å‡†ä»£ç ï¼‰ã€‚å½“æ—¶ä¸–ç•Œä¸Šæ‰€æœ‰çš„è®¡ç®—æœºéƒ½ç”¨åŒæ ·çš„ASCIIæ–¹æ¡ˆæ¥ä¿å­˜è‹±æ–‡æ–‡å­—ã€‚
<img src="/myimg/other/asc1.jpg" alt="" /></p>

<p>åæ¥ï¼Œå°±åƒå»ºé€ å·´æ¯”ä¼¦å¡”ä¸€æ ·ï¼Œä¸–ç•Œå„åœ°çš„éƒ½å¼€å§‹ä½¿ç”¨è®¡ç®—æœºï¼Œä½†æ˜¯å¾ˆå¤šå›½å®¶ç”¨çš„ä¸æ˜¯è‹±æ–‡ï¼Œä»–ä»¬çš„å­—æ¯é‡Œæœ‰è®¸å¤šæ˜¯ASCIIé‡Œæ²¡æœ‰çš„ï¼Œä¸ºäº†å¯ä»¥åœ¨è®¡ç®—æœº ä¿å­˜ä»–ä»¬çš„æ–‡å­—ï¼Œä»–ä»¬å†³å®šé‡‡ç”¨ 127å·ä¹‹åçš„ç©ºä½æ¥è¡¨ç¤ºè¿™äº›æ–°çš„å­—æ¯ã€ç¬¦å·ï¼Œè¿˜åŠ å…¥äº†å¾ˆå¤šç”»è¡¨æ ¼æ—¶éœ€è¦ç”¨ä¸‹åˆ°çš„æ¨ªçº¿ã€ç«–çº¿ã€äº¤å‰ç­‰å½¢çŠ¶ï¼Œä¸€ç›´æŠŠåºå·ç¼–åˆ°äº†æœ€åä¸€ä¸ªçŠ¶æ€255ã€‚ä»128 åˆ°255è¿™ä¸€é¡µçš„å­—ç¬¦é›†è¢«ç§°æ‰©å±•å­—ç¬¦é›†ã€‚ä»æ­¤ä¹‹åï¼Œè´ªå©ªçš„äººç±»å†æ²¡æœ‰æ–°çš„çŠ¶æ€å¯ä»¥ç”¨äº†ï¼Œç¾å¸å›½ä¸»ä¹‰å¯èƒ½æ²¡æœ‰æƒ³åˆ°è¿˜æœ‰ç¬¬ä¸‰ä¸–ç•Œå›½å®¶çš„äººä»¬ä¹Ÿå¸Œæœ›å¯ä»¥ç”¨åˆ°è®¡ç®—æœºå§ï¼
<img src="/myimg/other/asc2.jpg" alt="" /></p>

<p>ç­‰ä¸­å›½äººä»¬å¾—åˆ°è®¡ç®—æœºæ—¶ï¼Œå·²ç»æ²¡æœ‰å¯ä»¥åˆ©ç”¨çš„å­—èŠ‚çŠ¶æ€æ¥è¡¨ç¤ºæ±‰å­—ï¼Œå†µä¸”æœ‰6000å¤šä¸ªå¸¸ç”¨æ±‰å­—éœ€è¦ä¿å­˜å‘¢ã€‚ä½†æ˜¯è¿™éš¾ä¸å€’æ™ºæ…§çš„ä¸­å›½äººæ°‘ï¼Œæˆ‘ä»¬ä¸å®¢æ°” åœ°æŠŠé‚£äº›127å·ä¹‹åçš„å¥‡å¼‚ç¬¦å·ä»¬ç›´æ¥å–æ¶ˆæ‰, è§„å®šï¼šä¸€ä¸ªå°äº127çš„å­—ç¬¦çš„æ„ä¹‰ä¸åŸæ¥ç›¸åŒï¼Œä½†ä¸¤ä¸ªå¤§äº127çš„å­—ç¬¦è¿åœ¨ä¸€èµ·æ—¶ï¼Œå°±è¡¨ç¤ºä¸€ä¸ªæ±‰å­—ï¼Œå‰é¢çš„ä¸€ä¸ªå­—èŠ‚ï¼ˆä»–ç§°ä¹‹ä¸ºé«˜å­—èŠ‚ï¼‰ä»0xA1ç”¨åˆ° 0xF7(16è¿›åˆ¶ä»¥0xå¼€å¤´)ï¼Œåé¢ä¸€ä¸ªå­—èŠ‚ï¼ˆä½å­—èŠ‚ï¼‰ä»0xA1åˆ°0xFEï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ç»„åˆå‡ºå¤§çº¦7000å¤šä¸ªç®€ä½“æ±‰å­—äº†ã€‚åœ¨è¿™äº›ç¼–ç é‡Œï¼Œæˆ‘ä»¬è¿˜æŠŠæ•°å­¦ç¬¦å·ã€ç½—é©¬å¸Œè…Šçš„ å­—æ¯ã€æ—¥æ–‡çš„å‡åä»¬éƒ½ç¼–è¿›å»äº†ï¼Œè¿åœ¨ ASCII é‡Œæœ¬æ¥å°±æœ‰çš„æ•°å­—ã€æ ‡ç‚¹ã€å­—æ¯éƒ½ç»Ÿç»Ÿé‡æ–°ç¼–äº†ä¸¤ä¸ªå­—èŠ‚é•¿çš„ç¼–ç ï¼Œè¿™å°±æ˜¯å¸¸è¯´çš„â€å…¨è§’â€å­—ç¬¦ï¼Œè€ŒåŸæ¥åœ¨127å·ä»¥ä¸‹çš„é‚£äº›å°±å«â€åŠè§’â€å­—ç¬¦äº†ã€‚ ä¸­å›½äººæ°‘çœ‹åˆ°è¿™æ ·å¾ˆä¸é”™ï¼Œäºæ˜¯å°±æŠŠè¿™ç§æ±‰å­—æ–¹æ¡ˆå«åš â€œGB2312â€œã€‚GB2312 æ˜¯å¯¹ ASCII çš„ä¸­æ–‡æ‰©å±•ã€‚
<img src="/myimg/other/gbk1.png" alt="" /></p>

<p>ä½†æ˜¯ä¸­å›½çš„æ±‰å­—å¤ªå¤šäº†ï¼Œæˆ‘ä»¬å¾ˆå¿«å°±å°±å‘ç°æœ‰è®¸å¤šäººçš„äººåæ²¡æœ‰åŠæ³•åœ¨è¿™é‡Œæ‰“å‡ºæ¥ï¼Œç‰¹åˆ«æ˜¯æŸäº›å¾ˆä¼šéº»çƒ¦åˆ«äººçš„å›½å®¶é¢†å¯¼äººã€‚äºæ˜¯æˆ‘ä»¬ä¸å¾—ä¸ç»§ç»­æŠŠ GB2312 æ²¡æœ‰ç”¨åˆ°çš„ç ä½æ‰¾å‡ºæ¥è€å®ä¸å®¢æ°”åœ°ç”¨ä¸Šã€‚ åæ¥è¿˜æ˜¯ä¸å¤Ÿç”¨ï¼Œäºæ˜¯å¹²è„†ä¸å†è¦æ±‚ä½å­—èŠ‚ä¸€å®šæ˜¯127å·ä¹‹åçš„å†…ç ï¼Œåªè¦ç¬¬ä¸€ä¸ªå­—èŠ‚æ˜¯å¤§äº127å°±å›ºå®šè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªæ±‰å­—çš„å¼€å§‹ï¼Œä¸ç®¡åé¢è·Ÿçš„æ˜¯ä¸æ˜¯æ‰©å±•å­— ç¬¦é›†é‡Œçš„å†…å®¹ã€‚ç»“æœæ‰©å±•ä¹‹åçš„ç¼–ç æ–¹æ¡ˆè¢«ç§°ä¸º GBK æ ‡å‡†ï¼ŒGBKåŒ…æ‹¬äº†GB2312 çš„æ‰€æœ‰å†…å®¹ï¼ŒåŒæ—¶åˆå¢åŠ äº†è¿‘20000ä¸ªæ–°çš„æ±‰å­—ï¼ˆåŒ…æ‹¬ç¹ä½“å­—ï¼‰å’Œç¬¦å·ã€‚ åæ¥å°‘æ•°æ°‘æ—ä¹Ÿè¦ç”¨ç”µè„‘äº†ï¼Œäºæ˜¯æˆ‘ä»¬å†æ‰©å±•ï¼ŒåˆåŠ äº†å‡ åƒä¸ªæ–°çš„å°‘æ•°æ°‘æ—çš„å­—ï¼ŒGBKæ‰©æˆäº† GB18030ã€‚ä»æ­¤ä¹‹åï¼Œä¸­åæ°‘æ—çš„æ–‡åŒ–å°±å¯ä»¥åœ¨è®¡ç®—æœºæ—¶ä»£ä¸­ä¼ æ‰¿äº†ã€‚ ä¸­å›½çš„ç¨‹åºå‘˜ä»¬çœ‹åˆ°è¿™ä¸€ç³»åˆ—æ±‰å­—ç¼–ç çš„æ ‡å‡†æ˜¯å¥½çš„ï¼Œäºæ˜¯é€šç§°ä»–ä»¬å«åš â€œDBCSâ€œï¼ˆDouble Byte Charecter Set åŒå­—èŠ‚å­—ç¬¦é›†ï¼‰ã€‚åœ¨DBCSç³»åˆ—æ ‡å‡†é‡Œï¼Œæœ€å¤§çš„ç‰¹ç‚¹æ˜¯ä¸¤å­—èŠ‚é•¿çš„æ±‰å­—å­—ç¬¦å’Œä¸€å­—èŠ‚é•¿çš„è‹±æ–‡å­—ç¬¦å¹¶å­˜äºåŒä¸€å¥—ç¼–ç æ–¹æ¡ˆé‡Œï¼Œå› æ­¤ä»–ä»¬å†™çš„ç¨‹åºä¸ºäº†æ”¯æŒä¸­æ–‡å¤„ ç†ï¼Œå¿…é¡»è¦æ³¨æ„å­—ä¸²é‡Œçš„æ¯ä¸€ä¸ªå­—èŠ‚çš„å€¼ï¼Œå¦‚æœè¿™ä¸ªå€¼æ˜¯å¤§äº127çš„ï¼Œé‚£ä¹ˆå°±è®¤ä¸ºä¸€ä¸ªåŒå­—èŠ‚å­—ç¬¦é›†é‡Œçš„å­—ç¬¦å‡ºç°äº†ã€‚é‚£æ—¶å€™å‡¡æ˜¯å—è¿‡åŠ æŒï¼Œä¼šç¼–ç¨‹çš„è®¡ç®—æœºåƒ§ä¾£ ä»¬éƒ½è¦æ¯å¤©å¿µä¸‹é¢è¿™ä¸ªå’’è¯­æ•°ç™¾éï¼š â€œä¸€ä¸ªæ±‰å­—ç®—ä¸¤ä¸ªè‹±æ–‡å­—ç¬¦ï¼ä¸€ä¸ªæ±‰å­—ç®—ä¸¤ä¸ªè‹±æ–‡å­—ç¬¦â€¦â€¦â€</p>

<p>å› ä¸ºå½“æ—¶å„ä¸ªå›½å®¶éƒ½åƒä¸­å›½è¿™æ ·æå‡ºä¸€å¥—è‡ªå·±çš„ç¼–ç æ ‡å‡†ï¼Œç»“æœäº’ç›¸ä¹‹é—´è°ä¹Ÿä¸æ‡‚è°çš„ç¼–ç ï¼Œè°ä¹Ÿä¸æ”¯æŒåˆ«äººçš„ç¼–ç ï¼Œè¿å¤§é™†å’Œå°æ¹¾è¿™æ ·åªç›¸éš”äº†150æµ· é‡Œï¼Œä½¿ç”¨ç€åŒä¸€ç§è¯­è¨€çš„å…„å¼Ÿåœ°åŒºï¼Œä¹Ÿåˆ†åˆ«é‡‡ç”¨äº†ä¸åŒçš„ DBCS ç¼–ç æ–¹æ¡ˆâ€”â€”å½“æ—¶çš„ä¸­å›½äººæƒ³è®©ç”µè„‘æ˜¾ç¤ºæ±‰å­—ï¼Œå°±å¿…é¡»è£…ä¸Šä¸€ä¸ªâ€æ±‰å­—ç³»ç»Ÿâ€ï¼Œä¸“é—¨ç”¨æ¥å¤„ç†æ±‰å­—çš„æ˜¾ç¤ºã€è¾“å…¥çš„é—®é¢˜ï¼Œä½†æ˜¯é‚£ä¸ªå°æ¹¾çš„æ„šæ˜§å°å»ºäººå£«å†™çš„ç®—å‘½ç¨‹åº å°±å¿…é¡»åŠ è£…å¦ä¸€å¥—æ”¯æŒ BIG5 ç¼–ç çš„ä»€ä¹ˆâ€å€šå¤©æ±‰å­—ç³»ç»Ÿâ€æ‰å¯ä»¥ç”¨ï¼Œè£…é”™äº†å­—ç¬¦ç³»ç»Ÿï¼Œæ˜¾ç¤ºå°±ä¼šä¹±äº†å¥—ï¼è¿™æ€ä¹ˆåŠï¼Ÿè€Œä¸”ä¸–ç•Œæ°‘æ—ä¹‹æ—ä¸­è¿˜æœ‰é‚£äº›ä¸€æ—¶ç”¨ä¸ä¸Šç”µè„‘çš„ç©·è‹¦äººæ°‘ï¼Œä»–ä»¬çš„æ–‡å­—åˆæ€ ä¹ˆåŠï¼Ÿ çœŸæ˜¯è®¡ç®—æœºçš„å·´æ¯”ä¼¦å¡”å‘½é¢˜å•Šï¼</p>

<p>æ­£åœ¨è¿™æ—¶ï¼Œå¤§å¤©ä½¿åŠ ç™¾åˆ—åŠæ—¶å‡ºç°äº†â€”â€”ä¸€ä¸ªå« ISO ï¼ˆå›½é™…æ ‡è°åŒ–ç»„ç»‡ï¼‰çš„å›½é™…ç»„ç»‡å†³å®šç€æ‰‹è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ä»–ä»¬é‡‡ç”¨çš„æ–¹æ³•å¾ˆç®€å•ï¼šåºŸäº†æ‰€æœ‰çš„åœ°åŒºæ€§ç¼–ç æ–¹æ¡ˆï¼Œé‡æ–°æä¸€ä¸ªåŒ…æ‹¬äº†åœ°çƒä¸Šæ‰€æœ‰æ–‡åŒ–ã€æ‰€æœ‰å­—æ¯å’Œç¬¦å· çš„ç¼–ç ï¼ä»–ä»¬æ‰“ç®—å«å®ƒâ€Universal Multiple-Octet Coded Character Setâ€ï¼Œç®€ç§° UCS, ä¿—ç§° â€œunicodeâ€œã€‚</p>

<p>unicodeå¼€å§‹åˆ¶è®¢æ—¶ï¼Œè®¡ç®—æœºçš„å­˜å‚¨å™¨å®¹é‡æå¤§åœ°å‘å±•äº†ï¼Œç©ºé—´å†ä¹Ÿä¸æˆä¸ºé—®é¢˜äº†ã€‚äºæ˜¯ ISO å°±ç›´æ¥è§„å®šå¿…é¡»ç”¨ä¸¤ä¸ªå­—èŠ‚ï¼Œä¹Ÿå°±æ˜¯16ä½æ¥ç»Ÿä¸€è¡¨ç¤ºæ‰€æœ‰çš„å­—ç¬¦ï¼Œå¯¹äºASCIIé‡Œçš„é‚£äº›â€œåŠè§’â€å­—ç¬¦ï¼ŒunicodeåŒ…æŒå…¶åŸç¼–ç ä¸å˜ï¼Œåªæ˜¯å°†å…¶é•¿åº¦ç”±åŸ æ¥çš„8ä½æ‰©å±•ä¸º16ä½ï¼Œè€Œå…¶ä»–æ–‡åŒ–å’Œè¯­è¨€çš„å­—ç¬¦åˆ™å…¨éƒ¨é‡æ–°ç»Ÿä¸€ç¼–ç ã€‚ç”±äºâ€åŠè§’â€è‹±æ–‡ç¬¦å·åªéœ€è¦ç”¨åˆ°ä½8ä½ï¼Œæ‰€ä»¥å…¶é«˜8ä½æ°¸è¿œæ˜¯0ï¼Œå› æ­¤è¿™ç§å¤§æ°”çš„æ–¹æ¡ˆåœ¨ ä¿å­˜è‹±æ–‡æ–‡æœ¬æ—¶ä¼šå¤šæµªè´¹ä¸€å€çš„ç©ºé—´ã€‚</p>

<p>è¿™æ—¶å€™ï¼Œä»æ—§ç¤¾ä¼šé‡Œèµ°è¿‡æ¥çš„ç¨‹åºå‘˜å¼€å§‹å‘ç°ä¸€ä¸ªå¥‡æ€ªçš„ç°è±¡ï¼šä»–ä»¬çš„strlenå‡½æ•°é ä¸ä½äº†ï¼Œä¸€ä¸ªæ±‰å­—ä¸å†æ˜¯ç›¸å½“äºä¸¤ä¸ªå­—ç¬¦äº†ï¼Œè€Œæ˜¯ä¸€ä¸ªï¼æ˜¯çš„ï¼Œä»unicodeå¼€å§‹ï¼Œæ— è®ºæ˜¯åŠè§’çš„è‹±æ–‡å­—æ¯ï¼Œè¿˜æ˜¯å…¨è§’çš„æ±‰å­—ï¼Œå®ƒä»¬éƒ½æ˜¯ç»Ÿä¸€çš„â€ä¸€ä¸ªå­—ç¬¦â€œï¼åŒæ—¶ï¼Œä¹Ÿéƒ½æ˜¯ç»Ÿä¸€çš„â€ä¸¤ä¸ªå­—èŠ‚â€œï¼Œè¯·æ³¨æ„â€å­—ç¬¦â€å’Œâ€å­—èŠ‚â€ä¸¤ä¸ªæœ¯è¯­çš„ä¸åŒï¼Œâ€œå­—èŠ‚â€æ˜¯ä¸€ä¸ª8ä½çš„ç‰©ç†å­˜è´®å•å…ƒï¼Œè€Œâ€œå­—ç¬¦â€åˆ™æ˜¯ä¸€ä¸ªæ–‡åŒ–ç›¸å…³çš„ç¬¦å·ã€‚åœ¨unicodeä¸­ï¼Œä¸€ä¸ªå­—ç¬¦å°±æ˜¯ä¸¤ä¸ªå­—èŠ‚ã€‚ä¸€ä¸ªæ±‰å­—ç®—ä¸¤ä¸ªè‹±æ–‡å­—ç¬¦çš„æ—¶ä»£å·²ç»å¿«è¿‡å»äº†ã€‚</p>

<p>ä»å‰å¤šç§å­—ç¬¦é›†å­˜åœ¨æ—¶ï¼Œé‚£äº›åšå¤šè¯­è¨€è½¯ä»¶çš„å…¬å¸é‡ä¸Šè¿‡å¾ˆå¤§éº»çƒ¦ï¼Œä»–ä»¬ä¸ºäº†åœ¨ä¸åŒçš„å›½å®¶é”€å”®åŒä¸€å¥—è½¯ä»¶ï¼Œå°±ä¸å¾—ä¸åœ¨åŒºåŸŸåŒ–è½¯ä»¶æ—¶ä¹ŸåŠ æŒé‚£ä¸ªåŒå­—èŠ‚å­—ç¬¦é›†å’’è¯­ï¼Œä¸ä»…è¦å¤„å¤„å°å¿ƒä¸è¦æé”™ï¼Œè¿˜è¦æŠŠè½¯ä»¶ä¸­çš„æ–‡å­—åœ¨ä¸åŒçš„å­—ç¬¦é›†ä¸­è½¬æ¥è½¬å»ã€‚UNICODE å¯¹äºä»–ä»¬æ¥è¯´æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¸€æ½å­è§£å†³æ–¹æ¡ˆï¼Œäºæ˜¯ä» Windows NT å¼€å§‹ï¼ŒMS è¶æœºæŠŠå®ƒä»¬çš„æ“ä½œç³»ç»Ÿæ”¹äº†ä¸€éï¼ŒæŠŠæ‰€æœ‰çš„æ ¸å¿ƒä»£ç éƒ½æ”¹æˆäº†ç”¨ UNICODE æ–¹å¼å·¥ä½œçš„ç‰ˆæœ¬ï¼Œä»è¿™æ—¶å¼€å§‹ï¼ŒWINDOWS ç³»ç»Ÿç»ˆäºæ— éœ€è¦åŠ è£…å„ç§æœ¬åœŸè¯­è¨€ç³»ç»Ÿï¼Œå°±å¯ä»¥æ˜¾ç¤ºå…¨ä¸–ç•Œä¸Šæ‰€æœ‰æ–‡åŒ–çš„å­—ç¬¦äº†ã€‚</p>

<p>ä½†æ˜¯ï¼ŒUNICODE åœ¨åˆ¶è®¢æ—¶æ²¡æœ‰è€ƒè™‘ä¸ä»»ä½•ä¸€ç§ç°æœ‰çš„ç¼–ç æ–¹æ¡ˆä¿æŒå…¼å®¹ï¼Œè¿™ä½¿å¾— GBK ä¸UNICODE åœ¨æ±‰å­—çš„å†…ç ç¼–æ’ä¸Šå®Œå…¨æ˜¯ä¸ä¸€æ ·çš„ï¼Œæ²¡æœ‰ä¸€ç§ç®€å•çš„ç®—æœ¯æ–¹æ³•å¯ä»¥æŠŠæ–‡æœ¬å†…å®¹ä»UNICODEç¼–ç å’Œå¦ä¸€ç§ç¼–ç è¿›è¡Œè½¬æ¢ï¼Œè¿™ç§è½¬æ¢å¿…é¡»é€šè¿‡æŸ¥è¡¨æ¥è¿›è¡Œã€‚</p>

<p>å¦‚å‰æ‰€è¿°ï¼ŒUNICODE æ˜¯ç”¨ä¸¤ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºä¸ºä¸€ä¸ªå­—ç¬¦ï¼Œä»–æ€»å…±å¯ä»¥ç»„åˆå‡º65535ä¸åŒçš„å­—ç¬¦ï¼Œè¿™å¤§æ¦‚å·²ç»å¯ä»¥è¦†ç›–ä¸–ç•Œä¸Šæ‰€æœ‰æ–‡åŒ–çš„ç¬¦å·ã€‚å¦‚æœè¿˜ä¸å¤Ÿä¹Ÿæ²¡æœ‰å…³ç³»ï¼ŒISOå·²ç»å‡†å¤‡äº†UCS-4æ–¹æ¡ˆï¼Œè¯´ç®€å•äº†å°±æ˜¯å››ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ç»„åˆå‡º21äº¿ä¸ªä¸åŒçš„å­—ç¬¦å‡ºæ¥ï¼ˆæœ€é«˜ä½æœ‰å…¶ä»–ç”¨é€”ï¼‰ï¼Œè¿™å¤§æ¦‚å¯ä»¥ç”¨åˆ°é“¶æ²³è”é‚¦æˆç«‹é‚£ä¸€å¤©å§ï¼</p>

<p>è¿™é‡Œå°±æœ‰ä¸¤ä¸ªçš„é—®é¢˜ï¼Œä¸€ä¸ªæ˜¯å¦‚ä½•æ‰èƒ½åŒºåˆ«unicodeå’Œasciiï¼Ÿè®¡ç®—æœºæ€ä¹ˆçŸ¥é“ä¸‰ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªç¬¦å·ï¼Œè€Œä¸æ˜¯åˆ†åˆ«è¡¨ç¤ºä¸‰ä¸ªç¬¦å·å‘¢ï¼Ÿç¬¬äºŒä¸ªé—®é¢˜æ˜¯ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“ï¼Œè‹±æ–‡å­—æ¯åªç”¨ä¸€ä¸ªå­—èŠ‚è¡¨ç¤ºå°±å¤Ÿäº†ï¼Œå¦‚æœunicodeç»Ÿä¸€è§„å®šï¼Œæ¯ä¸ªç¬¦å·ç”¨ä¸‰ä¸ªæˆ–å››ä¸ªå­—èŠ‚è¡¨ç¤ºï¼Œé‚£ä¹ˆæ¯ ä¸ªè‹±æ–‡å­—æ¯å‰éƒ½å¿…ç„¶æœ‰äºŒåˆ°ä¸‰ä¸ªå­—èŠ‚æ˜¯0ï¼Œè¿™å¯¹äºå­˜å‚¨ç©ºé—´æ¥è¯´æ˜¯æå¤§çš„æµªè´¹ï¼Œæ–‡æœ¬æ–‡ä»¶çš„å¤§å°ä¼šå› æ­¤å¤§å‡ºäºŒä¸‰å€ï¼Œè¿™æ˜¯éš¾ä»¥æ¥å—çš„ã€‚</p>

<p>unicodeåœ¨å¾ˆé•¿ä¸€æ®µæ—¶é—´å†…æ— æ³•æ¨å¹¿ï¼Œç›´åˆ°äº’è”ç½‘çš„å‡ºç°ï¼Œä¸ºè§£å†³unicodeå¦‚ä½•åœ¨ç½‘ç»œä¸Šä¼ è¾“çš„é—®é¢˜ï¼Œäºæ˜¯é¢å‘ä¼ è¾“çš„ä¼—å¤š UTFï¼ˆUCS Transfer Formatï¼‰æ ‡å‡†å‡ºç°äº†ï¼Œé¡¾åæ€ä¹‰ï¼ŒUTF-8å°±æ˜¯æ¯æ¬¡8ä¸ªä½ä¼ è¾“æ•°æ®ï¼Œè€ŒUTF-16å°±æ˜¯æ¯æ¬¡16ä¸ªä½ã€‚UTF-8å°±æ˜¯åœ¨äº’è”ç½‘ä¸Šä½¿ç”¨æœ€å¹¿çš„ä¸€ç§unicodeçš„å®ç°æ–¹å¼ï¼Œè¿™æ˜¯ä¸ºä¼ è¾“è€Œè®¾è®¡çš„ç¼–ç ï¼Œå¹¶ä½¿ç¼–ç æ— å›½ç•Œï¼Œè¿™æ ·å°±å¯ä»¥æ˜¾ç¤ºå…¨ä¸–ç•Œä¸Šæ‰€æœ‰æ–‡åŒ–çš„å­—ç¬¦äº†ã€‚</p>

<p>UTF-8(8-bit Unicode Transformation Format)æœ€å¤§çš„ä¸€ä¸ªç‰¹ç‚¹ï¼Œå°±æ˜¯å®ƒæ˜¯ä¸€ç§å˜é•¿çš„ç¼–ç æ–¹å¼ã€‚å®ƒå¯ä»¥ä½¿ç”¨1~4ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªç¬¦å·ï¼Œæ ¹æ®ä¸åŒçš„ç¬¦å·è€Œå˜åŒ–å­—èŠ‚é•¿åº¦ï¼Œå½“å­—ç¬¦åœ¨ASCII ç çš„èŒƒå›´æ—¶ï¼Œå°±ç”¨ä¸€ä¸ªå­—èŠ‚è¡¨ç¤ºï¼Œä¿ç•™äº†ASCIIå­—ç¬¦ä¸€ä¸ªå­—èŠ‚çš„ç¼–ç åšä¸ºå®ƒçš„ä¸€éƒ¨åˆ†ï¼Œæ³¨æ„çš„æ˜¯unicodeä¸€ä¸ªä¸­æ–‡å­—ç¬¦å 2ä¸ªå­—èŠ‚ï¼Œè€ŒUTF-8ä¸€ä¸ªä¸­ æ–‡å­—ç¬¦å 3ä¸ªå­—èŠ‚ã€‚ä»unicodeåˆ°uft-8å¹¶ä¸æ˜¯ç›´æ¥çš„å¯¹åº”ï¼Œè€Œæ˜¯è¦è¿‡ä¸€äº›ç®—æ³•å’Œè§„åˆ™æ¥è½¬æ¢ã€‚</p>

<p>è®²åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å†é¡ºä¾¿è¯´è¯´ä¸€ä¸ªå¾ˆè‘—åçš„å¥‡æ€ªç°è±¡ï¼šå½“ä½ åœ¨ windows çš„è®°äº‹æœ¬é‡Œæ–°å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œè¾“å…¥"è”é€š"ä¸¤ä¸ªå­—ä¹‹åï¼Œä¿å­˜ï¼Œå…³é—­ï¼Œç„¶åå†æ¬¡æ‰“å¼€ï¼Œä½ ä¼šå‘ç°è¿™ä¸¤ä¸ªå­—å·²ç»æ¶ˆå¤±äº†ï¼Œä»£ä¹‹çš„æ˜¯å‡ ä¸ªä¹±ç ï¼å‘µå‘µï¼Œæœ‰äººè¯´è¿™å°±æ˜¯è”é€šä¹‹æ‰€ä»¥æ‹¼ä¸è¿‡ç§»åŠ¨çš„åŸå› ã€‚å…¶å®è¿™æ˜¯å› ä¸ºGB2312ç¼–ç ä¸UTF-8ç¼–ç äº§ç”Ÿäº†ç¼–ç å†²æ’çš„åŸå› ã€‚</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Unicodeç¬¦å·èŒƒå›´     |        UTF-8ç¼–ç æ–¹å¼
</span><span class='line'> (åå…­è¿›åˆ¶)         |           ï¼ˆäºŒè¿›åˆ¶ï¼‰
</span><span class='line'>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
</span><span class='line'>0000 0000 0000 007F | 0xxxxxxx
</span><span class='line'>0000 0080 0000 07FF | 110xxxxx 10xxxxxx
</span><span class='line'>0000 0800 0000 FFFF | 1110xxxx 10xxxxxx 10xxxxxx
</span><span class='line'>0001 0000 0010 FFFF | 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx
</span><span class='line'>... ...</span></code></pre></td></tr></table></div></figure>


<p>ä¾‹å¦‚"æ±‰"å­—çš„Unicodeç¼–ç æ˜¯6C49ã€‚6C49åœ¨0800-FFFFä¹‹é—´ï¼Œæ‰€ä»¥è¦ç”¨3å­—èŠ‚æ¨¡æ¿ï¼š1110xxxx 10xxxxxx 10xxxxxxã€‚å°†6C49å†™æˆäºŒè¿›åˆ¶æ˜¯ï¼š0110 1100 0100 1001ï¼Œå°†è¿™ä¸ªæ¯”ç‰¹æµæŒ‰ä¸‰å­—èŠ‚æ¨¡æ¿çš„åˆ†æ®µæ–¹æ³•åˆ†ä¸º0110110001001001ï¼Œä¾æ¬¡ä»£æ›¿ä¸Šé¢3å­—èŠ‚æ¨¡æ¿<code>1110xxxx 10xxxxxx 10xxxxxx</code>ä¸­çš„xï¼Œå¾—åˆ°ï¼š1110-0110 10-110001 10-001001ï¼Œå³E6 B1 89ï¼Œè¿™å°±æ˜¯å…¶UTF-8çš„ç¼–ç ã€‚</p>

<p>è€Œå½“ä½ æ–°å»ºä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶æ—¶ï¼Œè®°äº‹æœ¬çš„ç¼–ç é»˜è®¤æ˜¯ANSI, å¦‚æœä½ åœ¨ANSIçš„ç¼–ç è¾“å…¥æ±‰å­—ï¼Œé‚£ä¹ˆä»–å®é™…å°±æ˜¯GBç³»åˆ—çš„ç¼–ç æ–¹å¼ï¼Œåœ¨è¿™ç§ç¼–ç ä¸‹ï¼Œ"è”é€š"çš„GBå†…ç æ˜¯ï¼š</p>

<pre><code>c1 1100 0001
aa 1010 1010

cd 1100 1101
a8 1010 1000
</code></pre>

<p>æ³¨æ„åˆ°äº†å—ï¼Ÿç¬¬ä¸€äºŒä¸ªå­—èŠ‚ã€ç¬¬ä¸‰å››ä¸ªå­—èŠ‚çš„èµ·å§‹éƒ¨åˆ†åˆ†åˆ«éƒ½æ˜¯"110"å’Œ"10"ï¼Œæ­£å¥½ä¸UTF-8è§„åˆ™é‡Œçš„ä¸¤å­—èŠ‚æ¨¡æ¿æ˜¯ä¸€è‡´çš„ï¼Œäºæ˜¯å†æ¬¡æ‰“å¼€è®°äº‹æœ¬æ—¶ï¼Œè®°äº‹æœ¬å°±è¯¯è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªUTF-8ç¼–ç çš„æ–‡ä»¶ï¼Œè®©æˆ‘ä»¬æŠŠç¬¬ä¸€ä¸ªå­—èŠ‚çš„110å’Œç¬¬äºŒä¸ªå­—èŠ‚çš„10å»æ‰ï¼Œæˆ‘ä»¬å°±å¾—åˆ°äº†"00001 101010"ï¼Œå†æŠŠå„ä½å¯¹é½ï¼Œè¡¥ä¸Šå‰å¯¼çš„0ï¼Œå°±å¾—åˆ°äº†"0000 0000 0110 1010"ï¼Œä¸å¥½æ„æ€ï¼Œè¿™æ˜¯unicodeçš„006Aï¼Œä¹Ÿå°±æ˜¯å°å†™çš„å­—æ¯"j"ï¼Œè€Œä¹‹åçš„ä¸¤å­—èŠ‚ç”¨UTF-8è§£ç ä¹‹åæ˜¯0368ï¼Œè¿™ä¸ªå­—ç¬¦ä»€ä¹ˆä¹Ÿä¸æ˜¯ã€‚</p>

<p>è¿™å°±æ˜¯åªæœ‰"è”é€š"ä¸¤ä¸ªå­—çš„æ–‡ä»¶æ²¡æœ‰åŠæ³•åœ¨è®°äº‹æœ¬é‡Œæ­£å¸¸æ˜¾ç¤ºçš„åŸå› ã€‚è€Œå¦‚æœä½ åœ¨"è”é€š"ä¹‹åå¤šè¾“å…¥å‡ ä¸ªå­—ï¼Œå…¶ä»–çš„å­—çš„ç¼–ç ä¸è§å¾—åˆæ°å¥½æ˜¯110å’Œ10å¼€å§‹çš„å­—èŠ‚ï¼Œè¿™æ ·å†æ¬¡æ‰“å¼€æ—¶ï¼Œè®°äº‹æœ¬å°±ä¸ä¼šåšæŒè¿™æ˜¯ä¸€ä¸ªUTF-8ç¼–ç çš„æ–‡ä»¶ï¼Œè€Œä¼šç”¨ANSIçš„æ–¹å¼è§£è¯»ä¹‹ï¼Œè¿™æ—¶ä¹±ç åˆä¸å‡ºç°äº†ã€‚</p>
</div>
  
  


      | <a href="/blog/2016/12/08/utf8/#comments">Comments</a>


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/12/03/node-js/">Node</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-12-03T10:24:36+08:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>3</span><span class='date-suffix'>rd</span>, <span class='date-year'>2016</span></span> <span class='time'>10:24 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Node.js æ˜¯è¿è¡Œåœ¨æœåŠ¡ç«¯çš„ JavaScriptã€‚Node.js åº”ç”¨æ˜¯ç”±å‡ éƒ¨åˆ†ç»„æˆçš„ï¼š</p>

<pre><code>1. å¼•å…¥ require æ¨¡å—ï¼šå¯ä»¥ä½¿ç”¨ require æŒ‡ä»¤æ¥è½½å…¥ Node.js æ¨¡å—ã€‚
2. åˆ›å»ºæœåŠ¡å™¨ï¼šæœåŠ¡å™¨å¯ä»¥ç›‘å¬å®¢æˆ·ç«¯çš„è¯·æ±‚
3. æ¥æ”¶è¯·æ±‚ä¸å“åº”è¯·æ±‚: å¯ä»¥ä½¿ç”¨æµè§ˆå™¨æˆ–å®¢æˆ·ç«¯å‘é€ HTTP è¯·æ±‚ï¼ŒæœåŠ¡å™¨æ¥æ”¶è¯·æ±‚åè¿”å›å“åº”æ•°æ®ã€‚
</code></pre>

<h4>Hello World</h4>

<p>åˆ›å»ºä¸€ä¸ªtest.jsæ–‡ä»¶ï¼Œé‡Œé¢è¾“å…¥å¦‚ä¸‹å†…å®¹ã€‚ç»ˆç«¯è¿›å…¥æ–‡ä»¶æ‰€åœ¨æ–‡ä»¶å¤¹ï¼Œæ‰§è¡Œ<code>node test.js</code>,æµè§ˆå™¨åœ°å€æ è¾“å…¥<code>http://127.0.0.1:8888/</code>å°±å¯ä»¥çœ‹åˆ°Hello Worldäº†ã€‚</p>

<pre><code>//å¼•ç”¨httpæ¨¡å—
var http = require('http');
http.createServer(function (request, response) {
    // å‘é€ HTTP å¤´éƒ¨ 
    // HTTP çŠ¶æ€å€¼: 200 : OK
    // å†…å®¹ç±»å‹: text/plain
    response.writeHead(200, {'Content-Type': 'text/plain'});
    // å‘é€å“åº”æ•°æ® "Hello World"
    response.end('Hello Worldï¼\n');
}).listen(8888);
</code></pre>

<p><img src="/myimg/react/nodeHello.png" width="400" alt="" /></p>

<h4>NPM</h4>

<p>npm æ˜¯jsåŒ…ç®¡ç†å·¥å…·ï¼Œåƒ CocoaPods ä¼¼çš„å¯ä»¥ä¸‹è½½è¢«äººç¼–å†™çš„ç¬¬ä¸‰æ–¹åŒ…ï¼Œä¹Ÿå¯ä»¥æŠŠè‡ªå·±å†™çš„åŒ…ä¸Šä¼ çš„npmæœåŠ¡å™¨ã€‚</p>

<p><code>npm install åŒ…å</code> æœ¬åœ°å®‰è£…,å°†å®‰è£…åŒ…æ”¾åœ¨ ./node_modules ä¸‹ï¼Œå¦‚æœæ²¡æœ‰ node_modules æ–‡ä»¶å¤¹ï¼Œä¼šåœ¨å½“å‰æ‰§è¡Œ npm å‘½ä»¤çš„ç›®å½•ä¸‹ç”Ÿæˆ node_modules æ–‡ä»¶å¤¹ã€‚ç„¶åå°±å¯ä»¥é€šè¿‡require(åŒ…å) æ¥å¼•å…¥æœ¬åœ°å®‰è£…çš„åŒ…ã€‚</p>

<p><code>npm install åŒ…åå­— -g</code> å…¨å±€å®‰è£…ï¼Œå°†å®‰è£…åŒ…æ”¾åœ¨ /usr/local ä¸‹æˆ–è€… node çš„å®‰è£…ç›®å½•ã€‚</p>

<p><code>npm uninstall åŒ…å</code> å¸è½½åŒ…</p>

<p><code>npm update åŒ…å</code> æ›´æ–°åŒ…</p>

<p><code>npm search åŒ…å</code> æœç´¢åŒ…</p>

<h4>package.json</h4>

<p>package.json ç”¨äºè¡¨ç¤ºéœ€è¦å®‰è£…çš„åŒ…çš„å±æ€§ï¼Œå¦‚åå­—ï¼Œç‰ˆæœ¬ï¼Œä¾èµ–ç­‰ã€‚package.json æ–‡ä»¶æ˜¯å¿…ä¸å¯å°‘çš„ã€‚å¯é€šè¿‡<code>npm init</code>åˆ›å»ºè¯¥æ–‡ä»¶ã€‚</p>

<pre><code>//Package.json å±æ€§è¯´æ˜
name - åŒ…åã€‚
version - åŒ…çš„ç‰ˆæœ¬å·ã€‚
description - åŒ…çš„æè¿°ã€‚
homepage - åŒ…çš„å®˜ç½‘ url ã€‚
author - åŒ…çš„ä½œè€…å§“åã€‚
contributors - åŒ…çš„å…¶ä»–è´¡çŒ®è€…å§“åã€‚
dependencies - ä¾èµ–åŒ…åˆ—è¡¨ã€‚å¦‚æœä¾èµ–åŒ…æ²¡æœ‰å®‰è£…ï¼Œnpm ä¼šè‡ªåŠ¨å°†ä¾èµ–åŒ…å®‰è£…åœ¨ node_module ç›®å½•ä¸‹ã€‚
repository - åŒ…ä»£ç å­˜æ”¾çš„åœ°æ–¹çš„ç±»å‹ï¼Œå¯ä»¥æ˜¯ git æˆ– svnï¼Œgit å¯åœ¨ Github ä¸Šã€‚
main - main å­—æ®µæ˜¯ä¸€ä¸ªæ¨¡å—IDï¼Œå®ƒæ˜¯ä¸€ä¸ªæŒ‡å‘ä½ ç¨‹åºçš„ä¸»è¦é¡¹ç›®ã€‚å°±æ˜¯è¯´ï¼Œå¦‚æœä½ åŒ…çš„åå­—å« expressï¼Œç„¶åç”¨æˆ·å®‰è£…å®ƒï¼Œç„¶årequire("express")ã€‚
keywords - å…³é”®å­—
</code></pre>

<h4>å›è°ƒå‡½æ•°</h4>

<p>Node.js å¼‚æ­¥ç¼–ç¨‹çš„ç›´æ¥ä½“ç°å°±æ˜¯å›è°ƒã€‚Node ä½¿ç”¨äº†å¤§é‡çš„å›è°ƒå‡½æ•°ï¼ŒNode æ‰€æœ‰ API éƒ½æ”¯æŒå›è°ƒå‡½æ•°ã€‚</p>

<pre><code>//é¡ºåºæ‰§è¡Œ
var fs = require("fs");
var data = fs.readFileSync('input.txt');
console.log(data.toString());
console.log("ç¨‹åºæ‰§è¡Œç»“æŸ!");

//å¼‚æ­¥å›è°ƒ
var fs = require("fs");
fs.readFile('input.txt', function (err, data) {
    if (err) return console.error(err);
    console.log(data.toString());
});
console.log("ç¨‹åºæ‰§è¡Œç»“æŸ!");
</code></pre>

<h4>äº‹ä»¶é©±åŠ¨</h4>

<p>Node.js æ¯ä¸€ä¸ª API éƒ½æ˜¯å¼‚æ­¥çš„ï¼Œå¹¶ä½œä¸ºä¸€ä¸ªç‹¬ç«‹çº¿ç¨‹è¿è¡Œï¼Œä½¿ç”¨å¼‚æ­¥å‡½æ•°è°ƒç”¨å¹¶å¤„ç†å¹¶å‘ã€‚åŸºæœ¬ä¸Šæ‰€æœ‰çš„äº‹ä»¶æœºåˆ¶éƒ½æ˜¯ç”¨è§‚å¯Ÿè€…æ¨¡å¼å®ç°ã€‚å½“web serveræ¥æ”¶åˆ°è¯·æ±‚ï¼Œå°±æŠŠå®ƒå…³é—­ç„¶åè¿›è¡Œå¤„ç†ï¼Œç„¶åå»æœåŠ¡ä¸‹ä¸€ä¸ªwebè¯·æ±‚ã€‚
å½“è¿™ä¸ªè¯·æ±‚å®Œæˆï¼Œå®ƒè¢«æ”¾å›å¤„ç†é˜Ÿåˆ—ï¼Œå½“åˆ°è¾¾é˜Ÿåˆ—å¼€å¤´ï¼Œè¿™ä¸ªç»“æœè¢«è¿”å›ç»™ç”¨æˆ·ã€‚</p>

<p><img src="/myimg/react/reactevent.png" width="400" alt="" /></p>

<p>åœ¨ Node åº”ç”¨ç¨‹åºä¸­ï¼Œæ‰§è¡Œå¼‚æ­¥æ“ä½œå°†å›è°ƒå‡½æ•°ä½œä¸ºæœ€åä¸€ä¸ªå‚æ•°ï¼Œ å›è°ƒå‡½æ•°é‡Œæ¥æ”¶é”™è¯¯çš„å¯¹è±¡ä½œä¸ºå›è°ƒå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚</p>

<pre><code>//å›è°ƒå‡½æ•°æ˜¯readFileçš„æœ€åä¸€ä¸ªå‚æ•°ï¼Œerræ˜¯å›è°ƒå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°
var fs = require("fs");
fs.readFile('input.txt', function (err, data) {
   if (err){
      console.log(err.stack);
      return;
   }
   console.log(data.toString());
});
console.log("ç¨‹åºæ‰§è¡Œå®Œæ¯•");
</code></pre>

<p>Node.js æ‰€æœ‰çš„å¼‚æ­¥ I/O æ“ä½œåœ¨å®Œæˆæ—¶éƒ½ä¼šå‘é€ä¸€ä¸ªäº‹ä»¶åˆ°äº‹ä»¶é˜Ÿåˆ—ã€‚è®¸å¤šå¯¹è±¡éƒ½ä¼šåˆ†å‘äº‹ä»¶ï¼Œå¦‚ä¸€ä¸ªnet.Serverå¯¹è±¡ä¼šåœ¨æ¯æ¬¡æœ‰æ–°è¿æ¥æ—¶åˆ†å‘ä¸€ä¸ªäº‹ä»¶ï¼Œ ä¸€ä¸ªfs.readStreamå¯¹è±¡ä¼šåœ¨æ–‡ä»¶è¢«æ‰“å¼€çš„æ—¶å€™å‘å‡ºä¸€ä¸ªäº‹ä»¶ã€‚ æ‰€æœ‰è¿™äº›äº§ç”Ÿäº‹ä»¶çš„å¯¹è±¡éƒ½æ˜¯åŸºäº events.EventEmitter çš„å®ä¾‹ã€‚</p>

<p>events æ¨¡å—åªæä¾›äº†ä¸€ä¸ªå¯¹è±¡ï¼š events.EventEmitter(äº‹ä»¶åˆ†å‘å™¨)ã€‚EventEmitter çš„æ ¸å¿ƒå°±æ˜¯äº‹ä»¶è§¦å‘ä¸äº‹ä»¶ç›‘å¬å™¨åŠŸèƒ½çš„å°è£…ã€‚
å¯ä»¥é€šè¿‡require(&ldquo;events&rdquo;);æ¥è®¿é—®è¯¥æ¨¡å—ã€‚EventEmitter å¯¹è±¡å¦‚æœåœ¨å®ä¾‹åŒ–æ—¶å‘ç”Ÿé”™è¯¯ï¼Œä¼šè§¦å‘ &lsquo;error&rsquo; äº‹ä»¶ã€‚å½“æ·»åŠ æ–°çš„ç›‘å¬å™¨æ—¶ï¼Œ'newListener' äº‹ä»¶ä¼šè§¦å‘ï¼Œå½“ç›‘å¬å™¨è¢«ç§»é™¤æ—¶ï¼Œ'removeListener' äº‹ä»¶è¢«è§¦å‘ã€‚EventEmitter çš„æ¯ä¸ªäº‹ä»¶ç”±ä¸€ä¸ªäº‹ä»¶åå’Œè‹¥å¹²ä¸ªå‚æ•°ç»„æˆï¼Œäº‹ä»¶åæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚å¯¹äºæ¯ä¸ªäº‹ä»¶ï¼ŒEventEmitter æ”¯æŒ è‹¥å¹²ä¸ªäº‹ä»¶ç›‘å¬å™¨ã€‚å½“äº‹ä»¶è§¦å‘æ—¶ï¼Œæ³¨å†Œåˆ°è¿™ä¸ªäº‹ä»¶çš„äº‹ä»¶ç›‘å¬å™¨è¢«ä¾æ¬¡è°ƒç”¨ï¼Œäº‹ä»¶å‚æ•°ä½œä¸ºå›è°ƒå‡½æ•°å‚æ•°ä¼ é€’ã€‚</p>

<pre><code>var events = require('events'); 
var emitter = new events.EventEmitter(); 
emitter.on('someEvent', function(arg1, arg2) { 
    console.log('listener1', arg1, arg2); 
}); 
emitter.on('someEvent', function(arg1, arg2) { 
    console.log('listener2', arg1, arg2); 
}); 
emitter.emit('someEvent', 'arg1 å‚æ•°', 'arg2 å‚æ•°'); 

//æ‰“å°å‡º
//listener1 arg1 å‚æ•° arg2 å‚æ•°
//listener2 arg1 å‚æ•° arg2 å‚æ•°
</code></pre>

<h4>EventEmitter æ–¹æ³•</h4>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>addListener(eventName, listenerFun): ä¸ºæŒ‡å®šäº‹ä»¶æ·»åŠ ä¸€ä¸ªç›‘å¬å™¨åˆ°ç›‘å¬å™¨æ•°ç»„çš„å°¾éƒ¨ã€‚
</span><span class='line'>on(eventName, listenerFun):ä¸ºæŒ‡å®šäº‹ä»¶æ³¨å†Œä¸€ä¸ªç›‘å¬å™¨ï¼Œæ¥å—ä¸€ä¸ªå­—ç¬¦ä¸² eventName å’Œä¸€ä¸ªå›è°ƒå‡½æ•°ã€‚
</span><span class='line'>once(eventName, listenerFun): ä¸ºæŒ‡å®šäº‹ä»¶æ³¨å†Œä¸€ä¸ªå•æ¬¡ç›‘å¬å™¨ï¼Œå³ ç›‘å¬å™¨æœ€å¤šåªä¼šè§¦å‘ä¸€æ¬¡ï¼Œè§¦å‘åç«‹åˆ»è§£é™¤è¯¥ç›‘å¬å™¨ã€‚
</span><span class='line'>removeListener(eventName, listenerFun):ç§»é™¤æŒ‡å®šäº‹ä»¶çš„æŸä¸ªç›‘å¬å™¨ï¼Œç›‘å¬å™¨ å¿…é¡»æ˜¯è¯¥äº‹ä»¶å·²ç»æ³¨å†Œè¿‡çš„ç›‘å¬å™¨ã€‚
</span><span class='line'>removeAllListeners([eventName]):ç§»é™¤æ‰€æœ‰äº‹ä»¶çš„æ‰€æœ‰ç›‘å¬å™¨ï¼Œ å¦‚æœæŒ‡å®šäº‹ä»¶ï¼Œåˆ™ç§»é™¤æŒ‡å®šäº‹ä»¶çš„æ‰€æœ‰ç›‘å¬å™¨ã€‚
</span><span class='line'>setMaxListeners(n)ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œ EventEmitters å¦‚æœä½ æ·»åŠ çš„ç›‘å¬å™¨è¶…è¿‡ 10 ä¸ªå°±ä¼šè¾“å‡ºè­¦å‘Šä¿¡æ¯ã€‚ setMaxListeners å‡½æ•°ç”¨äºæé«˜ç›‘å¬å™¨çš„é»˜è®¤é™åˆ¶çš„æ•°é‡ã€‚
</span><span class='line'>listeners(eventName)ï¼šè¿”å›æŒ‡å®šäº‹ä»¶çš„ç›‘å¬å™¨æ•°ç»„ã€‚
</span><span class='line'>emit(eventName, [arg1], [arg2], [...]):æŒ‰å‚æ•°çš„é¡ºåºæ‰§è¡Œæ¯ä¸ªç›‘å¬å™¨ï¼Œå¦‚æœäº‹ä»¶æœ‰æ³¨å†Œç›‘å¬è¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚
</span><span class='line'>listenerCount(emitter, eventName):ç±»æ–¹æ³•ï¼Œè¿”å›æŒ‡å®šäº‹ä»¶çš„ç›‘å¬å™¨æ•°é‡ã€‚</span></code></pre></td></tr></table></div></figure>


<p>å®ä¾‹ï¼š</p>

<pre><code>var events = require('events');
var eventEmitter = new events.EventEmitter();

// ç›‘å¬å™¨1   
var listener1 = function listener1() {
   console.log('ç›‘å¬å™¨ listener1 æ‰§è¡Œã€‚');
}

// ç›‘å¬å™¨2       
var listener2 = function listener2() {
  console.log('ç›‘å¬å™¨ listener2 æ‰§è¡Œã€‚');
}

// ç»‘å®š connection äº‹ä»¶ï¼Œå¤„ç†å‡½æ•°ä¸º listener1 
eventEmitter.addListener('connection', listener1);

// ç»‘å®š connection äº‹ä»¶ï¼Œå¤„ç†å‡½æ•°ä¸º listener2
eventEmitter.on('connection', listener2);

var eventListeners = require('events').EventEmitter.listenerCount(eventEmitter,'connection');
console.log(eventListeners + " ä¸ªç›‘å¬å™¨ç›‘å¬è¿æ¥äº‹ä»¶ã€‚");

// å¤„ç† connection äº‹ä»¶ 
eventEmitter.emit('connection');

// ç§»é™¤ç›‘ç»‘å®šçš„ listener1 å‡½æ•°
eventEmitter.removeListener('connection', listener1);
console.log("listener1 ä¸å†å—ç›‘å¬ã€‚");

// è§¦å‘è¿æ¥äº‹ä»¶
eventEmitter.emit('connection');

eventListeners = require('events').EventEmitter.listenerCount(eventEmitter,'connection');
console.log(eventListeners + " ä¸ªç›‘å¬å™¨ç›‘å¬è¿æ¥äº‹ä»¶ã€‚");

console.log("ç¨‹åºæ‰§è¡Œå®Œæ¯•ã€‚");

//æ‰“å°ç»“æœ
//2 ä¸ªç›‘å¬å™¨ç›‘å¬è¿æ¥äº‹ä»¶ã€‚
//ç›‘å¬å™¨ listener1 æ‰§è¡Œã€‚
//ç›‘å¬å™¨ listener2 æ‰§è¡Œã€‚
//listener1 ä¸å†å—ç›‘å¬ã€‚
//ç›‘å¬å™¨ listener2 æ‰§è¡Œã€‚
//1 ä¸ªç›‘å¬å™¨ç›‘å¬è¿æ¥äº‹ä»¶ã€‚
//ç¨‹åºæ‰§è¡Œå®Œæ¯•
</code></pre>

<h5>error äº‹ä»¶</h5>

<p>EventEmitter å®šä¹‰äº†ä¸€ä¸ªç‰¹æ®Šçš„äº‹ä»¶<code>error</code>ï¼Œå®ƒåŒ…å«äº†é”™è¯¯çš„è¯­ä¹‰ï¼Œåœ¨é‡åˆ°å¼‚å¸¸çš„æ—¶å€™é€šå¸¸ä¼šè§¦å‘ error äº‹ä»¶ã€‚
å½“ error è¢«è§¦å‘æ—¶ï¼Œå¦‚æœæ²¡æœ‰å¯¹åº”çš„ç›‘å¬å™¨å°±ä¼šæŠŠå®ƒå½“ä½œå¼‚å¸¸ï¼Œé€€å‡ºç¨‹åºå¹¶è¾“å‡ºé”™è¯¯ä¿¡æ¯ã€‚
æ‰€ä»¥è¦ä¸ºä¼šè§¦å‘ error äº‹ä»¶çš„å¯¹è±¡è®¾ç½®ç›‘å¬å™¨ï¼Œé¿å…é‡åˆ°é”™è¯¯åæ•´ä¸ªç¨‹åºå´©æºƒã€‚</p>

<p>å¤§å¤šæ•°æ—¶å€™ä¸ä¼šç›´æ¥ä½¿ç”¨ EventEmitterï¼Œè€Œæ˜¯åœ¨å¯¹è±¡ä¸­ç»§æ‰¿å®ƒã€‚åŒ…æ‹¬ fsã€netã€ http åœ¨å†…çš„ï¼Œ
åªè¦æ˜¯æ”¯æŒäº‹ä»¶å“åº”çš„æ ¸å¿ƒæ¨¡å—éƒ½æ˜¯ EventEmitter çš„å­ç±»ã€‚</p>

<h4>Buffer ç±»</h4>

<p>JavaScript è¯­è¨€è‡ªèº«åªæœ‰å­—ç¬¦ä¸²æ•°æ®ç±»å‹ï¼Œæ²¡æœ‰äºŒè¿›åˆ¶æ•°æ®ç±»å‹ã€‚ä½†åœ¨å¤„ç†æ–‡ä»¶æµæ—¶ï¼Œå¿…é¡»ä½¿ç”¨åˆ°äºŒè¿›åˆ¶æ•°æ®ã€‚
æ‰€ä»¥åœ¨ Node.jsä¸­ï¼Œå®šä¹‰äº†ä¸€ä¸ª Buffer ç±»ï¼Œè¯¥ç±»ç”¨æ¥åˆ›å»ºä¸€ä¸ªä¸“é—¨å­˜æ”¾äºŒè¿›åˆ¶æ•°æ®çš„ç¼“å­˜åŒºã€‚å¯ä»¥è®© Node.js å¤„ç†äºŒè¿›åˆ¶æ•°æ®ï¼Œ
æ¯å½“éœ€è¦åœ¨ Node.js ä¸­å¤„ç†I/Oæ“ä½œä¸­ç§»åŠ¨çš„æ•°æ®æ—¶ï¼Œå°±æœ‰å¯èƒ½ä½¿ç”¨ Buffer åº“ã€‚åŸå§‹æ•°æ®å­˜å‚¨åœ¨ Buffer ç±»çš„å®ä¾‹ä¸­ã€‚
ä¸€ä¸ª Buffer ç±»ä¼¼äºä¸€ä¸ªæ•´æ•°æ•°ç»„ï¼Œutf-8 æ˜¯é»˜è®¤çš„ç¼–ç æ–¹å¼ã€‚</p>

<pre><code>//å†™æ•°æ®
buf.write(string, offset, length, encoding)ï¼›
string - å†™å…¥ç¼“å†²åŒºçš„å­—ç¬¦ä¸²ã€‚
offset - ç¼“å†²åŒºå¼€å§‹å†™å…¥çš„ç´¢å¼•å€¼ï¼Œé»˜è®¤ä¸º 0 ã€‚
length - å†™å…¥çš„å­—èŠ‚æ•°ï¼Œé»˜è®¤ä¸º buffer.lengthã€‚
encoding - ä½¿ç”¨çš„ç¼–ç ã€‚é»˜è®¤ä¸º 'utf8' ã€‚
è¿”å›å®é™…å†™å…¥çš„å¤§å°ã€‚å¦‚æœ buffer ç©ºé—´ä¸è¶³ï¼Œ åˆ™åªä¼šå†™å…¥éƒ¨åˆ†å­—ç¬¦ä¸²ã€‚

//è¯»æ•°æ®
buf.toString(encoding, start, end)ï¼›
encoding - ä½¿ç”¨çš„ç¼–ç ã€‚é»˜è®¤ä¸º 'utf8' ã€‚
start - æŒ‡å®šå¼€å§‹è¯»å–çš„ç´¢å¼•ä½ç½®ï¼Œé»˜è®¤ä¸º 0ã€‚
end - ç»“æŸä½ç½®ï¼Œé»˜è®¤ä¸ºç¼“å†²åŒºçš„æœ«å°¾ã€‚
è¿”å›å€¼æ˜¯ç”¨æŒ‡å®šçš„ç¼–ç è¿”å›å­—ç¬¦ä¸²ã€‚
</code></pre>

<h5>å¸¸ç”¨æ–¹æ³•</h5>

<pre><code>new Buffer(size)ï¼šé…ä¸€ä¸ªæ–°çš„ size å¤§å°å•ä½ä¸º8ä½å­—èŠ‚çš„ bufferã€‚
new Buffer(buffer)ï¼šæ‹·è´å‚æ•° buffer çš„æ•°æ®åˆ° Buffer å®ä¾‹ã€‚
new Buffer(str, encoding)åˆ†é…ä¸€ä¸ªæ–°çš„ buffer ï¼Œå…¶ä¸­åŒ…å«ç€ä¼ å…¥çš„ str å­—ç¬¦ä¸²ã€‚ encoding ç¼–ç æ–¹å¼é»˜è®¤ä¸º 'utf8'ã€‚
buf.length: è¿”å›è¿™ä¸ª buffer çš„ bytes æ•°ã€‚æ³¨æ„è¿™æœªå¿…æ˜¯ buffer é‡Œé¢å†…å®¹çš„å¤§å°ã€‚length æ˜¯ buffer å¯¹è±¡æ‰€åˆ†é…çš„å†…å­˜æ•°ï¼Œå®ƒä¸ä¼šéšç€è¿™ä¸ª buffer å¯¹è±¡å†…å®¹çš„æ”¹å˜è€Œæ”¹å˜ã€‚
buf.write(string[, offset[, length]][, encoding]):å†™å…¥æ•°æ®ã€‚
buf.toJSON()ï¼šå°† Buffer å®ä¾‹è½¬æ¢ä¸º JSON å¯¹è±¡ã€‚
buf.equals(otherBuffer)ï¼šæ¯”è¾ƒä¸¤ä¸ªç¼“å†²åŒºæ˜¯å¦ç›¸ç­‰ã€‚
buf.compare(otherBuffer):æ¯”è¾ƒä¸¤ä¸ª Buffer å¯¹è±¡ï¼Œè¿”å›ä¸€ä¸ªæ•°å­—ï¼Œè¡¨ç¤º buf åœ¨ otherBuffer ä¹‹å‰ï¼Œä¹‹åæˆ–ç›¸åŒã€‚
buf.copy(targetBuffer[, targetStart[, sourceStart[, sourceEnd]]]):buffer æ‹·è´ï¼Œæºå’Œç›®æ ‡å¯ä»¥ç›¸åŒã€‚ 
targetStart ç›®æ ‡å¼€å§‹åç§»å’Œ sourceStart æºå¼€å§‹åç§»é»˜è®¤éƒ½æ˜¯ 0ã€‚ sourceEnd æºç»“æŸä½ç½®åç§»é»˜è®¤æ˜¯æºçš„é•¿åº¦ buffer.length ã€‚
</code></pre>

<h4>Stream æµ</h4>

<p>Stream æ˜¯ä¸€ä¸ªæŠ½è±¡æ¥å£ï¼ŒNode ä¸­æœ‰å¾ˆå¤šå¯¹è±¡å®ç°äº†è¿™ä¸ªæ¥å£ã€‚ä¾‹å¦‚ï¼Œå¯¹http æœåŠ¡å™¨å‘èµ·è¯·æ±‚çš„request å¯¹è±¡å°±æ˜¯ä¸€ä¸ª Streamï¼Œè¿˜æœ‰stdoutï¼ˆæ ‡å‡†è¾“å‡ºï¼‰ã€‚
<strong>æ‰€æœ‰çš„ Stream å¯¹è±¡éƒ½æ˜¯ EventEmitter çš„å®ä¾‹</strong></p>

<pre><code>Stream æœ‰å››ç§æµç±»å‹ï¼š
1. Readable - å¯è¯»æ“ä½œã€‚
2. Writable - å¯å†™æ“ä½œã€‚
3. Duplex - å¯è¯»å¯å†™æ“ä½œ.
4. Transform - æ“ä½œè¢«å†™å…¥æ•°æ®ï¼Œç„¶åè¯»å‡ºç»“æœã€‚

æ‰€æœ‰çš„ Stream å¯¹è±¡éƒ½æ˜¯ EventEmitter çš„å®ä¾‹ã€‚å¸¸ç”¨çš„äº‹ä»¶æœ‰ï¼š
data - å½“æœ‰æ•°æ®å¯è¯»æ—¶è§¦å‘ã€‚
end - æ²¡æœ‰æ›´å¤šçš„æ•°æ®å¯è¯»æ—¶è§¦å‘ã€‚
error - åœ¨æ¥æ”¶å’Œå†™å…¥è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯æ—¶è§¦å‘ã€‚
finish - æ‰€æœ‰æ•°æ®å·²è¢«å†™å…¥åˆ°åº•å±‚ç³»ç»Ÿæ—¶è§¦å‘ã€‚
</code></pre>

<p>è¯»å–æ–‡ä»¶ä¾‹å­ï¼š</p>

<pre><code>var fs = require("fs");
var data = '';

// åˆ›å»ºå¯è¯»æµ
var readerStream = fs.createReadStream('input.txt');

// è®¾ç½®ç¼–ç ä¸º utf8ã€‚
readerStream.setEncoding('UTF8');

// å¤„ç†æµäº‹ä»¶ --&gt; data, end, and error
readerStream.on('data', function(chunk) {
   data += chunk;
});

readerStream.on('end',function(){
   console.log(data);
});

readerStream.on('error', function(err){
   console.log(err.stack);
});

console.log("ç¨‹åºæ‰§è¡Œå®Œæ¯•");
</code></pre>

<h4>æ¨¡å—ç³»ç»Ÿ</h4>

<p>æ¨¡å—æ˜¯Node.js åº”ç”¨ç¨‹åºçš„åŸºæœ¬ç»„æˆéƒ¨åˆ†ï¼Œæ–‡ä»¶å’Œæ¨¡å—æ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚ä¸€ä¸ª Node.js æ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œè¿™ä¸ªæ–‡ä»¶å¯èƒ½æ˜¯JavaScriptã€JSON æˆ–è€…ç¼–è¯‘è¿‡çš„C/C++ æ‰©å±•ç­‰ã€‚
Node.js æä¾›äº†<code>exports</code> å’Œ <code>require</code> ä¸¤ä¸ªå¯¹è±¡ï¼Œå…¶ä¸­ exports æ˜¯æ¨¡å—å…¬å¼€çš„æ¥å£ï¼Œrequire ç”¨äºä»å¤–éƒ¨è·å–ä¸€ä¸ªæ¨¡å—çš„æ¥å£ï¼Œå³æ‰€è·å–æ¨¡å—çš„ exports å¯¹è±¡ã€‚</p>

<p>requireæ–¹æ³•ä¸­çš„æ–‡ä»¶æŸ¥æ‰¾ç­–ç•¥ï¼š</p>

<p><img src="/myimg/react/require.png" width="400" alt="" /></p>

<h4>å‡½æ•°</h4>

<p>åœ¨JavaScriptä¸­ï¼Œä¸€ä¸ªå‡½æ•°å¯ä»¥ä½œä¸ºå¦ä¸€ä¸ªå‡½æ•°çš„å‚æ•°ã€‚å¯ä»¥å…ˆå®šä¹‰ä¸€ä¸ªå‡½æ•°å˜é‡ï¼Œç„¶åä¼ é€’ï¼Œä¹Ÿå¯ä»¥åœ¨ä¼ é€’å‚æ•°çš„åœ°æ–¹ç›´æ¥å®šä¹‰å‡½æ•°(ä¸è¦åå­—çš„å‡½æ•°ï¼ŒåŒ¿åå‡½æ•°)ã€‚</p>

<pre><code>function say(word) {
  console.log(word);
}

function execute(someFunction, value) {
  someFunction(value);
}

execute(say, "Hello");

//ä¹Ÿå¯ä»¥ç›´æ¥ä¼ é€’åŒ¿åå‡½æ•°

function execute(someFunction, value) {
  someFunction(value);
}

execute(function(word){ console.log(word) }, "Hello");
</code></pre>

<h4>å…¨å±€å¯¹è±¡</h4>

<p>JavaScript ä¸­æœ‰ä¸€ä¸ªç‰¹æ®Šçš„å¯¹è±¡ï¼Œç§°ä¸ºå…¨å±€å¯¹è±¡ï¼Œå®ƒåŠå…¶æ‰€æœ‰å±æ€§éƒ½å¯ä»¥åœ¨ç¨‹åºçš„ä»»ä½•åœ°æ–¹è®¿é—®ï¼Œå³å…¨å±€å˜é‡ã€‚
åœ¨æµè§ˆå™¨ JavaScript ä¸­ï¼Œé€šå¸¸ window æ˜¯å…¨å±€å¯¹è±¡ï¼Œ è€Œ Node.js ä¸­çš„å…¨å±€å¯¹è±¡æ˜¯ globalï¼Œæ‰€æœ‰å…¨å±€å˜é‡ï¼ˆé™¤äº† global æœ¬èº«ä»¥å¤–ï¼‰éƒ½æ˜¯ global å¯¹è±¡çš„å±æ€§ã€‚
åœ¨ Node.js å¯ä»¥ç›´æ¥è®¿é—®åˆ° global å¯¹è±¡çš„å±æ€§ï¼Œè€Œä¸éœ€è¦åœ¨åº”ç”¨ä¸­åŒ…å«å®ƒã€‚<strong>æ³¨æ„ï¼š æ°¸è¿œä½¿ç”¨ var å®šä¹‰å˜é‡ä»¥é¿å…å¼•å…¥å…¨å±€å˜é‡ï¼Œå› ä¸ºå…¨å±€å˜é‡ä¼šæ±¡æŸ“å‘½åç©ºé—´ï¼Œæé«˜ä»£ç çš„è€¦åˆé£é™©ã€‚</strong></p>

<pre><code>æ»¡è¶³ä»¥ä¸‹æ¡ ä»¶çš„å˜é‡æ˜¯å…¨å±€å˜é‡ï¼š
1.åœ¨æœ€å¤–å±‚å®šä¹‰çš„å˜é‡ï¼›
2.å…¨å±€å¯¹è±¡çš„å±æ€§ï¼›
3.éšå¼å®šä¹‰çš„å˜é‡ï¼ˆæœªå®šä¹‰ç›´æ¥èµ‹å€¼çš„å˜é‡ï¼‰ã€‚
</code></pre>

<p><strong>__filename ï¼š</strong>è¡¨ç¤ºå½“å‰æ­£åœ¨æ‰§è¡Œçš„æ–‡ä»¶å,è¾“å‡ºæ–‡ä»¶çš„ç»å¯¹è·¯å¾„ã€‚</p>

<p><strong>__dirname ï¼š</strong>è¡¨ç¤ºå½“å‰æ­£åœ¨æ‰§è¡Œçš„æ–‡ä»¶ç›®å½•ã€‚</p>

<p><strong>setTimeout(cb, ms) :</strong> å…¨å±€å‡½æ•°,åœ¨æŒ‡å®šçš„æ¯«ç§’(ms)æ•°åæ‰§è¡ŒæŒ‡å®šå‡½æ•°(cb)ã€‚åªæ‰§è¡Œä¸€æ¬¡æŒ‡å®šå‡½æ•°ã€‚è¿”å›ä¸€ä¸ªä»£è¡¨å®šæ—¶å™¨çš„å¥æŸ„å€¼ã€‚</p>

<p><strong>clearTimeout(t) :</strong> å…¨å±€å‡½æ•°,ç”¨äºåœæ­¢ä¸€ä¸ªä¹‹å‰é€šè¿‡ setTimeout() åˆ›å»ºçš„å®šæ—¶å™¨ã€‚ å‚æ•° t æ˜¯é€šè¿‡ setTimeout() å‡½æ•°åˆ›å»ºçš„å®šæ—¶å™¨ã€‚</p>

<p><strong>setInterval(cb, ms) :</strong>setInterval(cb, ms) å…¨å±€å‡½æ•°åœ¨æŒ‡å®šçš„æ¯«ç§’(ms)æ•°åæ‰§è¡ŒæŒ‡å®šå‡½æ•°(cb)ã€‚
è¿”å›ä¸€ä¸ªä»£è¡¨å®šæ—¶å™¨çš„å¥æŸ„å€¼ã€‚å¯ä»¥ä½¿ç”¨ clearInterval(t) å‡½æ•°æ¥æ¸…é™¤å®šæ—¶å™¨ã€‚
setInterval() æ–¹æ³•ä¼šä¸åœåœ°è°ƒç”¨å‡½æ•°ï¼Œç›´åˆ° clearInterval() è¢«è°ƒç”¨æˆ–çª—å£è¢«å…³é—­ã€‚</p>

<p><strong>console :</strong> å…¨å±€å¯¹è±¡ï¼Œå¸¸ç”¨æ–¹æ³•æœ‰<code>console.log()</code>,<code>console.info()</code>,<code>console.warn()</code>,<code>console.error()</code></p>

<p><strong>process :</strong>å…¨å±€å˜é‡ï¼Œå³ global å¯¹è±¡çš„å±æ€§ã€‚ä¾¿äºæˆ‘ä»¬æ›´å¥½çš„æ§åˆ¶ç³»ç»Ÿçš„äº¤äº’,å¾ˆå¤šå±æ€§å’Œæ–¹æ³•ã€‚<code>process.stdout</code>,<code>process.exet()</code>&hellip;</p>

<p><a href="https://nodejs.org/dist/latest-v7.x/docs/api/">Node.js API</a></p>
</div>
  
  


      | <a href="/blog/2016/12/03/node-js/#comments">Comments</a>


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/12/01/react-navigator/">React Native Navigator</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-12-01T09:27:30+08:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>1</span><span class='date-suffix'>st</span>, <span class='date-year'>2016</span></span> <span class='time'>9:27 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>è¿™é‡Œä¸»è¦è®°å½•ä¸€ä¸‹Navigatorçš„åŸºæœ¬ä½¿ç”¨ï¼Œé¡µé¢é—´çš„ä¼ å‚ï¼Œå›è°ƒï¼Œä»¥åŠåœ¨push,popè¿‡ç¨‹ä¸­ç”Ÿå‘½å‘¨æœŸæ–¹æ³•çš„è°ƒç”¨é¡ºåºã€‚</p>

<p>React çš„â€œé¡µé¢â€çš„æ¦‚å¿µå’ŒAndroidæˆ–iOSæœ‰ç‚¹ä¸ä¸€æ ·ï¼Œä¸åƒAndroidæœ‰ä¸ªActivityä½œä¸ºé¡µé¢å®¹å™¨ï¼ŒiOSæœ‰Controllerä½œä¸ºé¡µé¢å®¹å™¨ã€‚React çš„â€œé¡µé¢â€æœ¬èº«å°±æ˜¯ä¸€ä¸ªç»„ä»¶é›†åˆï¼Œå’ŒText,Imageç­‰åŸºç¡€ç»„ä»¶æ˜¯ä¸€ä¸ªçº§åˆ«çš„ä¸œè¥¿ã€‚åªä¸è¿‡æ˜¯æŠŠå¤šä¸ªç»„ä»¶æ‹¼èµ·æ¥å……æ»¡å±å¹•ï¼Œå°±ç»„æˆä¸€ä¸ªâ€œé¡µé¢â€äº†ã€‚</p>

<p>é€šè¿‡åœ¨Navigatorçš„routeé‡Œæ”¾ç½®ä¸€ä¸ªparamså‚æ•°ï¼Œparamsé‡Œé¢æ”¾key-valueä¼ å‚ã€‚æ³¨æ„ï¼Œæ–¹æ³•ä¹Ÿæ˜¯å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥å½“åšvalueä¼ é€’ï¼Œè¿™æ ·å°±å¯å›è°ƒäº†ã€‚å°±åƒAndroidçš„æ¥å£å›è°ƒæˆ–iOSçš„blockä¼¼çš„ï¼Œåœ¨Aé¡µé¢å®ç°æ–¹æ³•ï¼Œç„¶åä¼ é€’ç»™Bé¡µé¢ï¼Œåœ¨Bé¡µé¢ä½¿ç”¨æ–¹æ³•ï¼Œè¿™æ ·æ•°æ®å°±ä»Bå›ä¼ ç»™Aäº†ã€‚æ•°æ®ä»æ–¹æ³•ä½¿ç”¨çš„åœ°æ–¹ä¼ åˆ°æ–¹æ³•å®ç°çš„åœ°æ–¹ã€‚</p>

<h4>åœ¨Index.jsé‡Œåˆå§‹åŒ–Navigatorå¹¶ä¸”æ˜¾ç¤ºç¬¬ä¸€ä¸ªé¡µé¢FirstView:</h4>

<p><img src="/myimg/java/lift0.png" width="500" alt="" /></p>

<h4>ä»FirstView push åˆ°SecondView</h4>

<p><img src="/myimg/java/lift1.png" width="500" alt="" /></p>

<h4>ä¸è°ƒç”¨FirstViewçš„å›è°ƒæ–¹æ³•ç›´æ¥popã€‚</h4>

<p><img src="/myimg/java/life3.png" width="500" alt="" /></p>

<h4>å¦‚æœåœ¨SecondViewé‡Œç‚¹å‡»è¿”å›çš„æ—¶å€™ï¼Œå…ˆæ‰ç”¨FirstViewçš„å›è°ƒæ–¹æ³•, åœ¨å›è°ƒæ–¹æ³•é‡Œè°ƒç”¨ setState() åˆ·æ–°FirstViewï¼Œç„¶å pop ã€‚</h4>

<p><img src="/myimg/java/lift2.png" width="500" alt="" /></p>

<p>ä»ä¸Šé¢å¯ä»¥çœ‹å‡ºä¸ç®¡æ˜¯ä»Aåˆ°Bè¿˜æ˜¯ä»Bè¿”å›A,Açš„componentWillReceivePropséƒ½ä¼šè¢«è°ƒç”¨! Açš„æ›´æ–°æµç¨‹éƒ½ä¼šå…ˆèµ°ä¸€éï¼</p>

<p><img src="/myimg/java/life4.png" width="600" alt="" /></p>

<pre><code>configureScene å±æ€§ç”¨æ¥é…ç½®åœºæ™¯åŠ¨ç”»ã€‚
configureScene={(route, routeStack) =&gt; {
                return Navigator.SceneConfigs.PushFromRight;
              }}
</code></pre>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>åœ¨/node_modules/react-native/Libraries/CustomComponents/Navigator/NavigatorSceneConfigs ä¸­é¢„è®¾äº†å¾ˆå¤šè½¬åœºåŠ¨ç”»ã€‚
</span><span class='line'>PushFromRight
</span><span class='line'>PushFromLeft
</span><span class='line'>FloatFromRight // We will want to customize this soon
</span><span class='line'>FloatFromLeft
</span><span class='line'>FloatFromBottom
</span><span class='line'>FloatFromBottomAndroid
</span><span class='line'>FadeAndroid
</span><span class='line'>HorizontalSwipeJump
</span><span class='line'>HorizontalSwipeJumpFromRight
</span><span class='line'>HorizontalSwipeJumpFromLeft
</span><span class='line'>VerticalUpSwipeJump
</span><span class='line'>VerticalDownSwipeJump</span></code></pre></td></tr></table></div></figure>


<h4>å…¶ä»–æ–¹æ³•</h4>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>getCurrentRoutes() - è·å–å½“å‰æ ˆé‡Œçš„æ‰€æœ‰è·¯ç”±
</span><span class='line'>jumpBack() - è·³å›ä¹‹å‰çš„è·¯ç”±ï¼Œè¿˜ä¿ç•™ç°åœ¨çš„ï¼Œè¿˜å¯ä»¥å†è·³å›æ¥ï¼Œä¼šä¿ç•™åŸæ ·
</span><span class='line'>jumpForward() - ä¸ä¸Šä¸€ä¸ªæ–¹æ³•å¯¹åº”
</span><span class='line'>jumpTo(route) - è·³è½¬åˆ°å·²æœ‰çš„åœºæ™¯å¹¶ä¸”ä¸å¸è½½
</span><span class='line'>push(route) - è·³è½¬åˆ°æ–°çš„åœºæ™¯ï¼Œå¹¶ä¸”å°†åœºæ™¯å…¥æ ˆ
</span><span class='line'>pop() - è·³è½¬å›å»å¹¶ä¸”å¸è½½æ‰å½“å‰åœºæ™¯
</span><span class='line'>replace(route) - ç”¨ä¸€ä¸ªæ–°çš„è·¯ç”±æ›¿æ¢æ‰å½“å‰åœºæ™¯
</span><span class='line'>replaceAtIndex(route, index) - æ›¿æ¢æ‰æŒ‡å®šåºåˆ—çš„è·¯ç”±åœºæ™¯
</span><span class='line'>replacePrevious(route) - æ›¿æ¢æ‰ä¹‹å‰çš„åœºæ™¯
</span><span class='line'>resetTo(route) - è·³è½¬åˆ°æ–°çš„åœºæ™¯ï¼Œå¹¶ä¸”é‡ç½®æ•´ä¸ªè·¯ç”±æ ˆ
</span><span class='line'>immediatelyResetRouteStack(routeStack) - ç”¨æ–°çš„è·¯ç”±æ•°ç»„æ¥é‡ç½®è·¯ç”±æ ˆ
</span><span class='line'>popToRoute(route) - popåˆ°è·¯ç”±æŒ‡å®šçš„åœºæ™¯ï¼Œåœ¨æ•´ä¸ªè·¯ç”±æ ˆä¸­ï¼Œå¤„äºæŒ‡å®šåœºæ™¯ä¹‹åçš„åœºæ™¯å°†ä¼šè¢«å¸è½½
</span><span class='line'>popToTop() - popåˆ°æ ˆä¸­çš„ç¬¬ä¸€ä¸ªåœºæ™¯ï¼Œå¸è½½æ‰æ‰€æœ‰çš„å…¶ä»–åœºæ™¯</span></code></pre></td></tr></table></div></figure>


<h4>index.ios.js</h4>

<pre><code>import React, {Component} from 'react';
import {View,Navigator,AppRegistry} from 'react-native';
import FirstView from './FirstView';

   var logName = 'Index:--------';

   export default class BaseNavigator extends Component {
     constructor(props){
          console.log(logName + 'constructor');
          super(props);
      }
      componentWillMount(){
          console.log(logName + 'componentWillMount');
      }
       render() {
         console.log(logName+'render')
        return (
        &lt;Navigator
          //æŠŠä¸‹é¢ä¸€è¡Œçš„/éƒ½å»æ‰ï¼Œå› ä¸ºMarkdownè½¬åŒ–ä¸äº†æ‰€ä»¥åŠ çš„
          initialRoute=/{/{params: /{/},view: FirstView /}/}
          renderScene={(route, navigator) =&gt; {
            let ShowedView = route.view;
            return &lt;ShowedView {...route.params} nav={navigator} /&gt;
          }} /&gt;
        );
       }

       componentDidMount() {
           console.log(logName + 'componentDidMount');
       }

       componentWillReceiveProps(nextprops){
              console.log(logName + 'componentWillReceiveProps');
        }
        shouldComponentUpdate(nextProps,nextState){
              console.log(logName + 'shouldComponentUpdate');
            return true;
        }
        componentWillUpdate(nextProps,nextState){
              console.log(logName + 'componentWillUpdate');
        }
        componentDidUpdate(prevProps,prevState){
            console.log(logName + 'componentDidUpdate');
        }
        componentWillUnmount(){
            console.log(logName + 'componentWillUnmount');
        }
   }
AppRegistry.registerComponent('MyReact', () =&gt; BaseNavigator);
</code></pre>

<h4>FirstView.js</h4>

<pre><code>import React,{Component} from 'react';
import {View,StyleSheet,Text} from 'react-native';
import SecondView from './SecondView';

var logName = 'FirstView:--------';
export default class FirstView extends Component { 
  constructor(props) {
    console.log(logName + 'constructor');
        super(props);
        this.state = {
            callBackMsg: '',
        };
    }
   componentWillMount(){
       console.log(logName + 'componentWillMount');
   }

    render() {
      console.log(logName+'render')
        return (
            &lt;View style={styles.backView}&gt;
                  &lt;Text style={styles.tapView}  onPress={this.pressedFun.bind(this)}&gt;ç‚¹å‡»è·³è½¬&lt;/Text&gt;
                  &lt;Text style={styles.msgView}&gt;
                    {this.state.callBackMsg}
                  &lt;/Text&gt;
            &lt;/View&gt;
        );
    }
    componentDidMount() {
        console.log(logName + 'componentDidMount');
    }

    componentWillReceiveProps(nextprops){
           console.log(logName + 'componentWillReceiveProps');
     }
     shouldComponentUpdate(nextProps,nextState){
           console.log(logName + 'shouldComponentUpdate');
         return true;
     }
     componentWillUpdate(nextProps,nextState){
           console.log(logName + 'componentWillUpdate');
     }
     componentDidUpdate(prevProps,prevState){
         console.log(logName + 'componentDidUpdate');
     }
     componentWillUnmount(){
         console.log(logName + 'componentWillUnmount');
     }
//-------ä¸ªäººæ–¹æ³•--------
    pressedFun() {
        let nav = this.props.nav;
        let tmpThis = this;
            nav.push({
                view: SecondView,
                params:{
                  userId: 123,
                  userName: 'andy',
                  callBackFun: function(newMsg){
                      tmpThis.setState({
                        callBackMsg: newMsg,
                      })
                  },
                },
            });
          }
}

const styles = StyleSheet.create({
  backView:{
    flex: 1,
    justifyContent: 'center',
    backgroundColor: 'azure',
  },
  tapView:{
    fontSize: 20,
    alignSelf: 'center',
    textAlign: 'center',
    width: 130,
    height: 50,
    lineHeight: 50,
    color: 'yellow',
    borderColor: 'yellow',
    borderWidth: 2,
    borderRadius: 25,
    backgroundColor: 'blue',
    overflow: 'hidden',//ä¸ç„¶è¾¹è§’ä¼šæœ‰èƒŒæ™¯è‰²
  },
  msgView:{
    fontSize: 16,
    marginTop: 30,
    textAlign: 'center',
  },
});
</code></pre>

<h4>SecondView.js</h4>

<pre><code>import React,{Component} from 'react';
import {View,Navigator,StyleSheet,TouchableWithoutFeedback,Image,Text,} from 'react-native';

var logName = 'SecondView:--------';
export default class SecondView extends Component {
  static defaultProps = {
      // testProp: 'testPropé»˜è®¤å€¼',
  }
  static propTypes = {
      // testProp: React.PropTypes.string.isRequired,
  }
  constructor(props) {
        console.log(logName + 'constructor');
        super(props);
        this.state = {};
    }
    componentWillMount(){
        console.log(logName + 'componentWillMount');
    }
    render() {
      console.log(logName+'render')
       return (
            &lt;View style={styles.backView}&gt;
              &lt;View style={styles.titleBackView}&gt;
              &lt;TouchableWithoutFeedback onPress={this.backPressed.bind(this)}&gt;
                 &lt;Image style={styles.backImage} source= {require('./images/backImage.png')}/&gt;
              &lt;/TouchableWithoutFeedback&gt;
                &lt;Text style={styles.titleView}&gt;æ ‡é¢˜&lt;/Text&gt;
              &lt;/View&gt;
                &lt;Text&gt;ä¸Šä¸ªé¡µé¢ä¼ æ¥çš„å‚æ•°userId: {this.props.userId}&lt;/Text&gt;
                &lt;Text&gt;ä¸Šä¸ªé¡µé¢ä¼ æ¥çš„å‚æ•°userName: {this.props.userName}&lt;/Text&gt;
            &lt;/View&gt;
        );
    }
    componentDidMount() {
        console.log(logName + 'componentDidMount');
    }

    componentWillReceiveProps(nextprops){
           console.log(logName + 'componentWillReceiveProps');
     }
     shouldComponentUpdate(nextProps,nextState){
           console.log(logName + 'shouldComponentUpdate');
         return true;
     }
     componentWillUpdate(nextProps,nextState){
           console.log(logName + 'componentWillUpdate');
     }
     componentDidUpdate(prevProps,prevState){
         console.log(logName + 'componentDidUpdate');
     }
     componentWillUnmount(){
         console.log(logName + 'componentWillUnmount');
     }

//------ä¸ªäººæ–¹æ³•--------
     backPressed() {
         let nav = this.props.nav;
             this.props.callBackFun('è¿™æ˜¯æ¶ˆå¤±çš„é¡µé¢é€šè¿‡å›è°ƒæ–¹æ³•ä¼ æ¥çš„æ•°æ®ï¼');
             nav.pop();
     }
}
const styles = StyleSheet.create({
  backView:{
    flex: 1,
    backgroundColor: 'bisque',
  },
  titleBackView:{
    height: 65,
    backgroundColor: 'darkkhaki',
    flexDirection: 'row'
  },
  titleView:{
    height:45,
    lineHeight:45,
    marginTop:20,
    color: 'white',
    fontSize: 18,
    textAlign: 'center',
    alignSelf: 'center',
    flex: 1,
    marginRight:20,
  },
  backImage:{
    marginTop:35,
    marginLeft:10,
    width: 10,
    height: 20,
  },
});
</code></pre>
</div>
  
  


      | <a href="/blog/2016/12/01/react-navigator/#comments">Comments</a>


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/11/30/react-native-life/">React Native ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-11-30T11:08:59+08:00'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>30</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>11:08 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>ç”Ÿå‘½å‘¨æœŸå°±æ˜¯ä¸€ä¸ªå¯¹è±¡ä»å¼€å§‹ç”Ÿæˆåˆ°æœ€åæ¶ˆäº¡æ‰€ç»å†çš„çŠ¶æ€ï¼Œç†è§£ç”Ÿå‘½å‘¨æœŸæ˜¯å¼€å‘çš„åŸºç¡€ã€‚<a href="http://bbs.reactnative.cn/topic/15/react-react-native-%E7%9A%84es5-es6%E5%86%99%E6%B3%95%E5%AF%B9%E7%85%A7%E8%A1%A8">ES5è¯­æ³•å’ŒES6è¯­æ³•æœ‰æ‰€å˜åŒ–</a>ã€‚</p>

<p><img src="/myimg/java/life2.png" alt="" /></p>

<h4>å¯ä»¥æŠŠç»„ä»¶ç”Ÿå‘½å‘¨æœŸå¤§è‡´åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š</h4>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ç¬¬ä¸€é˜¶æ®µï¼šæ˜¯ç»„ä»¶ç¬¬ä¸€æ¬¡ç»˜åˆ¶é˜¶æ®µï¼Œå¦‚å›¾ä¸­çš„ä¸Šé¢è™šçº¿æ¡†å†…ï¼Œåœ¨è¿™é‡Œå®Œæˆäº†ç»„ä»¶çš„åŠ è½½å’Œåˆå§‹åŒ–ï¼›
</span><span class='line'>ç¬¬äºŒé˜¶æ®µï¼šæ˜¯ç»„ä»¶åœ¨è¿è¡Œå’Œäº¤äº’é˜¶æ®µï¼Œå¦‚å›¾ä¸­å·¦ä¸‹è§’è™šçº¿æ¡†ï¼Œè¿™ä¸ªé˜¶æ®µç»„ä»¶å¯ä»¥å¤„ç†ç”¨æˆ·äº¤äº’æ¥æ”¶äº‹ä»¶æ›´æ–°ç•Œé¢ï¼›
</span><span class='line'>ç¬¬ä¸‰é˜¶æ®µï¼šæ˜¯ç»„ä»¶å¸è½½æ¶ˆäº¡çš„é˜¶æ®µï¼Œå¦‚å›¾ä¸­å³ä¸‹è§’çš„è™šçº¿æ¡†ä¸­ï¼Œè¿™é‡Œåšä¸€äº›ç»„ä»¶çš„æ¸…ç†å·¥ä½œã€‚</span></code></pre></td></tr></table></div></figure>


<p><strong>constructor(props) :</strong>è¿™ä¸ªæ–¹æ³•ä¼šåœ¨ç»„ä»¶åˆ›å»ºçš„æ—¶å€™è°ƒç”¨ä¸€æ¬¡ã€‚ è¿™ä¸ªæ–¹æ³•ä¸­å¯ä»¥é€šè¿‡this.stateåˆå§‹åŒ–çŠ¶æ€å‚æ•°ï¼ŒES5æ˜¯é€šè¿‡getInitialState()æ–¹æ³•åˆå§‹åŒ–çš„ã€‚</p>

<p><strong>getDefaultProps() :</strong>åœ¨ç»„ä»¶ç±»åˆ›å»ºçš„æ—¶å€™è°ƒç”¨ä¸€æ¬¡ï¼Œç„¶åè¿”å›å€¼è¢«ç¼“å­˜ä¸‹æ¥ã€‚å…¨å±€è°ƒç”¨ä¸€æ¬¡ï¼Œæ‰€æœ‰å®ä¾‹å…±äº«ã€‚</p>

<p><strong>getInitialState() :</strong>åœ¨ç»„ä»¶æŒ‚è½½ä¹‹å‰è°ƒç”¨ä¸€æ¬¡ã€‚è¿”å›å€¼å°†ä¼šä½œä¸º this.state çš„åˆå§‹å€¼ã€‚</p>

<p><strong>componentWillMount() :</strong>åœ¨ç»„ä»¶åˆ›å»ºå¹¶åˆå§‹åŒ–äº†çŠ¶æ€ä¹‹åï¼Œåœ¨ç¬¬ä¸€æ¬¡ render() ä¹‹å‰ã€‚å¯ä»¥åœ¨è¿™é‡Œåšä¸€äº›åˆå§‹åŒ–æ“ä½œã€‚è¿™ä¸ªå‡½æ•°åœ¨æ•´ä¸ªç”Ÿå‘½å‘¨æœŸä¸­åªè¢«è°ƒç”¨ä¸€æ¬¡ã€‚</p>

<p><strong>render() :</strong>è¿™ä¸ªæ–¹æ³•æ˜¯å¿…é¡»çš„ï¼Œå¯¹è§†å›¾è¿›è¡Œæ¸²æŸ“ï¼Œä¹Ÿå¯ä»¥è¿”å› null æˆ–è€… false æ¥è¡¨æ˜ä¸éœ€è¦æ¸²æŸ“ä»»ä½•ä¸œè¥¿.</p>

<p><strong>componentDidMount() :</strong>åœ¨ç»„ä»¶ç¬¬ä¸€æ¬¡ç»˜åˆ¶ä¹‹åï¼Œä¼šè°ƒç”¨è¯¥æ–¹æ³•é€šçŸ¥ç»„ä»¶å·²ç»åŠ è½½å®Œæˆã€‚è¿™ä¸ªæ–¹æ³•è°ƒç”¨çš„æ—¶å€™ï¼Œå…¶è™šæ‹Ÿ DOM å·²ç»æ„å»ºå®Œæˆï¼Œå¯ä»¥åœ¨è¿™ä¸ªå‡½æ•°é‡Œè·å–å…¶ä¸­çš„å…ƒç´ æˆ–è€…å­ç»„ä»¶ã€‚æ¡†æ¶æ˜¯å…ˆè°ƒç”¨å­ç»„ä»¶çš„è¯¥æ–¹æ³•ï¼Œç„¶åå†è°ƒç”¨çˆ¶ç»„ä»¶çš„ã€‚å¯ä»¥åœ¨è¿™é‡Œå‘èµ·ç½‘ç»œè¯·æ±‚ç­‰ã€‚</p>

<p><strong>componentWillReceiveProps(nextProps) :</strong> çˆ¶ç»„ä»¶æ”¹å˜å­ç»„ä»¶çš„å±æ€§çš„æ—¶å€™ä¼šè°ƒç”¨è¯¥æ–¹æ³•,åˆæ¬¡æ¸²æŸ“æ—¶ä¸ä¼šè°ƒç”¨è¯¥æ–¹æ³•ã€‚å‚æ•°nextPropsæ˜¯å³å°†è¢«è®¾ç½®çš„å±æ€§ï¼Œæ—§çš„å±æ€§è¿˜æ˜¯å¯ä»¥é€šè¿‡ this.props æ¥è·å–ã€‚</p>

<p><strong>shouldComponentUpdate(nextProps,nextState) :</strong>å½“ç»„ä»¶æ¥æ”¶åˆ°æ–°çš„å±æ€§æˆ–çŠ¶æ€æ”¹å˜çš„è¯ä¼šè°ƒç”¨è¯¥æ–¹æ³•ã€‚å‚æ•° nextProps å’Œä¸Šé¢çš„æ–¹æ³•ä¸€æ ·ã€‚nextState è¡¨ç¤ºç»„ä»¶å³å°†æ›´æ–°çš„çŠ¶æ€å€¼ã€‚è¿™ä¸ªæ–¹æ³•çš„è¿”å›å€¼å†³å®šæ˜¯å¦éœ€è¦æ›´æ–°ç»„ä»¶ï¼Œé»˜è®¤è¿”å›trueã€‚å¯ä»¥é‡è½½è¿™ä¸ªå‡½æ•°æ¥å†³å®šç»„ä»¶æ˜¯å¦éœ€è¦æ›´æ–°ã€‚</p>

<p><strong>componentWillUpdate(nextProps,nextState) :</strong>å¦‚æœç»„ä»¶çŠ¶æ€æ”¹å˜ï¼Œå¹¶ä¸”ä¸Šé¢çš„æ–¹æ³•è¿”å›ä¸ºtrueï¼Œå°±ä¼šå¼€å§‹å‡†æ›´æ–°ç»„ä»¶ã€‚è¿™é‡Œå¯ä»¥åšä¸€äº›åœ¨æ›´æ–°ç»„ä»¶ä¹‹å‰è¦åšçš„äº‹æƒ…ã€‚<strong>åœ¨è¿™ä¸ªæ–¹æ³•é‡Œé¢ä¸èƒ½å†è°ƒç”¨ this.setState æ¥ä¿®æ”¹çŠ¶æ€</strong>ã€‚è¿™ä¸ªæ–¹æ³•è°ƒç”¨ä¹‹åï¼Œå°±ä¼šæŠŠ nextProps å’Œ nextState åˆ†åˆ«è®¾ç½®åˆ° this.props å’Œ this.state ä¸­ã€‚ç´§æ¥ç€å°±ä¼šè°ƒç”¨ render() æ¥æ›´æ–°ç»„ä»¶äº†ã€‚</p>

<p><strong>componentDidUpdate(prevProps,prevState) :</strong>åœ¨è°ƒç”¨äº† render() æ›´æ–°ç»„ä»¶åŒæ­¥åˆ° DOM ä¸­ä¹‹åç«‹åˆ»è°ƒç”¨è¯¥æ–¹æ³•ã€‚å› ä¸ºåˆ°è¿™é‡Œå·²ç»å®Œæˆäº†å±æ€§å’ŒçŠ¶æ€çš„æ›´æ–°äº†ï¼Œæ­¤æ–¹æ³•çš„å‚æ•°å˜æˆäº† prevProps å’Œ prevStateã€‚</p>

<p><strong>componentWillUnmount() :</strong>å½“ç»„ä»¶ä» DOM ä¸­ç§»é™¤çš„æ—¶å€™å°±ä¼šè°ƒç”¨è¯¥æ–¹æ³•ã€‚å¯ä»¥è¿™ä¸ªæ–¹æ³•ä¸­åšä¸€äº›èµ„æºæ¸…ç†å·¥ä½œã€‚</p>

<p><a href="http://bbs.reactnative.cn/topic/15/react-react-native-%E7%9A%84es5-es6%E5%86%99%E6%B3%95%E5%AF%B9%E7%85%A7%E8%A1%A8">ES5 ES6å†™æ³•å¯¹ç…§è¡¨</a></p>

<p><a href="http://blog.kdchang.cc/2016/04/04/react-react-native-es5-es6-cheat-sheet/">ES5 ES6åŒºåˆ«</a></p>

<p><a href="https://babeljs.io/blog/2015/06/07/react-on-es6-plus">React on ES6</a></p>

<p><a href="http://egorsmirnov.me/2015/06/14/react-and-es6-part2.html">React and ES6</a></p>
</div>
  
  


      | <a href="/blog/2016/11/30/react-native-life/#comments">Comments</a>


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/2">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2017/01/16/es6/">ECMAScript 6</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/12/22/react-ios/">React Native å’Œ iOS äº’ç›¸è°ƒç”¨</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/12/20/weex/">Weex</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/12/19/vue/">Vue</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/12/10/suan-fa/">æ’åºç®—æ³•</a>
      </li>
    
  </ul>
</section>




<section>
  <h1>Categories</h1>
  <ul id="categories">
    <li class='category'><a href='/blog/categories/android/'>android (9)</a></li>
<li class='category'><a href='/blog/categories/ios/'>ios (10)</a></li>
<li class='category'><a href='/blog/categories/java/'>java (6)</a></li>
<li class='category'><a href='/blog/categories/javascript/'>javascript (4)</a></li>
<li class='category'><a href='/blog/categories/other/'>other (5)</a></li>
<li class='category'><a href='/blog/categories/react/'>react (8)</a></li>

  </ul>
</section>
  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2017 - guimingsu -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  











</body>
</html>
